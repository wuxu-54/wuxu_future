# NavigationView

在SwiftUI中，`NavigationView`是一个非常重要的组件，它提供了一种简单而强大的方式来实现导航功能。通过`NavigationView`，你可以创建一个导航堆栈，管理视图之间的导航关系，并且提供统一的导航栏样式和行为。

## 基本用法

`NavigationView`是SwiftUI中用于包裹需要导航功能的视图的容器。当你想要在视图之间进行导航时，可以使用`NavigationLink`来创建可导航的链接。

```swift
NavigationView {
    List {
        NavigationLink(destination: DetailView()) {
            Text("Go to Detail View")
        }
    }
}
```

在这个例子中，`NavigationView`包裹了一个`List`，列表中的每个项都是一个`NavigationLink`。点击这个链接会导航到`DetailView`。

## 导航栏样式

`NavigationView`提供了多种方式来自定义导航栏的外观和行为：

- `.navigationBarTitle(_:displayMode:)`: 设置导航栏标题。
- `.navigationBarHidden()`: 隐藏导航栏。
- `.navigationBarTitleTextCase(_:)`: 控制导航栏标题的文本大小写。
- `.navigationBarBackButtonHidden()`: 隐藏返回按钮。
- `.navigationBarItems(leading:trailing:)`: 在导航栏的两侧添加按钮或其他视图。

## 自定义导航栏按钮

你可以在导航栏的两侧添加自定义按钮：

```swift
NavigationView {
    HomeView()
        .navigationBarTitle("Home", displayMode: .inline)
        .navigationBarItems(leading: EditButton(), trailing: AddButton())
}
```

在这个例子中，`EditButton`和`AddButton`是SwiftUI内置的按钮类型，它们分别用于编辑和添加操作。

## 导航传递数据

`NavigationLink`不仅可以用于导航，还可以传递数据到目标视图。你可以通过闭包来实现这一点：

```swift
struct HomeView: View {
    @State private var detailText = "Hello"

    var body: some View {
        NavigationView {
            List {
                NavigationLink(destination: DetailView(text: $detailText)) {
                    Text("Go to Detail View")
                }
            }
            .navigationBarTitle("Home")
        }
    }
}

struct DetailView: View {
    @Binding var text: String

    var body: some View {
        Text(text)
    }
}
```

在这个例子中，`DetailView`通过`@Binding`属性包装器接收来自`HomeView`的数据。

## 模态导航

### `.sheet`模态导航

`.sheet`修饰符用于在当前视图上弹出一个模态视图。这种模态视图通常用于显示额外的信息或进行交互，而不会完全覆盖当前视图。

```swift
NavigationView {
    HomeView()
        .sheet(isPresented: $isSheetPresented) {
            DetailView()
        }
}

struct HomeView: View {
    @State private var isSheetPresented = false

    var body: some View {
        Button("Show Detail View") {
            self.isSheetPresented = true
        }
    }
}
```

在这个例子中，点击按钮会以模态形式呈现`DetailView`。

### `.fullScreenCover` 模态导航

与.sheet不同，.fullScreenCover会以全屏的形式覆盖当前视图，通常用于显示全屏的表单或视图。

```swift
struct ContentView: View {
    @State private var isFullScreenCoverPresented = false

    var body: some View {
        Button("Show Full Screen Cover") {
            isFullScreenCoverPresented = true
        }
        .fullScreenCover(isPresented: $isFullScreenCoverPresented) {
            FullScreenCoverView()
        }
    }
}

struct FullScreenCoverView: View {
    var body: some View {
        Text("This is a full screen cover")
            .padding()
            .background(Color.white)
            .cornerRadius(10)
            .onTapGesture {
                // Dismiss the full screen cover
            }
    }
}
```

## 总结

- `NavigationStack`，`NavigationView` 是包裹导航后视图的容器，结合`NavigationLink`实现布局切换。（这种视图切换等同于android的Fragment）
- `.sheet` 模态导航，不遮盖原视图，加载视图（类似android的dialog弹窗）
- `.fullScreenCover` 全屏的形式覆盖当前视图.(类似android的Activity)

---

## NavigationStack

SwiftUI 的 `NavigationStack` 是在 iOS 16 和 macOS 13 中引入的新视图，它提供了一种更灵活和强大的导航管理方式，用于替代之前的 `NavigationView`。`NavigationStack` 允许开发者以编程方式控制导航流程，包括深度链接和复杂的用户流程。

### 如何使用 `NavigationStack`

1. **基本用法**:
   `NavigationStack` 可以替代 `NavigationView`，使用方式类似，但提供了更多的灵活性。

   ```swift
   NavigationStack {
       // Your navigable content goes here
   }
   ```

2. **数据驱动的导航**:
   你可以使用 `NavigationLink` 的新用法，通过绑定到数据模型来实现导航。

   ```swift
   NavigationStack {
       List(dataArray) { dataItem in
           NavigationLink("Detail for \(dataItem)", value: dataItem)
       }
       .navigationDestination(for: DataType.self) { data in
           DetailView(data: data)
       }
   }
   ```

3. **导航状态管理**:
   `NavigationStack` 允许你通过 `path` 参数来管理导航状态，这是一个绑定到导航路径的数组。

   ```swift
   @State private var path = NavigationPath()

   NavigationStack(path: $path) {
       // Your navigable content goes here
   }
   ```

4. **自定义导航行为**:
   你可以使用 `.navigationDestination` 修饰符来自定义导航行为，例如，根据点击的项类型来决定导航到哪个视图。

   ```swift
   NavigationStack {
       // Your navigable content goes here
   }
   .navigationDestination(for: String.self) { string in
       // Return a view based on the string
   }
   ```

5. **自动导航**:
   你可以编程式地修改 `path` 来实现自动导航，例如，通过深度链接或应用启动时的导航。

   ```swift
   .onAppear {
       path.append(someView)
   }
   ```

### 示例代码

以下是一个使用 `NavigationStack` 的示例代码，展示了如何构建一个基本的导航界面：

```swift
import SwiftUI

struct ContentView: View {
    let items = ["Item 1", "Item 2", "Item 3"]
    
    var body: some View {
        NavigationStack {
            List {
                ForEach(items) { item in
                    NavigationLink("Go to \(item)", value: item)
                }
            }
            .navigationDestination(for: String.self) { item in
                DetailView(item: item)
            }
        }
    }
}

struct DetailView: View {
    let item: String
    
    var body: some View {
        Text("Detail for \(item)")
    }
}

@main
struct MyApp: App {
    var body: some Scene {
        WindowGroup {
            ContentView()
        }
    }
}
```

在这个例子中，我们创建了一个包含三个项目的列表，每个项目都是一个 `NavigationLink`，点击时会导航到 `DetailView`。我们使用 `.navigationDestination` 修饰符来定义如何根据传递的字符串创建视图。

`NavigationStack` 提供了一种更现代和灵活的方式来处理 SwiftUI 应用程序中的导航，使得开发者可以更精确地控制导航流程。  
