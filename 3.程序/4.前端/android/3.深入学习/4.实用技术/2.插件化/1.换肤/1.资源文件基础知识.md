# 资源文件基础知识

android中资源分为两大类：

- 直接访问资源 : 这些资源可以使用 `R.` 进行访问, 都保存在res目录下, 在编译的时候, 会自动生成`R.java`资源索引文件;
- 原生资源 : 这些资源存放在assets下, 不能使用 R类 进行访问, 只能通过 `AssetManager` 以二进制流形式读取资源;

## 1 res目录结构

- res/animator : 属性动画的XML文件目录, 属性动画就是定义起始结束, 动作, 重复时间等参数齐全的动画;
- res/anim : 补间动画的XML文件目录, 补间动画是只定义 起始 结束帧, 中间的动作由系统进行计算获取动作过程;
- res/color : 颜色列表的XML文件目录;
- res/drawable : 存放真实的位图文件, 也可以存放Drawable对象及子类对象的XML文件;
- res/layout : 界面布局文件目录;
- res/menu : 程序中使用的菜单文件目录, 该文件下的XML文件可以应用与 选项菜单, 子菜单, 上下文菜单等;
- res/raw : 存放原生资源, 与assets目录作用相同, 可以通过调用openRawResource(int)方法获取二进制输入流, 与asstes相似, 使用AssetsManager访问这些资源;
- res/value : 存放 字符串. 整数, 颜色, 数组 信息的 XML文件的目录, 这些XML文件资源的根元素是resource;
- res/xml : 原生的XML文件, 可以使用 Resource.getXML()方法进行访问;

### 1.1 res/value目录

分类资源文件 : 如果将所有的资源放到一个XML文件中, 会增加维护难度, 这里将不通类型的资源放到不同的XML文件下;

- arrays.xml : 存放数组资源;
- colors.xml : 存放颜色资源;
- dimens.xml : 存放尺寸值资源;
- strings.xml : 存放字符串资源;
- styles.xml : 存放样式资源;

#### 1.1.1 XML文件`<resource>`子标签解析

- string标签 : 代表一个字符串;
- integer标签 : 代表一个整数值标签;
- bool标签 : 代表一个boolean值;
- color标签 : 代表一个颜色值;
- array标签 : 代表数组;
- string-array标签 : 代表字符串数组;
- int-array标签 : 代表int数组;
- style标签 : 代表样式;
- dimen标签 : 代表一个尺寸;

---

## 2 访问资源

### 2.1 代码访问资源

语法：

`[<package_name>.]R.<resource_type>.<resource_name>`

- `<package_name>` 是资源所在包的名称（如果引用的资源来自您自己的资源包，则不需要）。
- `<resource_type>` 是资源类型的 R 子类。
- `<resource_name>` 是不带扩展名的资源文件名，或 XML 元素中的 android:name 属性值（如果资源是简单值）。

示例：

```java
setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, myarray));
```

### 2.2 XML访问资源

#### 2.2.1 引用系统资源

语法：

`@[<package_name>:]<resource_type>/<resource_name>`

- `<package_name>` 是资源所在包的名称（如果引用的资源来自同一包，则不需要，比如非系统资源，无需写包名）
- `<resource_type>` 是资源类型的 R 子类
- `<resource_name>` 是不带扩展名的资源文件名，或 XML 元素中的 android:name 属性值（如果资源是简单值）。

示例：

```xml
<EditText 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:textColor="@android:color/secondary_text_dark"
    android:text="@string/msg"
    />
```

#### 2.2.2 引用主题属性

语法：

`?[<package_name>:][<attr>/]<resource_name>`
>attr可以省略不写。
示例：

```xml
<EditText 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:textColor="?android:attr/colorAccent"
    />
```

`attr`是一个xml中的一个属性标签。可将其去掉简写为：

```xml
<EditText 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:textColor="?android:colorAccent"
    />
```

---

## 3 资源类型

### 3.1 color

颜色定义形式 :

- ＃RGB : 红 绿 蓝 三原色值, 每个值分16个等级, 最小为0, 最大为f;
- ＃ARGB : 透明度 红 绿 蓝 值, 每个值分16个等级, 最小为0, 最大为f;
- ＃RRGGBB : 红 绿 蓝 三原色值, 每个值分 256个等级, 最小为0, 最大为ff;
- ＃AARRGGBB : 透明度 红 绿 蓝 值, 每个值分 256个等级, 最小为0, 最大为ff;

### 3.2 数组资源

资源数组文件 : 通常将数组定义在 /res/values/arrays.xml文件中;

- 根标签 : `<resources>` ;
- 子标签 : `<array>`（普通类型数组）, `<string-array>`（字符串数组）, `<integer-array>`（整数数组）;

使用数组资源：

- XML文件中调用数组资源 : `@[packageName :] array/arrayName`
- Java文件中调用数组资源 : `[packageName . ]R.array.arrayName`
  - 获取实际普通数组 : `TypedArray obtainTypedArray(int id)`, 根据普通数组资源名称获取实际普通数组, TypedArray类提供了getXxx(int index)方法获取指定索引的元素;
  - 获取字符串数组 : `Resources String[] getStringArray(int id)`,  根据字符串数组资源名称获取字符串数组;
  - 获取整数数组 : `Resources int[] getIntArray(int id)`, 根据整数数组资源名称获取实际的整数数组;

### 3.3 String资源

字符串遵循一定的格式设定，可通过代码进行对应位置字符串的替换。

格式String:

- 常规类型、字符类型和数值类型的占位符格式：
`%[index$][标识][最小宽度][.精度]转换符`
- 日期和时间类型的占位符格式：
`%[index$][标识][最小宽度]转换符`
- 与参数不对应的占位符格式：
`%[标识][最小宽度]转换符`
