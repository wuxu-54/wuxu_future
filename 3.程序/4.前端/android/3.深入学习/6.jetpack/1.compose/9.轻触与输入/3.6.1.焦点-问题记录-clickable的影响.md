# `clickable(true)`å½±å“ç„¦ç‚¹è·å–

ä»¥ä¸‹æ˜¯å…³äº `clickable(true)` å¦‚ä½•å½±å“ç„¦ç‚¹è·å–çš„**æºç çº§è§£é‡Šå’ŒåŸç†åˆ†æ**ã€‚

---

## ğŸ§  ä¸€ã€`clickable(true)` çš„æœ¬è´¨è¡Œä¸º

Jetpack Compose ä¸­çš„ `clickable()` æ˜¯ä¸€ä¸ªé«˜é˜¶ä¿®é¥°ç¬¦ï¼Œå®ƒå°è£…äº†ç‚¹å‡»äº‹ä»¶å¤„ç†é€»è¾‘ã€‚å…¶ç­¾åå¦‚ä¸‹ï¼š

```kotlin
fun Modifier.clickable(
    interactionSource: MutableInteractionSource = remember { MutableInteractionSource() },
    indication: Indication? = rememberRipple(),
    enabled: Boolean = true,
    onClickLabel: String? = null,
    role: Role? = null,
    onClick: () -> Unit
): Modifier
```

å½“ä½ è°ƒç”¨ï¼š

```kotlin
Modifier.clickable(enabled = true, onClick = { ... })
```

Compose ä¼šè‡ªåŠ¨ä¸ºè¯¥ç»„ä»¶æ·»åŠ ä»¥ä¸‹èƒ½åŠ›ï¼š

| èƒ½åŠ› | æ˜¯å¦å¯ç”¨ |
|------|----------|
| ç‚¹å‡»äº¤äº’ | âœ… å¯ç”¨ |
| å¯èšç„¦ï¼ˆfocusableï¼‰ | âœ… è‡ªåŠ¨å¯ç”¨ |
| è§†è§‰åé¦ˆï¼ˆå¦‚ Rippleï¼‰ | âœ… é»˜è®¤å¯ç”¨ |

---

## ğŸ” äºŒã€ä¸ºä»€ä¹ˆ `clickable(true)` ä¼šå¯¼è‡´ç»„ä»¶è‡ªåŠ¨å˜ä¸ºå¯èšç„¦ï¼Ÿ

### æ¥çœ‹ Jetpack Compose æºç ä¸­çš„å®ç°ï¼ˆä¼ªä»£ç ç®€åŒ–ç‰ˆï¼‰

åœ¨ `Clickble.kt` æˆ– `Interaction.kt` ç›¸å…³æºç ä¸­å¯ä»¥çœ‹åˆ°ï¼š

```kotlin
val focusable = clickableNode.isFocusable // åˆ¤æ–­æ˜¯å¦åº”èšç„¦
if (focusable) {
    node.focusProperties {
        this.role = Role.Button // æˆ–å…¶å®ƒè§’è‰²
    }
}
```

Jetpack Compose å†…éƒ¨ä¼šåˆ¤æ–­ï¼š
> å¦‚æœç»„ä»¶æ˜¯å¯ç‚¹å‡»çš„ï¼ˆ`clickable(true)`ï¼‰ï¼Œå¹¶ä¸”æ²¡æœ‰æ˜¾å¼è®¾ç½® `.focusable(false)`ï¼Œé‚£ä¹ˆå®ƒå°†è¢«ç³»ç»Ÿè‡ªåŠ¨æ ‡è®°ä¸ºå¯èšç„¦ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œ**åªè¦ä½ ä½¿ç”¨äº† `clickable(true)`ï¼ŒJetpack Compose å°±ä¼šé»˜è®¤è®¤ä¸ºè¿™ä¸ªç»„ä»¶åº”è¯¥èƒ½æ¥æ”¶ç„¦ç‚¹**ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥é€šè¿‡é¥æ§å™¨æ–¹å‘é”®é€‰ä¸­å®ƒå¹¶æŒ‰â€œOKâ€è¿›è¡Œç‚¹å‡»æ“ä½œã€‚

---

## ğŸ“Œ ä¸‰ã€ç„¦ç‚¹è·¯å¾„ä¸ºä½•è¢«æ‰“ä¹±ï¼Ÿ

Android TV ä¸Šçš„æ–¹å‘é”®å¯¼èˆªä¾èµ–äº UI æ ‘ä¸­çš„ `focusable()` ç»„ä»¶é¡ºåºä¸ä½ç½®å…³ç³»ã€‚

å‡è®¾ä½ æœ‰å¦‚ä¸‹ç»“æ„ï¼š

```kotlin
Column {
    Text("A", modifier = Modifier.focusable())
    Text("B", modifier = Modifier.clickable(true, onClick = {}))
    Text("C", modifier = Modifier.focusable())
}
```

è™½ç„¶ A å’Œ C æ˜¾å¼è®¾ç½®äº† `focusable()`ï¼Œä½† B å› ä¸ºåŠ äº† `clickable(true)`ï¼Œä¹Ÿä¼šå˜æˆå¯èšç„¦ç»„ä»¶ã€‚

ç»“æœå¯¼è‡´ï¼š

- **ç„¦ç‚¹è·¯å¾„å˜æˆï¼šA â†’ B â†’ C**
- **è€Œä½ é¢„æœŸå¯èƒ½æ˜¯ï¼šA â†’ C**

è¿™å°±æ˜¯æ‰€è°“çš„â€œç„¦ç‚¹è·³è½¬æ··ä¹±â€ã€‚

---

## ğŸ› ï¸ å››ã€å¦‚ä½•ä»æºç è§’åº¦è§„é¿è¿™ä¸ªé—®é¢˜ï¼Ÿ

Compose æä¾›äº†ä¸€ç§æ–¹å¼ï¼š**é€šè¿‡æ‰‹åŠ¨è®¾ç½® `.focusable(false)` æ¥å±è”½è‡ªåŠ¨èšç„¦è¡Œä¸º**ã€‚

ä¾‹å¦‚ï¼š

```kotlin
Text(
    text = "ä»…ç‚¹å‡»ä¸èšç„¦",
    modifier = Modifier
        .clickable(true, onClick = {})
        .focusable(false)
)
```

è¿™ä¼šå‘Šè¯‰ Compose å¼•æ“ï¼š
> â€œæˆ‘å…è®¸ç‚¹å‡»ï¼Œä½†ä¸è¦è®©è¿™ä¸ªç»„ä»¶å‚ä¸ç„¦ç‚¹è·¯å¾„ã€‚â€

---

## ğŸ’¡ äº”ã€æºç å±‚é¢çš„æŠ€æœ¯è¯´æ˜

Compose åœ¨æ„å»º UI æ ‘æ—¶ï¼Œä¼šé€šè¿‡ä¸€ç³»åˆ—çš„ `Modifier` æ„å»ºèŠ‚ç‚¹ï¼ˆNodeï¼‰ã€‚å…¶ä¸­ï¼š

- `clickable()` ä¼šåˆ›å»ºä¸€ä¸ª `ClickableNode`
- è¯¥ Node ä¼šæ£€æŸ¥å½“å‰æ˜¯å¦å¯ç”¨ï¼Œå¹¶å†³å®šæ˜¯å¦æ³¨å†Œç„¦ç‚¹å±æ€§

éƒ¨åˆ†æºç ç‰‡æ®µï¼ˆæ¥è‡ª Compose å†…éƒ¨ï¼‰ï¼š

```kotlin
internal class ClickableNode(...) : DelegatingNode(), FocusableNode {
    override val isFocusable: Boolean
        get() = enabled && role != null
}
```

æ‰€ä»¥ï¼š

- å½“ä½ è®¾ç½® `clickable(true)` å¹¶èµ‹äºˆäº†ä¸€ä¸ª `role`ï¼ˆå¦‚ Buttonï¼‰
- æˆ–è€…æœªæŒ‡å®š `indication` ä½†ä¿ç•™äº† `enabled = true`
- é‚£ä¹ˆè¿™ä¸ªç»„ä»¶å°±ä¼šè¢«æ ‡è®°ä¸º `isFocusable == true`

---

## âœ… å…­ã€æ¨èåšæ³•ï¼ˆé¿å…å¹²æ‰°ç„¦ç‚¹è·¯å¾„ï¼‰

### âœ… æ–¹æ³•ä¸€ï¼šä»…ç‚¹å‡»ï¼Œä¸èšç„¦ï¼ˆæ¨èç”¨äº Android TVï¼‰

```kotlin
Modifier.clickable(
    interactionSource = remember { MutableInteractionSource() },
    indication = null, // ç§»é™¤è§†è§‰åé¦ˆ
    onClick = {}
)
```

è¿™æ ·ï¼š

- ç”¨æˆ·å¯ä»¥ç‚¹å‡»
- ä½†ä¸ä¼šè‡ªåŠ¨åŠ å…¥ç„¦ç‚¹è·¯å¾„

### âœ… æ–¹æ³•äºŒï¼šæ˜ç¡®ç¦æ­¢èšç„¦ï¼ˆå³ä½¿ä½¿ç”¨äº† `clickable(true)`ï¼‰

```kotlin
Modifier
    .clickable(true, onClick = {})
    .focusable(false)
```

---

## ğŸ“‹ ä¸ƒã€æ€»ç»“ï¼š`clickable(true)` å¯¹ç„¦ç‚¹çš„å½±å“æœºåˆ¶

| è¡Œä¸º | æ˜¯å¦è§¦å‘ |
|------|----------|
| è‡ªåŠ¨æ·»åŠ  `focusable()` | âœ… æ˜¯ |
| åŠ å…¥ç„¦ç‚¹å¯¼èˆªè·¯å¾„ | âœ… æ˜¯ |
| æ”¹å˜åŸæœ‰ç„¦ç‚¹é¡ºåº | âœ… æ˜¯ |
| å½±å“ `up/down/left/right` è®¾ç½® | âœ… æ˜¯ |
| å¯ä»¥æ‰‹åŠ¨å±è”½ | âœ… æ˜¯ï¼ˆé€šè¿‡ `.focusable(false)`ï¼‰ |
