# compose 资源

compose对资源的存放与原来没有什么区别，仍然是使用`res`文件夹，其中包括：图片、字符串、颜色、主题等。但在具体代码使用上有了专门的API

## 简介

在 Android 开发中，Compose 框架提供了一套全新的声明式 UI 构建方式，同时也引入了专门的资源管理机制。以下是对 Android Compose 资源的详细解析：

### **1. Compose 资源概述**

Compose 资源是一种用于声明式加载和管理应用资源的方式，替代了传统的 `Resources` API（如 `context.resources.getString(R.string.hello)`）。Compose 资源具有以下优势：

- **自动重组**：当资源值变化时（如语言切换），Compose 会自动重组使用该资源的组件。
- **类型安全**：资源引用自动匹配类型（如 `StringResource`、`ImageVector`）。
- **预览支持**：直接在预览函数中使用资源。

### **2. 资源类型及使用方式**

#### **2.1 字符串资源**

```kotlin
// 传统方式
val text = context.resources.getString(R.string.welcome_message)

// Compose 方式
import androidx.compose.runtime.Composable
import androidx.compose.ui.res.stringResource

@Composable
fun WelcomeScreen() {
    Text(text = stringResource(id = R.string.welcome_message))
}
```

#### **2.2 图像资源**

```kotlin
import androidx.compose.ui.res.painterResource

@Composable
fun ImageExample() {
    // 加载 drawable 资源
    Image(
        painter = painterResource(id = R.drawable.logo),
        contentDescription = "App Logo"
    )
    
    // 加载 SVG 资源
    Image(
        painter = painterResource(id = R.drawable.icon_settings),
        contentDescription = "Settings"
    )
}
```

#### **2.3 尺寸资源**

```kotlin
import androidx.compose.ui.res.dimensionResource

@Composable
fun CardExample() {
    Card(
        modifier = Modifier.padding(dimensionResource(id = R.dimen.card_margin)),
        elevation = dimensionResource(id = R.dimen.card_elevation)
    ) {
        // ...
    }
}
```

#### **2.4 颜色资源**

```kotlin
import androidx.compose.ui.res.colorResource

@Composable
fun TextWithColor() {
    Text(
        text = "Hello",
        color = colorResource(id = R.color.primary)
    )
}
```

#### **2.5 字体资源**

```kotlin
import androidx.compose.ui.text.font.Font
import androidx.compose.ui.text.font.FontFamily
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.res.fontResource

// 在 assets 目录下创建 fonts 文件夹存放字体文件
val InterFontFamily = FontFamily(
    Font(R.font.inter_regular, FontWeight.Normal),
    Font(R.font.inter_bold, FontWeight.Bold)
)

@Composable
fun TextWithCustomFont() {
    Text(
        text = "Hello",
        fontFamily = InterFontFamily,
        fontWeight = FontWeight.Bold
    )
}
```

### **3. 多语言与动态资源**

Compose 自动支持系统语言切换，无需手动处理：

```kotlin
// 当用户切换系统语言时，Compose 会自动重组使用 stringResource 的组件
@Composable
fun Greeting() {
    Text(text = stringResource(id = R.string.hello))
}
```

### **4. 资源预览**

使用 `@Preview` 注解预览资源效果：

```kotlin
import androidx.compose.ui.tooling.preview.Preview

@Preview
@Composable
fun GreetingPreview() {
    Greeting()
}
```

### **5. 资源文件结构**

Compose 资源与传统资源共享同一目录结构，但可以在代码中使用 Compose 专用 API：

```txt
res/
├── drawable/
│   ├── logo.png
│   └── icon_settings.svg
├── values/
│   ├── strings.xml
│   ├── colors.xml
│   └── dimens.xml
└── values-fr/  # 法语资源
    └── strings.xml
```

### **6. 性能优化**

- **延迟加载**：避免在组件初始化时加载所有资源，使用 `remember` 缓存资源。
- **资源复用**：通过 `remember` 或静态变量复用字体、颜色等资源。
- **矢量图优先**：使用 SVG 替代 PNG，减少 APK 体积。

### **7. 注意事项**

1. **资源类型匹配**：确保 `stringResource` 只用于字符串资源，避免类型错误。
2. **避免硬编码**：所有 UI 常量（如尺寸、颜色）应使用资源文件管理。
3. **Context 传递**：在 Composable 函数中，通常不需要显式传递 `Context`，Compose 会自动处理。

### **总结**

Compose 资源通过声明式 API 简化了资源管理，提升了代码可读性和维护性。核心是使用 `stringResource`、`painterResource` 等函数替代传统的 `context.resources` 调用，同时利用 Compose 的重组机制自动响应资源变化。
