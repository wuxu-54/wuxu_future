# Jetpack Compose ä¿®é¥°ç¬¦ï¼ˆModifierï¼‰å…¨é¢è§£æ ğŸ¨

## ä¸€ã€ä¿®é¥°ç¬¦æ ¸å¿ƒä½œç”¨ä¸è®¾è®¡ç†å¿µ

### ï¼ˆä¸€ï¼‰æ ¸å¿ƒèƒ½åŠ›

- **å¸ƒå±€æ§åˆ¶**ï¼šè°ƒæ•´å°ºå¯¸ã€è¾¹è·ã€å¯¹é½æ–¹å¼ï¼ˆå¦‚ `padding`ã€`fillMaxWidth`ï¼‰
- **äº¤äº’å¢å¼º**ï¼šæ·»åŠ ç‚¹å‡»ã€æ»šåŠ¨ã€æ‹–åŠ¨ï¼ˆå¦‚ `clickable`ã€`draggable`ï¼‰
- **è§†è§‰ä¿®é¥°**ï¼šèƒŒæ™¯è‰²ã€å½¢çŠ¶è£å‰ªã€åç§»ï¼ˆå¦‚ `background`ã€`clip`ï¼‰
- **è¯­ä¹‰è¡¥å……**ï¼šæ— éšœç¢æ ‡ç­¾ã€æµ‹è¯•æ ‡è¯†ï¼ˆå¦‚ `contentDescription`ã€`testTag`ï¼‰

### ï¼ˆäºŒï¼‰è®¾è®¡ä¼˜åŠ¿

- **é“¾å¼è°ƒç”¨**ï¼šé€šè¿‡ `Modifier` å‡½æ•°é“¾å®ç°åŸå­æ“ä½œç»„åˆï¼ˆä¾‹ï¼š`padding().clickable().fillMaxWidth()`ï¼‰
- **ä½œç”¨åŸŸå®‰å…¨**ï¼šé™å®šä¿®é¥°ç¬¦é€‚ç”¨èŒƒå›´ï¼ˆå¦‚ `matchParentSize` ä»…åœ¨ `Box` ä¸­ç”Ÿæ•ˆï¼‰
- **æ€§èƒ½ä¼˜åŒ–**ï¼šå•éæµ‹é‡æœºåˆ¶ + ä¸å¯å˜å¯¹è±¡è®¾è®¡ï¼Œé¿å…é‡å¤è®¡ç®—

## äºŒã€æ ¸å¿ƒæ¦‚å¿µä¸å…³é”®è§„åˆ™

### ï¼ˆä¸€ï¼‰ä¿®é¥°ç¬¦é¡ºåºå†³å®šè¡Œä¸ºï¼ˆå¿…çŸ¥ï¼ï¼‰

| é¡ºåº                | ä»£ç ç¤ºä¾‹                                                                 | æ•ˆæœå·®å¼‚                                                                 |
|---------------------|--------------------------------------------------------------------------|--------------------------------------------------------------------------|
| **clickable â†’ padding** | `Modifier.clickable().padding(16.dp)`                                   | ç‚¹å‡»åŒºåŸŸåŒ…å« padding ç©ºé—´ï¼ˆæ¨èï¼‰                                       |
| **padding â†’ clickable** | `Modifier.padding(16.dp).clickable()`                                   | ç‚¹å‡»åŒºåŸŸä¸åŒ…å« padding ç©ºé—´ï¼ˆè¾¹ç¼˜ä¸å¯ç‚¹å‡»ï¼‰                             |

#### ç¤ºæ„å›¾ï¼šé¡ºåºå½±å“ç‚¹å‡»åŒºåŸŸ

![Modifier é¡ºåºå¯¹æ¯”](https://developer.android.google.cn/static/develop/ui/compose/images/modifier-chained.png?hl=zh-cn)  
*ï¼ˆå®˜æ–¹ç¤ºæ„å›¾ï¼šå·¦å›¾ç‚¹å‡»åŒºåŸŸåŒ…å«å†…è¾¹è·ï¼Œå³å›¾ä»…å†…å®¹åŒºå¯ç‚¹å‡»ï¼‰*

### ï¼ˆäºŒï¼‰å¸ƒå±€çº¦æŸä¸ä¿®é¥°ç¬¦ä¼˜å…ˆçº§

1. **çˆ¶çº¦æŸä¼˜å…ˆ**ï¼šå­é¡¹é»˜è®¤éµå®ˆçˆ¶å®¹å™¨ä¼ é€’çš„ `minWidth/maxHeight` ç­‰çº¦æŸ
2. **å¼ºåˆ¶è¦†ç›–**ï¼šä½¿ç”¨ `requiredSize(150.dp)` å¯çªç ´çˆ¶çº¦æŸï¼ˆå¯èƒ½å¯¼è‡´æº¢å‡ºï¼‰
3. **è‡ªé€‚åº”å¡«å……**ï¼š`fillMaxWidth()` æ ¹æ®çˆ¶å¯ç”¨ç©ºé—´æ‰©å±•ï¼ˆå—é™äºçˆ¶çº¦æŸï¼‰

## ä¸‰ã€å†…ç½®ä¿®é¥°ç¬¦åˆ†ç±»ä¸è¯¦è§£ ğŸ“Š

### ï¼ˆä¸€ï¼‰å¸ƒå±€ç›¸å…³ä¿®é¥°ç¬¦

| ä¿®é¥°ç¬¦                | ä½œç”¨åŸŸ       | å…¸å‹ç”¨æ³•                                                                 | ç‰¹æ®Šè¯´æ˜                                                                 |
|-----------------------|--------------|--------------------------------------------------------------------------|--------------------------------------------------------------------------|
| `padding(dp)`         | å…¨å±€         | `Modifier.padding(16.dp)`                                               | å†…è¾¹è·ï¼Œå½±å“èƒŒæ™¯èŒƒå›´                                                    |
| `fillMaxWidth()`      | å…¨å±€         | `Modifier.fillMaxWidth()`                                                | å¡«å……çˆ¶å®¹å™¨å‰©ä½™å®½åº¦                                                      |
| `matchParentSize()`   | `BoxScope`   | `Box { Image(Modifier.matchParentSize()) }`                             | å­é¡¹å°ºå¯¸ç­‰äºçˆ¶ `Box` å°ºå¯¸ï¼ˆä¸æ”¹å˜çˆ¶å°ºå¯¸ï¼‰                              |
| `weight(ratio)`       | `Row/Column` | `Row { Text(Modifier.weight(2f)) Text(Modifier.weight(1f)) }`          | æŒ‰æ¯”ä¾‹åˆ†é…å‰©ä½™ç©ºé—´ï¼ˆç±»ä¼¼ Flexboxï¼‰                                      |
| `offset(x, y)`        | å…¨å±€         | `Text("åç§»", Modifier.offset(8.dp, 4.dp))`                             | ç›¸å¯¹çˆ¶å®¹å™¨çš„å¸ƒå±€åç§»ï¼ˆå—å¸ƒå±€æ–¹å‘å½±å“ï¼‰                                  |
| `absoluteOffset(x)`   | å…¨å±€         | `Icon(Icons.Filled.Check, Modifier.absoluteOffset(right = 8.dp))`       | ç»å¯¹åç§»ï¼ˆå›ºå®šå‘å³åç§»ï¼Œæ— è§†å¸ƒå±€æ–¹å‘ï¼‰                                  |

### ï¼ˆäºŒï¼‰è§†è§‰ä¸äº¤äº’ä¿®é¥°ç¬¦

```kotlin
@Composable
fun DecoratedCard() {
    Card(
        modifier = Modifier
            .size(200.dp) // å›ºå®šå°ºå¯¸
            .padding(16.dp) // å†…è¾¹è·
            .background(Color.White, RoundedCornerShape(8.dp)) // å¸¦åœ†è§’çš„èƒŒæ™¯
            .clickable(indication = rememberRipple()) {  // ç‚¹å‡»æ¶Ÿæ¼ªæ•ˆæœ
                // ç‚¹å‡»é€»è¾‘
            }
            .shadow(4.dp, RoundedCornerShape(8.dp)) // é˜´å½±
    ) {
        Text("Jetpack Compose", Modifier.align(Alignment.Center))
    }
}
```

### ï¼ˆä¸‰ï¼‰ä½œç”¨åŸŸé™å®šä¿®é¥°ç¬¦ï¼ˆå…³é”®ï¼ï¼‰

| ä¿®é¥°ç¬¦            | æœ‰æ•ˆä½œç”¨åŸŸ         | é”™è¯¯åœºæ™¯ç¤ºä¾‹                                      | æ­£ç¡®ç”¨æ³•ç¤ºä¾‹                                  |
|-------------------|--------------------|---------------------------------------------------|-----------------------------------------------|
| `matchParentSize` | `BoxScope`         | `Row { Image(Modifier.matchParentSize()) }` âŒ    | `Box { Image(Modifier.matchParentSize()) }` âœ… |
| `weight`          | `RowScope/ColumnScope` | `Box { Text(Modifier.weight(1f)) }` âŒ            | `Column { Text(Modifier.weight(1f)) }` âœ…      |
| `align`           | `Row/Column/Box`   | `Text(Modifier.align(Alignment.Center))` âŒï¼ˆæ— çˆ¶å®¹å™¨ï¼‰ | `Box { Text(Modifier.align(Alignment.Center)) }` âœ… |

## å››ã€é«˜çº§æŠ€å·§ä¸æœ€ä½³å®è·µ

### ï¼ˆä¸€ï¼‰æå–å¤ç”¨ä¿®é¥°ç¬¦ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰

```kotlin
// å…¨å±€å¤ç”¨ï¼ˆæ— çŠ¶æ€ï¼‰
val CardModifier = Modifier
    .padding(16.dp)
    .background(Color.White)
    .clip(RoundedCornerShape(8.dp))
    .shadow(4.dp)

// å«çŠ¶æ€çš„åŠ¨æ€ä¿®é¥°ç¬¦ï¼ˆé¿å…é‡ç»„æ—¶é‡å¤åˆ›å»ºï¼‰
@Composable
fun DynamicCard(modifier: Modifier = Modifier) {
    val ripple = rememberRipple()
    Card(
        modifier = modifier.then(CardModifier.clickable(ripple) {}) // ç»„åˆå›ºå®šä¿®é¥°ç¬¦
    ) { /* ... */ }
}
```

### ï¼ˆäºŒï¼‰è‡ªå®šä¹‰ä¿®é¥°ç¬¦ï¼ˆæ‰©å±•èƒ½åŠ›ï¼‰

```kotlin
// è‡ªå®šä¹‰å¸¦å‘¼å¸åŠ¨ç”»çš„ä¿®é¥°ç¬¦
fun Modifier.breathingAnimation() = this.then(
    object : LayoutModifier {
        override fun MeasureScope.measure(
            measurable: Measurable,
            constraints: Constraints
        ): MeasureResult {
            val size = measurable.measure(constraints).size
            return layout(size.width, size.height) {
                val animatedScale = animateFloatAsState(1f + sin(animateMillis(1000)) * 0.1f)
                drawScale(scaleX = animatedScale.value, scaleY = animatedScale.value) {
                    measurable.place(0, 0)
                }
            }
        }
    }
)

// ä½¿ç”¨ç¤ºä¾‹
Text("å‘¼å¸æ•ˆæœ", Modifier.breathingAnimation())
```

### ï¼ˆä¸‰ï¼‰æ€§èƒ½æ•æ„Ÿåœºæ™¯ä¼˜åŒ–

1. **é¿å…åœ¨é‡ç»„ä¸­åˆ›å»ºæ–°ä¿®é¥°ç¬¦**ï¼š

   ```kotlin
   // åæ¨¡å¼ï¼šæ¯æ¬¡é‡ç»„åˆ›å»ºæ–°å¯¹è±¡
   Text(modifier = Modifier.padding(16.dp + animateDpAsState(0.dp).value))

   // æ­£ç¡®åšæ³•ï¼šåˆ†ç¦»åŠ¨æ€å€¼ä¸å›ºå®šä¿®é¥°ç¬¦
   val padding = 16.dp + animateDpAsState(0.dp).value
   Text(modifier = Modifier.padding(padding)) // ä»…å€¼å˜åŒ–ï¼Œä¿®é¥°ç¬¦å®ä¾‹ä¸å˜
   ```

2. **å»¶è¿Ÿæµ‹é‡ä¿®é¥°ç¬¦**ï¼š
   ä½¿ç”¨ `offset { ... }` æ›¿ä»£ `offset(x, y)`ï¼Œåœ¨æµ‹é‡é˜¶æ®µåŠ¨æ€è®¡ç®—åç§»ï¼ˆé¿å…é‡ç»„è§¦å‘é‡ç»˜ï¼‰

## äº”ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### ï¼ˆä¸€ï¼‰å¤–è¾¹è·ï¼ˆMarginï¼‰å¦‚ä½•å®ç°ï¼Ÿ

**Compose æ²¡æœ‰ç›´æ¥çš„ `margin` ä¿®é¥°ç¬¦**ï¼Œé€šè¿‡ä»¥ä¸‹æ–¹å¼æ¨¡æ‹Ÿï¼š

1. çˆ¶å®¹å™¨æ·»åŠ  `padding`ï¼ˆæ¨èï¼‰ï¼š

   ```kotlin
   Column(modifier = Modifier.padding(16.dp)) {  // ç›¸å½“äºå­é¡¹å¤–è¾¹è·
       Text("å†…å®¹")
   }
   ```

2. å­é¡¹åŒ…è£¹ä¸€å±‚é€æ˜ Boxï¼š

   ```kotlin
   Box(modifier = Modifier.padding(16.dp)) {
       Text("å†…å®¹")
   }
   ```

### ï¼ˆäºŒï¼‰èƒŒæ™¯è‰²ä¸å†…è¾¹è·çš„å…³ç³»

- **`background` åœ¨å‰**ï¼špadding æ˜¯å¤–è¾¹è·ï¼ˆèƒŒæ™¯ä¸åŒ…å« padding åŒºåŸŸï¼‰
- **`padding` åœ¨å‰**ï¼špadding æ˜¯å†…è¾¹è·ï¼ˆèƒŒæ™¯åŒ…å« padding åŒºåŸŸï¼‰

```kotlin
// å†…è¾¹è·ï¼ˆèƒŒæ™¯è¦†ç›– paddingï¼‰
Modifier.padding(16.dp).background(Color.Red)

// å¤–è¾¹è·ï¼ˆèƒŒæ™¯ä¸è¦†ç›– paddingï¼‰
Modifier.background(Color.Red).padding(16.dp)
```

## å…­ã€æ€»ç»“ä¸å­¦ä¹ è·¯å¾„

### ï¼ˆä¸€ï¼‰çŸ¥è¯†å›¾è°±ï¼ˆæµç¨‹å›¾ï¼‰

```mermaid
graph TD
    A[ä¿®é¥°ç¬¦æ ¸å¿ƒ] --> B[å¸ƒå±€æ§åˆ¶]
    A --> C[äº¤äº’å¢å¼º]
    A --> D[è§†è§‰ä¿®é¥°]
    B --> B1(padding/fillMaxWidth/weight)
    B --> B2(matchParentSize/offset)
    C --> C1(clickable/draggable)
    D --> D1(background/clip/shadow)
    E[ä½œç”¨åŸŸå®‰å…¨] --> E1(BoxScope/RowScope)
    F[æœ€ä½³å®è·µ] --> F1(æå–å¤ç”¨/æ€§èƒ½ä¼˜åŒ–)
    G[è‡ªå®šä¹‰ä¿®é¥°ç¬¦] --> G1(LayoutModifier/ç”»æ³•å®šåˆ¶)
```

### ï¼ˆäºŒï¼‰å®˜æ–¹å­¦ä¹ èµ„æº

1. [ä¿®é¥°ç¬¦å®Œæ•´åˆ—è¡¨](https://developer.android.com/reference/kotlin/androidx/compose/ui/Modifier)
2. [å¸ƒå±€åŸºç¡€çŸ¥è¯† Codelab](https://developer.android.com/codelabs/jetpack-compose-layouts)
3. [Now in Android ä»£ç åº“](https://github.com/android/nowinandroid)ï¼ˆæœç´¢ `Modifier` æŸ¥çœ‹å®æˆ˜ç”¨æ³•ï¼‰

é€šè¿‡æŒæ¡ä¿®é¥°ç¬¦çš„é“¾å¼ç»„åˆã€ä½œç”¨åŸŸè§„åˆ™å’Œæ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼Œå¯å¤§å¹…æå‡ Compose å¸ƒå±€çš„å¼€å‘æ•ˆç‡ä¸çµæ´»æ€§ã€‚å»ºè®®ç»“åˆå®˜æ–¹ç¤ºä¾‹ä¸è‡ªå®šä¹‰åœºæ™¯ï¼Œé€æ­¥æ„å»ºè‡ªå·±çš„ä¿®é¥°ç¬¦å·¥å…·åº“ ğŸ› ï¸ã€‚
