# 修饰符列表

以下是 **[Android 官方 Compose 修饰符列表](https://developer.android.google.cn/develop/ui/compose/modifiers-list?hl=zh-cn)** 的完整内容（按原始文档结构整理，保留技术细节与代码格式）：

## Compose 修饰符列表  

更新时间：2025-04-28

### **一、操作（Interaction）**  

#### 1. `anchoredDraggable`  

```kotlin
<T : Any?> Modifier.anchoredDraggable(
    state: AnchoredDraggableState<T>,
    orientation: Orientation,
    enabled: Boolean = true,
    interactionSource: MutableInteractionSource? = null,
    overscrollEffect: OverscrollEffect? = null,
    flingBehavior: FlingBehavior? = null
)
```  

**作用**：启用预定义值之间的拖动手势（如滑动选择标签）。  
**废弃版本**：含 `startDragImmediately` 参数的重载已废弃（无替代）。  
**作用域**：任意  

#### 2. `clickable`  

```kotlin
Modifier.clickable(
    enabled: Boolean = true,
    onClickLabel: String? = null,
    role: Role? = null,
    onClick: () -> Unit
)
```  

**作用**：配置点击事件（含无障碍标签）。  
**进阶版本**：  

```kotlin
Modifier.clickable(
    interactionSource: MutableInteractionSource?,  // 手势交互源
    indication: Indication?,  // 点击反馈（如涟漪）
    ...  // 其他参数同上
)
```  

**作用域**：Any  

#### 3. `combinedClickable`  

```kotlin
Modifier.combinedClickable(
    enabled: Boolean = true,
    onClick: () -> Unit,
    onLongClick: (() -> Unit)? = null,
    onDoubleClick: (() -> Unit)? = null,
    // 含交互反馈与无障碍参数
)
```  

**作用**：支持点击、长按、双击（优先使用此 API 替代 `detectTapGestures`）。  
**提示**：默认使用 `LocalIndication` 主题样式，可通过 `indication` 参数自定义。  
**作用域**：Any  

### **二、对齐方式（Alignment）**  

#### 1. 行/列专用对齐  

```kotlin
// Row 垂直对齐（顶部/居中/底部）
Modifier.align(alignment: Alignment.Vertical)  
// Column 水平对齐（开始/居中/结束）
Modifier.align(alignment: Alignment.Horizontal)  
```  

**作用域**：`RowScope` / `ColumnScope`  

#### 2. 基线对齐  

```kotlin
Modifier.alignByBaseline()  // 基于文本基线对齐
Modifier.alignBy(alignmentLine: HorizontalAlignmentLine)  // 自定义对齐线
```  

**场景**：表单字段、混合图文布局。  

### **三、动画（Animation）**  

#### 1. `animateEnterExit`  

```kotlin
Modifier.animateEnterExit(
    enter = fadeIn() + slideInVertically(),  // 进入动画
    exit = fadeOut() + slideOutVertically(),  // 退出动画
    label = "item"
)
```  

**作用**：为 `AnimatedVisibility` 子项定义独立动画（替代全局动画）。  
**作用域**：`AnimatedVisibilityScope`  

#### 2. `animateItem`（列表专用）  

```kotlin
Modifier.animateItem(
    fadeInSpec = tween(300),  // 淡入
    placementSpec = spring(),  // 位置变化
    fadeOutSpec = tween(200)  // 淡出
)
```  

**作用**：LazyList 项增删/重排时的动画（自动关联列表状态）。  
**作用域**：`LazyItemScope` / `LazyGridItemScope`  

### **四、边框与绘图（Border & Graphics）**  

#### 1. `border`  

```kotlin
Modifier.border(
    width: Dp = 1.dp,
    color: Color = Color.Black,
    shape: Shape = RectangleShape
)
```  

**扩展**：支持渐变色边框（`Brush`）和 `BorderStroke` 自定义。  

#### 2. `shadow`  

```kotlin
Modifier.shadow(
    elevation: Dp = 4.dp,
    shape: Shape = RoundedCornerShape(8.dp),
    clip: Boolean = true  // 是否裁剪阴影外内容
)
```  

**原理**：基于 `graphicsLayer` 实现，避免层级爆炸。  

### **五、焦点管理（Focus）**  

#### 1. 基础焦点控制  

```kotlin
Modifier.focusTarget()  // 使组件可聚焦
Modifier.onFocusChanged { state ->  // 监听焦点状态
    if (state.isFocused) { /* 获得焦点 */ }
}
```  

#### 2. 焦点顺序与恢复  

```kotlin
Modifier.focusRequester(focusRequester)  // 请求焦点
Modifier.focusRestorer(fallbackRequester)  // 保存/恢复焦点（如旋转屏幕）
```  

### **六、布局（Layout）**  

#### 1. 尺寸控制  

```kotlin
Modifier.size(100.dp)  // 固定尺寸
Modifier.fillMaxWidth(0.8f)  // 占父容器80%宽度
Modifier.aspectRatio(1.77f)  // 宽高比（16:9）
```  

#### 2. 内边距与系统适配  

```kotlin
Modifier.padding(16.dp)  // 通用内边距
Modifier.statusBarsPadding()  // 适配状态栏
Modifier.safeContentPadding()  // 安全区域（刘海屏、折叠屏）
```  

### **七、滚动（Scroll）**  

#### 1. 基础滚动  

```kotlin
// 垂直滚动（配合 Column）
Modifier.verticalScroll(rememberScrollState())  
// 水平滚动（配合 Row）
Modifier.horizontalScroll(rememberScrollState())  
```  

#### 2. 高级滚动（`scrollable`）  

```kotlin
Modifier.scrollable(
    state: ScrollableState,  // 自定义滚动逻辑
    orientation: Orientation.Vertical,
    flingBehavior: springFling()  // 弹性滑动
)
```  

**场景**：自定义滚动效果（如视差滚动）。  

### **八、变换（Transformation）**  

#### 1. 旋转与缩放  

```kotlin
Modifier.rotate(45f)  // 顺时针旋转45度
Modifier.scale(1.2f)  // 整体放大1.2倍
```  

#### 2. 拖拽变换（`transformable`）  

```kotlin
Modifier.transformable(
    state: rememberTransformableState(),  // 记录缩放/旋转/平移
    onGestureStarted = { /* 手势开始 */ }
)
```  

**场景**：图片查看器、手势缩放组件。  

### **九、测试与调试（Testing）**  

#### 1. 测试标记  

```kotlin
Modifier.testTag("login_button")  // 供 Espresso 测试定位
```  

#### 2. 性能调试  

```kotlin
Modifier.toolingGraphicsLayer()  // 标记图层以便工具识别
```  

### **十、废弃与实验性修饰符**  

#### 1. 废弃 API  

- `anchoredDraggable(..., startDragImmediately: Boolean)`：移除该参数，默认立即响应。  
- `focusModifier()`：改用 `focusTarget()`。  

#### 2. 实验性 API（需标注）  

```kotlin
@ExperimentalMaterial3Api
Modifier.pullToRefresh(
    isRefreshing: Boolean,
    onRefresh: () -> Unit
)
```  

**说明**：Material 3 下拉刷新，需配合 `PullToRefreshState`。  

### **十一、完整分类索引**  

| 分类          | 代表性修饰符                          | 核心功能                         |
|---------------|---------------------------------------|----------------------------------|
| **操作**      | `clickable`, `combinedClickable`      | 点击、长按、双击交互             |
| **对齐**      | `align`, `alignByBaseline`             | 行/列内对齐、基线对齐            |
| **动画**      | `animateEnterExit`, `animateItem`      | 入场/退场动画、列表项动画        |
| **边框**      | `border`, `shadow`                     | 边框、阴影绘制                   |
| **焦点**      | `focusTarget`, `focusRequester`        | 焦点控制与请求                   |
| **布局**      | `size`, `fillMaxSize`, `padding`       | 尺寸、内边距、系统适配           |
| **滚动**      | `verticalScroll`, `scrollable`         | 基础滚动、自定义滚动逻辑         |
| **变换**      | `rotate`, `transformable`              | 旋转、缩放、拖拽变换             |
| **测试**      | `testTag`                              | 测试标记                         |

### **代码示例：综合应用**  

```kotlin
@Composable
fun CardItem(
    item: String,
    onFavorite: () -> Unit
) {
    Card(
        modifier = Modifier
            .padding(16.dp)
            .size(200.dp)
            .clickable { /* 点击事件 */ }
            .combinedClickable(
                onLongClick = onFavorite,  // 长按收藏
                indication = null  // 禁用涟漪
            )
            .shadow(4.dp)
    ) {
        Text(
            text = item,
            modifier = Modifier
                .align(Alignment.Center)
                .padding(12.dp)
        )
    }
}
```

**说明**：  

1. 所有修饰符均基于 **AndroidX Compose Foundation 1.7+** 版本。  
2. 作用域标注（如 `RowScope`）表示仅可用于对应布局的子项。  
3. 实验性 API 需在模块 `build.gradle` 中声明 `android { experimentalComposeUiApi = true }`。  

完整文档请参考 [Android 官方网站](https://developer.android.google.cn/develop/ui/compose/modifiers-list?hl=zh-cn)。
