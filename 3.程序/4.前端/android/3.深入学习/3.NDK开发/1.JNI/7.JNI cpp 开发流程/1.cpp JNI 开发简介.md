# c++ 开发

C++ 开发流程与C 一模一样，但是因为语法的区别，C++中将部分指针类型的数据使用了c++面向对象来处理，定义为对象类型。

## 与c区别

1. c++中使用了类别名，_JNIEnv 是个结构体：
  
    ```c
        struct _JNIEnv
        ...
        #if defined(__cplusplus)
        typedef _JNIEnv JNIEnv;
        typedef _JavaVM JavaVM;
        #else
        typedef const struct JNINativeInterface* JNIEnv;
        typedef const struct JNIInvokeInterface* JavaVM;
        #endif
    ```  

2. c++ 使用 **extern “c”** 标记代码为c类型，或者生成Java类对应的 **头文件** 在头文件中进行c语言类型标记。头文件可以使用 javah (注意jdk10以上，使用javac -h替代)命令生成。[csdn jni-javac生成头文件](https://blog.csdn.net/weixin_42814000/article/details/105279704?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0-105279704-blog-91402429.235^v38^pc_relevant_default_base&spm=1001.2101.3001.4242.1&utm_relevant_index=3)：

    ```java
    错误提示： 警告: 已计划在下一个 JDK 主发行版中删除 javah工具。该工具在 JDK 8 中已由添加到 javac 的’-h’ 选项取代。建议用户改为使用 'javac -h'选项; 有关详细信息, 请查看 javac 帮助页。
    javac: 找不到文件:

    javac生成头文件时出现 “错误: 无源文件” 的解决办法
    在做ndk的jni方法时，首先要新增一个jni的类，这个.java文件在完成后，要build一下。然后就要进行生成jni头文件的操作了。由于在java10以后，javah这个javac的方法被移除，生成jni头文件必须用javac的方法，在我这怎么试都不行，在terminal输入javac，有javac的用法：

    1. javac  <options>  <source files>
    
    看到我需要的< options > 项：“ -h < directory > 指定放置生成的本机标头文件的位置”，也就是要用命令：

    2. javac  –h  <directory>  <source files>
    
    来生成头文件，而我一直以为选项的< directory >就是.java文件的路径，导致每次输入命令都是找不到源文件，没有输入源文件，当然找不到源文件了。
    特别注意，生成头文件的< options >，一定要是 -h 再加上头文件的目标目录（文件夹），
    在本例中表现为 “ < options > ” 等价于 “ –h < directory > ” ！！！
    将路径cd到需要生成头文件的文件夹后，输入命令：

    3. javac  -h  ./  JNI.java
    
    JNI.java 为你要生成头文件的文件

    上面的命令的作用：根据Java中的 native 方法生成对应在 C 中的方法该怎么写（自动生成）

    即可生成头文件。其中，“ -h ./ ”表示头文件生成到当前目录。
    ```  
