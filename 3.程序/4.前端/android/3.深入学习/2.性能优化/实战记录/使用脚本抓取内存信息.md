
# 使用脚本抓取内存信息

以下是使用脚本抓内存信息的示例。同理，可以通过脚本获取各种各样的信息如cpu等等，做到抓取、筛选、输出到文本即可。

```sh
#!/bin/bash

# 指定要监控的进程名
PROCESS1=""
PROCESS2=""

# CSV文件路径
CSV_FILE="memory_usage.csv"

# 清除或创建CSV文件
> "$CSV_FILE"

# 创建CSV文件，并且第一行表头内容写入CSV
echo "Time,${PROCESS1}_PSS,${PROCESS2}_PSS" >> "$CSV_FILE"

# 无限循环，每秒执行一次
while true; do
    # 获取当前时间
    TIME=$(date +%Y-%m-%d\ %H:%M:%S)

    # 使用adb shell dumpsys meminfo获取进程内存信息
    # 注意：这里使用了grep和awk来提取RSS和PSS值，具体字段可能因Android版本而异

    #adb shell dumpsys meminfo 进程名 | grep "TOTAL:" | awk '{print $2}'
    PSS1=$(adb shell dumpsys meminfo $PROCESS1 | grep "TOTAL:" | awk '{print $2}')

    PSS2=$(adb shell dumpsys meminfo $PROCESS2 | grep "TOTAL:" | awk '{print $2}')

    # 将结果写入CSV文件
    echo "$TIME,$PSS1,$PSS2" >> "$CSV_FILE"

    # 等待一秒
    sleep 1
done
```
