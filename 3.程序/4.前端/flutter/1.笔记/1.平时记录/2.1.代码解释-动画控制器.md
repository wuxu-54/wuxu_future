# 动画控制器语句记录

有一处代码这样写的：

![Alt text](../../images/%E9%A1%B9%E7%9B%AE%E8%AE%B0%E5%BD%95_rive%E6%8E%A7%E4%BB%B6%E4%BB%A3%E7%A0%81%E7%96%91%E9%97%AE.png)

我不懂什么意思，搜了下资料，下面大模型给出的解释，总结就是获取Rive动画中名为dance的布尔类型的参数，如果设置为true会触发动画效果。

## 解释

在 Flutter 的 Rive 动画包中，`controller?.findInput<bool>("dance")` 这行代码是用来访问 Rive 动画中定义的一个布尔类型的输入参数。这个输入参数可能与一个状态机相关联，用于控制动画的流程或触发特定的动画效果。

以下是代码的详细解释：

- `controller`: 这通常是一个 `StateMachineController` 类型的变量，它负责管理 Rive 文件中的状态机。

- `?`: 这是 Dart 语言中的空安全操作符，用于在尝试访问 `controller` 之前检查它是否为 `null`。

- `findInput<bool>("dance")`: 这是 `StateMachineController` 的一个方法调用，它尝试找到一个名为 `"dance"` 的布尔输入参数。如果找到，它将返回一个 `bool` 类型的值。

### 示例

假设你有一个 Rive 动画，其中包含一个状态机，该状态机根据 `"dance"` 输入参数的值来决定是否播放跳舞动画。以下是如何在 Flutter 中使用这个输入参数的示例：

```dart
import 'package:flutter/material.dart';
import 'package:rive/rive.dart';

class RiveAnimationWithInput extends StatefulWidget {
  @override
  _RiveAnimationWithInputState createState() => _RiveAnimationWithInputState();
}

class _RiveAnimationWithInputState extends State<RiveAnimationWithInput> {
  // 假设你已经加载了 Rive 文件并获取了状态机控制器
  StateMachineController? controller;

  @override
  void initState() {
    super.initState();
    // 加载 Rive 文件并获取控制器
    // ...
  }

  void startDance() {
    // 检查控制器是否为 null 并设置 "dance" 输入为 true
    controller?.findInput<bool>("dance")?.value = true;
  }

  void stopDance() {
    // 设置 "dance" 输入为 false
    controller?.findInput<bool>("dance")?.value = false;
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Rive Animation with Input'),
      ),
      body: Center(
        child: Rive(
          artboard: /* 加载的 Rive artboard */,
          controller: controller,
        ),
      ),
      floatingActionButton: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          FloatingActionButton(
            onPressed: startDance,
            tooltip: 'Start Dance',
            child: Icon(Icons.play_arrow),
          ),
          SizedBox(height: 16), // Space between buttons
          FloatingActionButton(
            onPressed: stopDance,
            tooltip: 'Stop Dance',
            child: Icon(Icons.stop),
          ),
        ],
      ),
    );
  }
}
```

在这个示例中，我们创建了一个简单的界面，其中包含两个按钮来开始和停止舞蹈动画。通过调用 `startDance` 和 `stopDance` 方法，我们设置状态机控制器的 `"dance"` 输入参数，从而触发 Rive 动画中的相应状态转换。

### 注意事项

- 确保 Rive 文件中存在名为 `"dance"` 的布尔输入参数，并且它与状态机正确关联。
- 在调用 `findInput` 方法时，使用空安全操作符 `?` 来避免在 `controller` 为 `null` 时抛出异常。
- 根据你的 Rive 文件和动画逻辑，你可能需要调整输入参数的名称和类型。

---

## 补充

此问题是我在初学rive控件时遇到的，通过rive的制作我明白了，状态机及数值的意思，也明白了本文这句代码的意思。看下图即可：

![Alt text](../../images/rive%E5%88%B6%E4%BD%9C.png)
