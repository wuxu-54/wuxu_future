# 常用命令

以下是一份详细的 Flutter 常用命令指南，涵盖了环境检查、项目创建与运行、依赖管理、构建发布、设备管理、代码分析与测试等多个方面。

## 环境相关命令

### 1. 检查开发环境

```bash
flutter doctor
```

- **作用**：检查 Flutter 开发环境的配置情况，包括 Flutter SDK、Dart SDK、Android 开发环境（如 Android Studio、Android SDK）、iOS 开发环境（如 Xcode）等是否正确安装和配置。会输出详细的检查结果，若有问题会提示相应的解决方案。
- **示例输出**：

```txt
[✓] Flutter (Channel stable, 3.7.12, on macOS 13.2.1 22D68 darwin-arm64, locale zh-Hans-CN)
[✓] Android toolchain - develop for Android devices (Android SDK version 33.0.2)
[✓] Xcode - develop for iOS and macOS (Xcode 14.2)
[✓] Chrome - develop for the web
[✓] Android Studio (version 2022.1)
[✓] VS Code (version 1.78.2)
[✓] Connected device (2 available)
```

### 2. 查看 Flutter 版本

```bash
flutter --version
```

- **作用**：显示当前安装的 Flutter SDK 和 Dart SDK 的版本信息。
- **示例输出**：

```txt
Flutter 3.7.12 • channel stable • https://github.com/flutter/flutter.git
Framework • revision 4d9e56e694 (3 months ago) • 2023-04-17 21:47:46 -0400
Engine • revision 1a65d409c7
Tools • Dart 2.19.6 • DevTools 2.20.1
```

### 3. 升级 Flutter SDK

```bash
flutter upgrade
```

- **作用**：将 Flutter SDK 及其依赖项升级到最新版本。

## 项目创建与运行命令

### 1. 创建新项目

```bash
flutter create <project_name>
```

- **作用**：创建一个新的 Flutter 项目，`<project_name>` 是项目的名称。会生成项目的基本结构和初始代码文件。
- **示例**：

```bash
flutter create my_flutter_app
```

### 2. 运行项目

```bash
flutter run
```

- **作用**：在连接的设备或模拟器上运行 Flutter 应用程序。如果有多个设备连接，会提示选择要运行的设备。
- **可选参数**：
  - `-d <device_id>`：指定要运行的设备 ID，可通过 `flutter devices` 查看设备 ID。
  - `--release`：以发布模式运行应用，性能会更好。
- **示例**：

```bash
flutter run -d emulator-5554
```

## 依赖管理命令

### 1. 获取依赖

```bash
flutter pub get
```

- **作用**：获取项目 `pubspec.yaml` 文件中指定的所有依赖项。会自动下载并更新项目所需的包。

### 2. 升级依赖

```bash
flutter pub upgrade
```

- **作用**：将项目的依赖项升级到最新版本。会根据 `pubspec.yaml` 文件中的版本约束，尝试更新所有依赖包。

### 3. 检查过时依赖

```bash
flutter pub outdated
```

- **作用**：检查项目中哪些依赖项有可用的更新，会列出当前使用的版本和最新可用的版本。

## 构建与发布命令

### 1. 构建 Android APK

```bash
flutter build apk
```

- **作用**：构建 Android APK 文件，用于在 Android 设备上安装和测试。
- **可选参数**：
  - `--release`：构建发布版 APK，进行代码压缩和优化。
  - `--split-per-abi`：为不同的 CPU 架构分别构建 APK，减小 APK 包的大小。
- **示例**：

```bash
flutter build apk --release --split-per-abi
```

### 2. 构建 Android App Bundle

```bash
flutter build appbundle
```

- **作用**：构建 Android App Bundle 文件，用于发布到 Google Play 商店。App Bundle 可以根据用户设备的具体情况动态下载所需的代码和资源。

### 3. 构建 iOS 应用

```bash
flutter build ios
```

- **作用**：构建 iOS 应用程序包，需要在 macOS 上运行，并且需要安装 Xcode。构建完成后，可以在 Xcode 中进行签名和打包。
- **可选参数**：
  - `--release`：构建发布版 iOS 应用。

### 4. 构建 Web 应用

```bash
flutter build web
```

- **作用**：构建 Web 应用程序，生成静态 HTML、CSS 和 JavaScript 文件。可以将这些文件部署到 Web 服务器上。
- **可选参数**：
  - `--release`：构建发布版 Web 应用，进行代码压缩和优化。

## 设备管理命令

### 1. 列出连接的设备

```bash
flutter devices
```

- **作用**：列出所有连接的设备和模拟器，显示设备的名称、ID、类型等信息。
- **示例输出**：

```txt
2 connected devices:

Pixel 4 API 30 (mobile) • emulator-5554 • android-x86    • Android 11 (API 30) (emulator)
Chrome (web)           • chrome        • web-javascript • Google Chrome 112.0.5615.138
```

### 2. 列出可用的模拟器

```bash
flutter emulators
```

- **作用**：列出所有可用的模拟器，并可以选择启动指定的模拟器。
- **可选参数**：
  - `--launch <emulator_id>`：启动指定 ID 的模拟器。
- **示例**：

```bash
flutter emulators --launch Pixel_4_API_30
```

## 代码分析与测试命令

### 1. 代码静态分析

```bash
flutter analyze
```

- **作用**：对项目代码进行静态分析，检查代码中的错误、警告和风格问题。会输出详细的分析结果，帮助开发者发现潜在的问题。

### 2. 运行单元测试和 widget 测试

```bash
flutter test
```

- **作用**：运行项目中的单元测试和 widget 测试。会执行项目中 `test` 目录下的所有测试文件。
- **可选参数**：
  - `<test_file_path>`：指定要运行的测试文件路径。
- **示例**：

```bash
flutter test test/widget_test.dart
```

## 其他命令

### 1. 切换 Flutter 开发渠道

```bash
flutter channel <channel_name>
```

- **作用**：用于切换 Flutter SDK 的开发渠道，Flutter 有多个渠道，如 `stable`（稳定版）、`beta`（测试版）、`dev`（开发版）等。
- **示例**：

```bash
flutter channel beta
```

### 2. 发布 Flutter 包

```bash
flutter packages pub publish
```

- **作用**：将 Flutter 包发布到 `pub.dev` 上。在发布之前，需要确保项目的 `pubspec.yaml` 文件配置正确，并且已经登录到 `pub.dev`。

以上就是 Flutter 开发中常用的命令，掌握这些命令可以提高开发效率。

---

以下是 Flutter 常用命令的总结，涵盖开发、调试、构建和环境配置等场景，结合多个来源整理并分类说明：

---

### 一、**环境配置与诊断**

1. **检查环境状态**  
   - `flutter doctor`：检查 Flutter 环境依赖（如 Android SDK、Xcode 等）是否安装完整。  
   - `flutter doctor -v`：显示详细信息，帮助定位未配置项。

2. **镜像配置（针对国内用户）**  
   - 在终端配置文件（如 `~/.bash_profile`）中添加镜像地址：  

     ```bash
     export PUB_HOSTED_URL=https://pub.flutter-io.cn
     export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn
     ```  

     避免升级或下载依赖时失败。

3. **SDK 管理**  
   - `flutter upgrade`：升级 Flutter SDK 及项目依赖包。  
   - `flutter channel`：查看所有分支（如 stable、dev、master）。  
   - `flutter channel stable`：切换到稳定分支。

---

### 二、**项目与依赖管理**

1. **创建项目**  
   - `flutter create project_name`：新建 Flutter 项目。  
   - `flutter create -t module scaffold_flutter_demo`：创建模块化项目。

2. **依赖操作**  
   - `flutter pub get` 或 `flutter packages get`：安装 `pubspec.yaml` 中的依赖。  
   - `flutter pub upgrade`：更新依赖到最新版本。  
   - `flutter pub cache repair`：修复损坏的包缓存。

3. **代码生成与序列化**  
   - `flutter packages pub run build_runner watch`：自动生成代码（如 JSON 序列化）。  
   - `flutter packages pub run build_runner build --delete-conflicting-outputs`：强制生成并删除冲突文件。

---

### 三、**运行与调试**

1. **设备管理**  
   - `flutter devices`：列出所有连接的设备（真机或模拟器）。  
   - `flutter emulators --launch Pixel_2_API_29`：启动指定模拟器。

2. **运行应用**  
   - `flutter run`：以 Debug 模式运行应用。  
   - `flutter run --release`：以 Release 模式运行。  
   - 热重载：在运行过程中输入 `R`（大写）或点击 IDE 的热重载按钮。

3. **日志与截图**  
   - `flutter logs`：查看运行中的应用日志。  
   - `flutter screenshot`：从连接的设备截取屏幕。

---

### 四、**构建与发布**

1. **构建应用包**  
   - **Android**  
     - `flutter build apk`：默认打包 APK。  
     - `flutter build apk --target-platform android-arm64`：指定 64 位架构。  
   - **iOS**  
     - `flutter build ios`：生成 iOS 应用。  
     - `flutter build ios --release --no-codesign`：跳过签名（仅测试用）。

2. **发布包到 Pub**  
   - `flutter pub publish --dry-run`：验证包配置。  
   - `flutter pub publish`：正式发布。

---

### 五、**代码分析与维护**

1. **代码检查**  
   - `flutter analyze`：静态分析代码错误或警告。  
   - `flutter format lib/`：格式化指定目录的 Dart 文件。

2. **清理与重置**  
   - `flutter clean`：删除 `build/` 和 `.dart_tool/` 目录。  
   - `flutter precache`：预下载缺失的二进制文件。

---

### 六、**高级功能**

1. **开启多平台支持**  
   - `flutter config --enable-web`：启用 Web 支持。  
   - `flutter config --enable-macos-desktop`：启用 macOS 桌面端。

2. **性能分析**  
   - `flutter run --profile`：性能分析模式运行。  
   - `flutter drive`：运行集成测试。

---

### 总结

以上命令覆盖了 Flutter 开发的核心流程。如需完整列表，可通过 `flutter --help` 查看所有命令，或参考来源：[CSDN](https://blog.csdn.net/u012170937/article/details/114681021)、[腾讯云社区](https://cloud.tencent.com/developer/article/1936745) 等。
