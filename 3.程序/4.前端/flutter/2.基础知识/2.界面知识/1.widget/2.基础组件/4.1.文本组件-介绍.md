# 文本组件介绍（仅常用的）

在 Flutter 中，与文本相关的 Widget 非常丰富，涵盖了文本显示、输入、样式化、交互等多种场景。以下是常用的文本相关 Widget 及其详细说明：

---

## 一、**基础文本显示**

### 1. **`Text`**

最基础的文本组件，用于显示单一样式的文本。

- **关键属性**：
  - `style`：通过 `TextStyle` 设置字体、颜色、大小、装饰等。
  - `textAlign`：文本对齐方式（左、右、居中、两端对齐等）。
  - `maxLines` 和 `overflow`：控制文本行数和溢出处理（如省略号 `TextOverflow.ellipsis`）。
- **示例**：

  ```dart
  Text(
    'Hello Flutter',
    style: TextStyle(fontSize: 20, color: Colors.blue),
    textAlign: TextAlign.center,
    maxLines: 2,
    overflow: TextOverflow.ellipsis,
  )
  ```

### 2. **`RichText`**

支持多样式混合的富文本组件，通过 `TextSpan` 组合不同样式的文本片段。

- **关键属性**：
  - `text`：一个 `TextSpan` 对象，可嵌套多个 `TextSpan`。
- **示例**：

  ```dart
  RichText(
    text: TextSpan(
      text: 'Hello ',
      style: TextStyle(color: Colors.black),
      children: [
        TextSpan(
          text: 'Flutter',
          style: TextStyle(color: Colors.blue, fontWeight: FontWeight.bold),
        ),
        TextSpan(text: '!'),
      ],
    ),
  )
  ```

### 3. **`DefaultTextStyle`**

为子组件设置默认的文本样式，继承给子树中的 `Text` 组件。

- **示例**：

  ```dart
  DefaultTextStyle(
    style: TextStyle(fontSize: 18, color: Colors.grey),
    child: Column(
      children: [
        Text('This text uses the default style'),
        Text('Another text with default style'),
      ],
    ),
  )
  ```

---

## 二、**可交互文本**

### 1. **`SelectableText`**

允许用户选择和复制文本（类似原生文本选择）。

- **关键属性**：
  - `text`：显示的文本内容。
  - `toolbarOptions`：控制选择菜单的选项（如复制、全选）。
- **示例**：

  ```dart
  SelectableText(
    'This text can be selected and copied.',
    style: TextStyle(fontSize: 16),
    toolbarOptions: ToolbarOptions(copy: true, selectAll: true),
  )
  ```

### 2. **`EditableText`**

底层的可编辑文本组件，通常用于实现自定义的输入框（如 `TextField` 的内部实现）。

- **关键属性**：
  - `controller`：`TextEditingController` 控制文本内容。
  - `focusNode`：管理输入焦点。
  - `style` 和 `cursorColor`：设置文本样式和光标颜色。
- **示例**：

  ```dart
  EditableText(
    controller: TextEditingController(),
    focusNode: FocusNode(),
    style: TextStyle(fontSize: 16),
    cursorColor: Colors.blue,
  )
  ```

---

## 三、**文本输入**

### 1. **`TextField`**

最常用的文本输入组件，支持单行或多行输入。

- **关键属性**：
  - `controller`：`TextEditingController` 管理输入内容。
  - `decoration`：通过 `InputDecoration` 设置输入框的标签、边框、提示文本等。
  - `keyboardType`：指定键盘类型（如数字键盘、邮箱键盘）。
  - `onChanged`：监听输入内容变化。
- **示例**：

  ```dart
  TextField(
    controller: TextEditingController(),
    decoration: InputDecoration(
      labelText: 'Username',
      hintText: 'Enter your name',
      border: OutlineInputBorder(),
    ),
    keyboardType: TextInputType.text,
    onChanged: (value) => print(value),
  )
  ```

### 2. **`TextFormField`**

继承自 `TextField`，专为表单设计，支持验证和错误提示。

- **关键属性**：
  - `validator`：验证函数，返回错误提示字符串。
  - `autovalidateMode`：自动验证模式（如 `AutovalidateMode.onUserInteraction`）。
- **示例**：

  ```dart
  TextFormField(
    controller: TextEditingController(),
    decoration: InputDecoration(labelText: 'Email'),
    validator: (value) {
      if (value!.isEmpty) return 'Email is required';
      if (!value.contains('@')) return 'Invalid email';
      return null;
    },
  )
  ```

---

## 四、**高级文本处理**

### 1. **`AnimatedDefaultTextStyle`**

动态切换文本样式的动画组件。

- **示例**：

  ```dart
  AnimatedDefaultTextStyle(
    duration: Duration(milliseconds: 300),
    style: isBold 
        ? TextStyle(fontSize: 20, fontWeight: FontWeight.bold)
        : TextStyle(fontSize: 16),
    child: Text('Animated Text'),
  )
  ```

### 2. **`Tooltip`**

显示提示文本（悬浮或长按时）。

- **示例**：

  ```dart
  Tooltip(
    message: 'This is a tooltip',
    child: IconButton(icon: Icon(Icons.info), onPressed: () {}),
  )
  ```

### 3. **`TextButton`, `ElevatedButton`, `OutlinedButton`**

按钮组件，支持在按钮上显示文本。

- **示例**：

  ```dart
  ElevatedButton(
    onPressed: () {},
    child: Text('Click Me'),
  )
  ```

---

## 五、**国际化与多语言**

### 1. **`Localizations`**

结合 `MaterialApp` 和 `Localizations` 实现多语言支持。

- **示例**：

  ```dart
  MaterialApp(
    localizationsDelegates: [
      GlobalMaterialLocalizations.delegate,
      GlobalWidgetsLocalizations.delegate,
    ],
    supportedLocales: [Locale('en'), Locale('zh')],
  )
  ```

---

## 六、**第三方库**

### 1. **`auto_size_text`**

自动调整字体大小以适应容器尺寸。

- **示例**：

  ```dart
  AutoSizeText(
    'This text will shrink if the container is too small',
    style: TextStyle(fontSize: 20),
    maxLines: 2,
  )
  ```

### 2. **`flutter_markdown`**

渲染 Markdown 格式文本。

- **示例**：

  ```dart
  MarkdownBody(data: '# Heading\n- List item')
  ```

---

## 七、**注意事项**

1. **性能优化**：
   - 避免频繁重建 `TextStyle` 对象，尽量复用。
   - 长文本使用 `ListView` 或 `SingleChildScrollView` 包裹，避免溢出。
2. **输入验证**：
   - 使用 `TextFormField` 结合 `Form` 组件实现表单验证。
3. **无障碍支持**：
   - 为文本添加 `semanticsLabel`，提升无障碍体验。

---

## 八、**总结**

- **显示静态文本**：`Text`、`RichText`、`DefaultTextStyle`。
- **用户输入**：`TextField`、`TextFormField`、`EditableText`。
- **交互与选择**：`SelectableText`、`Tooltip`。
- **动态样式**：`AnimatedDefaultTextStyle`。
- **国际化**：`Localizations`。

根据具体需求选择合适的 Widget，可以高效实现复杂的文本交互和样式化需求。
