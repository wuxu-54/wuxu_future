# 滑动页面视图

在Flutter中，`PageView`和`PageController`通常一起使用来创建一个可以滑动的页面视图，类似于一个相册或者滑动的标签页。

## PageView

`PageView`是一个可以水平或垂直滑动的Widget，它允许你展示一系列的页面，并且每次滑动只展示一个页面。`PageView`可以设置为可无限滚动，也可以设置为有限的页面集合。

- **children**：一个Widget列表，表示要展示的页面。
- **scrollDirection**：滑动的方向，默认是水平（`Axis.horizontal`）。
- **controller**：一个`PageController`，用于控制页面的滑动。

## PageController

`PageController`是一个用于控制`PageView`的Widget的控制器。

- **initialPage**：初始化时显示的页面索引，默认为0。
- **viewportFraction**：视口内显示的页面比例，默认为1.0（整个页面）。
- **onPageChanged**：页面改变时的回调函数。

## 配合使用

1. **创建`PageController`**：
   创建一个`PageController`实例，可以指定初始页面和其他参数。

   ```dart
   PageController pageController = PageController(initialPage: 0);
   ```

2. **使用`PageView`展示页面**：
   将`PageController`实例传递给`PageView`的`controller`属性。

   ```dart
   PageView(
     controller: pageController,
     children: [
       // 定义页面内容
     ],
   );
   ```

3. **控制页面滑动**：
   使用`PageController`的`animateToPage`方法来控制滑动到特定页面。

   ```dart
   pageController.animateToPage(1, duration: Duration(seconds: 1), curve: Curves.easeIn);
   ```

4. **监听页面变化**：
   使用`PageController`的`addListener`方法来监听页面变化。

   ```dart
   pageController.addListener(() {
     print('Current page: ${pageController.page}');
   });
   ```

5. **处理控制器销毁**：
   当`PageController`不再使用时，调用`dispose`方法来释放资源。

   ```dart
   @override
   void dispose() {
     pageController.dispose();
     super.dispose();
   }
   ```

## 示例

以下是一个简单的示例，演示了如何使用`PageView`和`PageController`：

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatefulWidget {
  @override
  _MyAppState createState() => _MyAppState();
}

class _MyAppState extends State<MyApp> {
  PageController _pageController;

  @override
  void initState() {
    super.initState();
    _pageController = PageController();
  }

  @override
  void dispose() {
    _pageController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: Scaffold(
        body: PageView(
          controller: _pageController,
          children: [
            Center(child: Text('Page 1')),
            Center(child: Text('Page 2')),
            Center(child: Text('Page 3')),
          ],
        ),
      ),
    );
  }
}
```

在这个示例中，我们创建了一个包含三个页面的`PageView`。使用`PageController`来控制页面的滑动和监听页面变化。通过这种方式，你可以在Flutter应用中实现复杂的页面滑动逻辑。
