# 滚动

CustomScrollView 是 Flutter 中一个功能强大的可滚动组件，它允许开发者以非常灵活的方式创建复杂的滚动布局。CustomScrollView 本身不提供滚动行为，而是通过其 `slivers` 属性来控制滚动视图中的各个部分（称为 "slivers"）。每个 Sliver 都是滚动视图的一部分，可以是列表、网格、固定头部、弹性效果等。

以下是 CustomScrollView 的一些关键特性和用法：

## 1. 使用 Slivers

CustomScrollView 使用 `Sliver` 组件来构建其内容。`Slivers` 可以看作是可滚动视图的基本构件。

示例：

```dart
CustomScrollView(
  slivers: [
    SliverAppBar(
      title: Text('App Bar'),
    ),
    SliverList(
      delegate: SliverChildBuilderDelegate(
        (BuildContext context, int index) {
          return ListTile(title: Text('Item $index'));
        },
      ),
    ),
    // 可以添加更多的 Sliver 组件
  ],
)
```

## 2. 控制滚动行为

CustomScrollView 通过 `physics` 属性来控制滚动行为，`pyhsics`接收`ScrollPhysics`及其子类，可以指定弹性滚动、惯性滚动等。

```dart
CustomScrollView(
  physics: BouncingScrollPhysics(),
  // ...
)
```

## 3. 控制滚动方向

通过 `scrollDirection` 属性，可以控制滚动视图是垂直滚动还是水平滚动。

```dart
CustomScrollView(
  scrollDirection: Axis.horizontal,
  // ...
)
```

## 4. 添加普通 Widget

如果需要在 CustomScrollView 中包含非滚动的普通 Widget，可以使用 `SliverToBoxAdapter` 包裹，这样普通widget也可以滚动。

```dart
CustomScrollView(
  slivers: [
    SliverToBoxAdapter(
      child: Container(
        height: 100,
        color: Colors.yellow,
        child: Center(child: Text('Header')),
      ),
    ),
    // 其他 Sliver 组件...
  ],
)
```

## 5. SliverPersistentHeader

创建一个悬浮的头部小部件，即使在滚动时也会保持可见。

```dart
CustomScrollView(
  slivers: [
    SliverPersistentHeader(
      delegate: _MyDelegate("Persistent Header", Colors.blue),
      pinned: true,
    ),
    // 其他 Sliver 组件...
  ],
)
```

## 6. SliverFillRemaining

确保某个 Widget 占满剩余空间，常用于确保内容填满屏幕。

```dart
CustomScrollView(
  slivers: [
    // ... 其他 Sliver 组件
    SliverFillRemaining(
      hasScrollBody: true,
      child: Container(
        color: Colors.green,
        child: Center(child: Text('Fill Remaining Space')),
      ),
    ),
  ],
)
```

## 7. 动态添加和移除 Slivers

CustomScrollView 允许动态地添加和移除 Slivers，这可以通过修改 slivers 列表来实现。

## 8. 使用控制器

CustomScrollView 可以与 `ScrollController` 配合使用，以控制滚动位置和监听滚动事件。

```dart
ScrollController _scrollController = ScrollController();

CustomScrollView(
  controller: _scrollController,
  // ...
)
```

CustomScrollView 提供了高度的灵活性和强大的功能，使得开发者可以创建出各种复杂的滚动效果。通过组合不同的 Sliver 组件，可以实现从简单到复杂的各种滚动布局。
