# widget是啥

在Flutter中，widget是构成用户界面的基本构建块。Flutter的设计理念是“一切都是widget”，这意味着从简单的文本到复杂的布局，所有的UI元素都是通过widget来实现的。

## Widget的分类

Flutter中的widget主要分为两大类：

* 无状态的Widget（`StatelessWidget`）：这种widget没有状态，一旦被创建，它的属性就不能改变。它们是功能单一、简单直观的widget。

* 有状态的Widget（`StatefulWidget`）：与无状态widget相对，有状态widget可以在widget生命周期内保持状态，响应用户交互，或者在widget树中传递数据。

## Widget的作用

* 构建UI：widget用于在屏幕上构建和布局UI元素。
* 响应用户交互：widget可以监听和响应用户的交互，如点击、滑动等。
* 状态管理：有状态widget可以管理状态，例如表单输入、标记选中项等。
* 组合：widget可以通过组合来创建复杂的UI，每个widget可以包含多个子widget。

## Widget的生命周期

无论是有状态还是无状态的widget，它们都遵循相同的生命周期：

* 创建：widget被创建并添加到widget树中。
* 构建：widget通过build方法构建自己的UI。
* 更新：当widget的属性发生变化时，widget会重新构建。
* 销毁：当widget不再需要时，它会从widget树中移除并销毁。

## StatelessWidget和StatefulWidget

`StatelessWidget`：适用于不涉及状态的widget，例如显示文本或图片。它们是轻量级的，因为不需要管理状态。

`StatefulWidget`：当widget需要管理状态时使用。StatefulWidget拥有一个`State`对象，用于存储widget的状态，并在状态变化时更新UI。

### StatelessWidget示例

```dart
import 'package:flutter/material.dart';

class MyTextWidget extends StatelessWidget {
  final String text;

  MyTextWidget({required this.text});

  @override
  Widget build(BuildContext context) {
    return Text(text);
  }
}
```

在这个示例中，MyTextWidget是一个无状态widget，它接收一个字符串text作为属性，并在UI中显示这段文本。

### StatefulWidget示例

```dart
import 'package:flutter/material.dart';

class MyButtonWidget extends StatefulWidget {
  @override
  _MyButtonWidgetState createState() => _MyButtonWidgetState();
}

class _MyButtonWidgetState extends State<MyButtonWidget> {
  int _counter = 0;

  void _incrementCounter() {
    setState(() {//通过此方法，修改变量，更新UI
      _counter++;
    });
  }

  @override
  Widget build(BuildContext context) {
    return ElevatedButton(
      onPressed: _incrementCounter,
      child: Text('Counter: $_counter'),
    );
  }
}
```

在这个示例中，MyButtonWidget是一个有状态widget，它显示了一个计数器。每次用户点击按钮时，_incrementCounter方法会被调用，_counter变量会增加，并且widget会通过调用setState来重建UI。

## Widget的组合

Widget可以通过嵌套和组合来创建复杂的布局：

```dart
import 'package:flutter/material.dart';

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: Scaffold(
        appBar: AppBar(
          title: Text('My App'),
        ),
        body: MyButtonWidget(), // 使用有状态widget
      ),
    );
  }
}
```

在这个示例中，MyApp是一个无状态widget，它创建了一个MaterialApp，并在`Scaffold`的body中嵌入了一个MyButtonWidget有状态widget。

Flutter的widget系统非常灵活，通过组合不同的widget，你可以构建出丰富、响应式的用户界面。
