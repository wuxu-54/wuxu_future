# 自定义属性

在 HTML 中，自定义属性是指开发者根据自身需求在 HTML 元素上添加的非标准属性。下面将对 HTML 自定义属性进行详细介绍。

## 传统自定义属性（不推荐）

在早期，开发者可能会直接在 HTML 元素上添加非标准的属性来存储额外信息。

### 传统自定义属性示例代码

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Traditional Custom Attribute</title>
</head>

<body>
    <div mycustomattribute="some value">This is a div with a custom attribute.</div>
    <script>
        const div = document.querySelector('div');
        const value = div.getAttribute('mycustomattribute');
        console.log(value); 
    </script>
</body>

</html>
```

### 问题与缺点

- **不符合标准**：这些自定义属性不符合 HTML 标准，可能会导致代码在未来的 HTML 版本中出现兼容性问题。
- **无障碍性和工具支持不佳**：屏幕阅读器等辅助设备和一些开发工具可能无法正确识别和处理这些非标准属性。

---

## `data-*` 自定义属性（推荐）

为了解决传统自定义属性的问题，HTML5 引入了 `data-*` 属性。

### 语法规则

- 属性名必须以 `data-` 开头，后面可以跟字母、数字、连字符（`-`）、点（`.`）、冒号（`:`）和下划线（`_`），但不能以数字开头。
- 属性值可以是任意有效的字符串。

### 示例代码

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Data-* Custom Attribute</title>
</head>

<body>
    <div data-user-name="John" data-user-age="30">This div has data-* attributes.</div>
    <script>
        const div = document.querySelector('div');
        // 使用 dataset 获取属性值
        const name = div.dataset.userName;
        const age = div.dataset.userAge;
        console.log(`Name: ${name}, Age: ${age}`);

        // 修改属性值
        div.dataset.userAge = '31';
        console.log(`New Age: ${div.dataset.userAge}`);
    </script>
</body>

</html>
```

### 优点

- **符合标准**：`data-*` 属性是 HTML5 标准的一部分，具有良好的兼容性。
- **易于访问和操作**：可以通过元素的 `dataset` 属性方便地访问和修改这些属性的值。
- **语义清晰**：属性名以 `data-` 开头，能明确表明这是自定义的数据属性。

## 使用 JavaScript 动态添加自定义属性

除了在 HTML 中直接定义自定义属性，还可以使用 JavaScript 动态地为元素添加自定义属性。

### 自定义属性示例代码

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Dynamic Custom Attribute</title>
</head>

<body>
    <button id="myButton">Click me</button>
    <script>
        const button = document.getElementById('myButton');
        // 添加 data-* 属性
        button.dataset.clickCount = 0;

        button.addEventListener('click', function () {
            let count = parseInt(this.dataset.clickCount);
            count++;
            this.dataset.clickCount = count;
            console.log(`Button clicked ${count} times.`);
        });
    </script>
</body>

</html>
```

---

## 注意事项

- **数据类型**：自定义属性存储的值始终是字符串类型。如果需要使用其他数据类型（如数字、布尔值），需要进行相应的类型转换。
- **性能考虑**：虽然 `data-*` 属性很方便，但过多使用可能会增加 HTML 文档的大小，影响页面加载性能。因此，应合理使用自定义属性。
- **命名规范**：使用 `data-*` 属性时，要确保属性名具有清晰的语义，方便代码的维护和理解。
