# Suspense

在Vue 3中，`Suspense`组件是一个内置的组件，用于处理异步组件的加载状态。它允许开发者定义一个后备内容（fallback content），这个内容会在异步组件的依赖项被加载和准备就绪之前显示给用户。一旦异步组件的依赖项加载完成，Suspense会将后备内容替换为正常的组件内容。
>通俗讲，给一个占位ui，数据返回后展示正常ui，如果有error则展示错误ui； 后备内容：占位ui

## 基本用法

使用`Suspense`时，你需要提供一个`default插槽`，用于放置异步组件，以及一个`fallback插槽`，用于定义加载时显示的内容。

```html
<template>
  <Suspense>
    <template #default>
      <!-- 异步组件 -->
      <AsyncComponent />
    </template>
    <template #fallback>
      <!-- 后备内容 -->
      <p>Loading...</p>
    </template>
  </Suspense>
</template>
```

在这个例子中，当`AsyncComponent`正在加载时，用户会看到`<p>Loading...</p>`。一旦`AsyncComponent`加载完成并准备好，`Suspense`会替换掉后备内容，显示异步组件。

## 与defineAsyncComponent一起使用

Vue 3提供了`defineAsyncComponent`函数，用于定义异步组件。这个函数返回一个**工厂函数**，该函数返回一个`Promise`，这个`Promise`在异步组件的模板编译完成后解决。

```js
import { defineAsyncComponent } from 'vue';

const AsyncComponent = defineAsyncComponent(() =>
  import('./AsyncComponent.vue')
);

export default {
  components: {
    AsyncComponent
  }
};
```

## 错误处理

`Suspense`组件还可以捕获异步组件加载过程中的错误。如果异步组件的`Promise`被拒绝，你可以提供一个`error插槽`来显示错误内容。

```html
<template>
  <Suspense>
    <template #default>
      <AsyncComponent />
    </template>
    <template #fallback>
      <p>Loading...</p>
    </template>
    <template #error>
      <p>Error loading component.</p>
    </template>
  </Suspense>
</template>
```

在这个例子中，如果`AsyncComponent`加载失败，用户会看到`<p>Error loading component.</p>`。

## 总结

Suspense组件是Vue 3中处理异步组件加载状态的强大工具。通过定义后备内容和错误内容，你可以提供更好的用户体验，确保在异步加载过程中，用户始终能看到有意义的反馈。这使得异步组件的使用变得更加灵活和友好。
