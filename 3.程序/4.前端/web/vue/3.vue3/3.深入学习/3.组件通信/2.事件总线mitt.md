# 事件总线库-`mitt`

在Vue 3中，由于官方不再推荐使用Vue 2中的全局事件总线（EventBus），因此开发者需要寻找替代方案来实现跨组件的通信。Mitt是一个轻量级的事件库，它可以作为Vue 3中的事件总用来使用1245。

## Mitt的安装

要在你的Vue 3项目中使用Mitt，首先需要通过npm或yarn安装Mitt库。

```shell
npm install mitt --save
# 或者
yarn add mitt
```

---

## 创建和使用Mitt实例

安装完成后，你可以在你的项目中创建一个Mitt实例，并在需要通信的组件之间共享这个实例。

```js
// src/utils/bus.js
import mitt from 'mitt';
const emitter = mitt();
export default emitter;
```

## 发布和订阅事件

Mitt提供了on、off和emit三个主要的API来处理事件的订阅、取消订阅和发布。

### 发布事件

```js
// 在一个组件中发布事件
import emitter from '@/utils/bus';

emitter.emit('event-name', { data: 'event payload' });
```

### 订阅事件

```js
// 在另一个组件中订阅事件
import emitter from '@/utils/bus';

emitter.on('event-name', (payload) => {
  console.log('Received event payload:', payload);
});
```

监听所有事件

```js
// 监听所有事件
emitter.on('*', (eventName, payload) => {
  console.log('Event caught:', eventName, payload);
});
```

### 取消订阅事件

```js
// 取消订阅特定事件
emitter.off('event-name', handlerFunction);
```

---

## Mitt的优势

**API简洁易用：**Mitt提供了简单直观的API，使得事件的发布和订阅变得容易。
**无需依赖Vue实例：**Mitt是一个独立的事件总线库，不依赖于Vue实例，可以在任何地方使用。
**更好的模块化支持：**Mitt适用于模块化开发环境，可以与其他框架或库结合使用。
**性能优异：**Mitt在性能方面表现出色，使用了快速且高效的内存管理技巧。

## 注意事项

* 确保在需要通信的组件中都引入了Mitt实例，以便实现正确的事件发布和订阅1。
* 在组件卸载或不再需要监听事件时，应该取消订阅，防止内存泄漏2。
* 尽量避免过度使用事件总线，以免导致代码复杂性增加。对于复杂的通信需求，可以考虑使用Pinia或其他状态管理库2。

通过以上介绍，可以看出Mitt是Vue 3中处理跨组件通信的一个有效解决方案。它的简单性和性能优势使其成为Vue 3项目中的一个受欢迎的选择
