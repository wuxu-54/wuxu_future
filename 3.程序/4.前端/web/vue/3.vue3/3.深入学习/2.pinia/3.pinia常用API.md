# pinia 常用API

Pinia 提供了一系列 API，使得状态管理在 Vue 应用程序中变得更加简单和直观。以下是 Pinia 的一些核心 API：

1. **createPinia**：创建一个新的 Pinia 实例。通常在应用程序的入口点调用一次。

    ```js
    import { createPinia } from 'pinia';
    const pinia = createPinia();
    ```

2. **defineStore**：定义一个新的 Store。它接受一个唯一的名字（ID）和一个选项对象或设置函数。

    ```js
    import { defineStore } from 'pinia';

    export const useCounterStore = defineStore('counter', {
    state: () => ({
        count: 0
    }),
    actions: {
        increment() {
        this.count++;
        }
    }
    });
    ```

3. **useStore**：用于在组件中访问 Store。它需要一个 Store 的名字或返回的函数。

    ```js
    import { useStore } from 'pinia';

    const store = useStore(useCounterStore);
    ```

4. **storeToRefs**：将 Store 转换为响应式引用，使得在模板或其他非响应式上下文中使用时保持响应性。

    ```js
    import { storeToRefs } from 'pinia';

    const { count, increment } = storeToRefs(counterStore);
    ```

5. **mapActions**：创建一个对象，包含 Store 中的 action，可以直接在组件的方法中调用。

    ```js
    import { mapActions } from 'pinia';

    export default {
    methods: {
        ...mapActions(useCounterStore, ['increment'])
    }
    };
    ```

6. **mapGetters**：创建一个对象，包含 Store 中的 getter，可以直接在组件的计算属性中使用。

    ```js
    import { mapGetters } from 'pinia';

    export default {
    computed: {
        ...mapGetters(useCounterStore, ['count'])
    }
    };
    ```

7. **mapState**：创建一个对象，包含 Store 中的 state 和 getter，可以直接在组件的计算属性中使用。

    ```js
    import { mapState } from 'pinia';

    export default {
    computed: {
        ...mapState(useCounterStore, {
        count: state => state.count,
        doubleCount: state => state.count * 2
        })
    }
    };
    ```

8. **usePinia**：在 Vue 3 的 `<script setup>` 中使用 Pinia，它提供了一个 Pinia 实例和访问 Stores 的方法。

    ```js
    import { usePinia } from 'pinia';

    const { useCounterStore } = usePinia();
    ```

9. **PiniaPlugin**：用于 Vue 2 的插件，使得 Pinia 能够在 Vue 2 应用程序中工作。

    ```js
    import Vue from 'vue';
    import { PiniaPlugin } from 'pinia';
    Vue.use(PiniaPlugin);
    ```

10. **getActivePinia**：获取当前活跃的 Pinia 实例。

    ```js
    import { setActivePinia, getActivePinia } from 'pinia';

    // 设置活跃的 Pinia 实例
    setActivePinia(pinia);

    // 获取活跃的 Pinia 实例
    const activePinia = getActivePinia();
    ```
