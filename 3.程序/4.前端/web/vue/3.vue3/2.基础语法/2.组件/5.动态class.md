# 动态class

在Vue 3中，动态设置类名的方式与Vue 2相似，但有一些细微的差别。以下是Vue 3中动态设置类名的几种方法：

1. 对象语法：与Vue 2相同，使用JavaScript对象来动态设置类名。

    ```vue
    <template>
    <div :class="{ active: isActive, 'text-danger': hasError }"></div>
    </template>

    <script setup>
    import { ref } from 'vue';
    const isActive = ref(true);
    const hasError = ref(false);
    </script>
    ```

2. 数组语法：与Vue 2相同，使用数组来列出多个类名。

    ```vue
    <template>
    <div :class="[activeClass, errorClass]"></div>
    </template>

    <script setup>
    import { computed, ref } from 'vue';
    const isActive = ref(true);
    const hasError = ref(false);

    const activeClass = computed(() => (isActive.value ? 'active' : ''));
    const errorClass = computed(() => (hasError.value ? 'text-danger' : ''));
    </script>
    ```

3. 计算属性：使用计算属性来返回一个类名的字符串。

    ```vue
    <template>
    <div :class="computedClass"></div>
    </template>

    <script setup>
    import { computed, ref } from 'vue';
    const isActive = ref(true);
    const hasError = ref(false);

    const computedClass = computed(() => ({
    active: isActive.value,
    'text-danger': hasError.value
    }));
    </script>
    ```

4. 内联表达式：直接在模板中使用三元运算符或其他表达式来动态设置类名。

    ```vue
    <template>
    <div :class="isActive ? 'active' : ''"></div>
    </template>

    <script setup>
    import { ref } from 'vue';
    const isActive = ref(true);
    </script>
    ```

5. vnode 类型：Vue 3中引入了新的VNode类型，可以在模板中使用vnode的class属性来动态设置类名。

    ```vue
    <template>
    <div v-for="item in items" :key="item.id" :class="item.isActive ? 'active' : ''"></div>
    </template>

    <script setup>
    import { ref } from 'vue';
    const items = ref([
    { id: 1, isActive: true },
    { id: 2, isActive: false },
    // 更多项...
    ]);
    </script>
    ```

6. 使用函数：在某些情况下，你可能需要根据某些条件来动态生成类名，这时可以使用函数来返回类名。

    ```vue
    <template>
    <div :class="getClass(isActive, hasError)"></div>
    </template>

    <script setup>
    import { ref, computed } from 'vue';
    const isActive = ref(true);
    const hasError = ref(false);

    function getClass(isActive, hasError) {
    return {
        active: isActive.value,
        'text-danger': hasError.value
    };
    }
    </script>
    ```

在Vue 3中，`<script setup>`是一个新的语法特性，它允许你以更简洁的方式编写组件逻辑。如果你使用的是`<script setup>`，则不需要在`export default`中定义组件，可以直接使用`ref`、`reactive`、`computed`等响应式API。

请注意，Vue 3的响应式系统也有所不同，它使用了Proxy代替了Vue 2中的Object.defineProperty。这意味着在Vue 3中，响应式变量的使用方式可能略有不同，但动态设置类名的基本方法仍然相似。
