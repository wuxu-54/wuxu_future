# 组件props

在Vue 3中，`props` 的概念和用法与Vue 2类似，但是有一些更新和改进。`props` 仍然是组件之间传递数据的一种方式，但在Vue 3中，它们可以与Composition API一起使用，从而提供更灵活的代码组织方式。

## 定义 Props

在Vue 3中，你可以在组件的script标签中定义props，就像在Vue 2中一样。此外，你还可以使用defineProps函数来定义props，这在编写较大的组件或与Composition API一起使用时特别有用。

### 使用 defineProps

defineProps可以不引入，vue中**difine**打头的函数宏函数默认全局使用

```javascript
import { defineProps } from 'vue';

const MyComponent = {
  props: ['myStringProp', 'myNumberProp'],
  setup(props) {
    // 使用props
    console.log(props.myStringProp, props.myNumberProp);
  }
};
```

setup语法糖方式

```html
<script setup>
const props = defineProps(['myStringProp','myNumberProp'])
console.log(props.foo)
</script>
```

### 使用 script 标签

```javascript
export default {
  props: ['myStringProp', 'myNumberProp'],
  setup(props) {
    // 使用props
    console.log(props.myStringProp, props.myNumberProp);
  }
};
```

### Props 类型和验证

Vue 3 引入了对 props 的类型检查和验证，这有助于在开发过程中捕获潜在的错误。你可以为 props 指定类型，Vue 将会在开发模式下对传递给组件的 props 值进行验证。

```javascript
import {defineProps,withDefaults} from 'vue'

export default {
  props: {
    myStringProp: String,
    myNumberProp: {
      type: Number,
      default: 100
    },
    myBooleanProp: Boolean
  },
  setup(props) {
    // 使用props
  }
};
```

搭配 TypeScript 使用 `<script setup>`，也可以使用类型标注来声明 props：

```html
<script setup lang="ts">
defineProps<{
  title?: string
  likes?: number
}>()
</script>
```

### Props 的默认值

你可以为 props 提供默认值，这样即使父组件没有提供相应的 prop，组件也能正常工作。在Vue 3中，你可以使用对象语法为 props 设置默认值。

```javascript
export default {
  props: {
    myStringProp: {
      type: String,
      default: 'Default String'
    },
    myNumberProp: {
      type: Number,
      default: 0
    }
  },
  setup(props) {
    // 使用props
  }
};
```

语法糖的写法示例：

```html
<script setup lang='ts'>
import {defineProps,withDefaults} from 'vue'

//声明props
defineProps('myStringProp')

//声明一个props，并指定类型
defineProps<{myStringProp:string}>()

//声明一个props，并指定类型，设定默认值
withDefaults(defineProps<{myStringProp?:string}>(),{
  myStringProp:'默认值'
})

<script>
```

### 响应性

`props` 是响应式的，这意味着如果父组件传递给子组件的 `props` 发生变化，子组件将会重新渲染。需要注意的是，你应该避免直接修改 `props` 的值，因为这可能会导致不可预测的行为。如果你需要修改 `props` 的值，应该使用本地状态或通过 `emits` 向父组件发出事件。

## 总结

Vue 3中的 `props` 提供了更强大和灵活的特性，包括类型检查、默认值设置以及与Composition API的集成。这些改进使得在Vue 3中使用 `props` 更加方便和安全，同时也保持了与Vue 2的兼容性，让开发者可以根据项目需求和团队习惯选择最适合的编码方式。
