# hooks

在Vue 3中，自定义hooks是一种强大的功能，允许你在组件之间复用逻辑。自定义hooks可以封装状态管理、副作用、数据请求等逻辑，使得代码更加模块化和可重用。自定义hooks通常与Composition API一起使用，特别是在setup函数中。
>hooks就是一种函数

## 创建自定义hooks

自定义hooks函数通常以use开头命名，以便与其他JavaScript函数区分开来。这个函数接收一些参数（通常是props或context），并返回一个对象，包含你希望在组件中使用的响应式状态、计算属性和方法。

```javascript
// useMyFeature.js
import { ref, computed } from 'vue';

export function useMyFeature(props) {
  const count = ref(props.initialCount);

  function increment() {
    count.value++;
  }

  const doubleCount = computed(() => count.value * 2);

  return {
    count,
    increment,
    doubleCount
  };
}
```

## 使用自定义hooks

在你的组件中，你可以导入并使用自定义hooks，就像使用任何其他值或函数一样。

```html
<!-- MyComponent.vue -->
<template>
  <div>
    <p>Count is: {{ count }}</p>
    <button @click="increment">Increment</button>
  </div>
</template>

<script>
import { useMyFeature } from './useMyFeature';

export default {
  props: {
    initialCount: {
      type: Number,
      default: 0
    }
  },
  setup(props) {
    const { count, increment, doubleCount } = useMyFeature(props);

    return {
      count,
      increment,
      doubleCount
    };
  }
};
</script>
```

## 使用自定义hooks的注意事项

* 避免副作用：自定义hooks应该专注于计算和状态管理，避免在其中执行副作用（如API请求）。如果需要执行副作用，可以使用Vue的生命周期钩子或watchEffect。
* 保持简洁：自定义hooks应该做一件事情，并做好。如果你发现自己正在创建一个非常复杂的hook，可能需要重新考虑其设计。
* 参数传递：自定义hooks的参数应该尽可能简单。如果一个hook需要大量配置，可能意味着它正在尝试做太多事情。
* 响应式状态：自定义hooks返回的所有状态都应该是响应式的。使用ref、reactive、computed等响应式API来确保状态的正确性。

命名约定：遵循命名约定，使用use前缀来标识自定义hooks，这有助于代码的可读性和可维护性。

## 总结

自定义hooks是Vue 3中一个非常有用的功能，它使得逻辑复用变得简单和直观。通过创建自定义hooks，你可以将复杂的逻辑抽象出来，使组件代码更加清晰和易于维护。记住，自定义hooks的最佳实践是保持它们的单一职责和简洁性，这样可以确保你的应用程序的可扩展性和可维护性。
