# watchEffect

`watchEffect` 是 Vue 3 中的一个 API，它用于**自动追踪响应式状态**的变化，并在状态变化时执行副作用函数（effect）。与 `watch` 函数不同，`watchEffect` 不需要显式声明依赖项，它会自动追踪在副作用函数中使用的所有响应式状态。

## 特点

* 自动追踪：`watchEffect` 会自动追踪在副作用函数中使用的所有响应式状态，包括 `ref`、`reactive` 对象、其他 `computed` 属性或 `watchEffect`。
* 响应式更新：当追踪到的任何响应式状态发生变化时，`watchEffect` 会自动重新运行副作用函数。
* 无需手动声明依赖：与 `watch` 不同，你不需要手动声明要观察的数据源，`watchEffect` 会处理所有在函数内部使用的响应式变量。

## 示例

```javascript
import { ref, watchEffect } from 'vue';

const count = ref(0);
const doubledCount = computed(() => count.value * 2);

watchEffect(() => {
  // 这个副作用函数使用了count和doubledCount
  console.log(`count: ${count.value}, doubledCount: ${doubledCount.value}`);
  
  // 当count或doubledCount的值变化时，这个函数会被重新执行
});
```

在这个例子中，watchEffect 会追踪 `count` 和 `doubledCount` 的变化。每当 `count` 或 `doubledCount` 的值发生变化时，控制台中打印的信息也会更新。

## 与 watch 的区别

* `watchEffect` 是自动追踪所有在副作用函数中使用的响应式状态，而 `watch` 需要显式声明要观察的数据源。
* `watchEffect` 更适合于处理简单的副作用，如打印日志、执行DOM操作等，而 `watch` 更适合于处理复杂的逻辑，如条件判断、执行异步操作等。
* `watchEffect` 不能观察非响应式数据的变化，而 `watch` 可以观察任何类型的数据变化(非响应式数据可以通过函数实现)。

## 总结

`watchEffect` 是 Vue 3 中一个非常有用的 API，它简化了响应式状态变化的追踪和处理。当你需要在状态变化时执行一些副作用，但又不想手动声明依赖项时，`watchEffect` 是一个很好的选择。通过使用 `watchEffect`，你可以编写更简洁、更易于维护的代码，同时保持应用程序的响应性和高效性。
