# 标签中的ref属性

在Vue 3中，ref属性在模板中的使用方式已经发生了变化，与Vue 2中的ref属性有所不同。在Vue 2中，我们通常在模板中使用ref来为DOM元素或子组件创建一个引用，然后在Vue实例的`$refs`对象中通过这个引用的名称来访问对应的DOM元素或子组件实例。但在Vue 3中，随着Composition API的引入，我们不再使用`$refs`来访问这些引用。

## vue3 中的ref属性

在Vue 3的模板中，你仍然可以使用ref属性来标记DOM元素或子组件，但是在JavaScript逻辑中访问这些引用的方式有所改变。现在，你需要使用Composition API中的ref函数来创建一个响应式引用对象，并将其与模板中的ref属性关联起来。

示例：

```html
<template>
  <div ref="myDivRef">这是一个div</div>
</template>

<script>
import { ref, onMounted } from 'vue';

export default {
  setup() {
    // 使用Composition API的ref函数创建响应式引用对象
    const myDivRef = ref(null);//命名必须与上面的ref属性值相同。ref(null) 也可以写为 ref()

    // 使用onMounted生命周期钩子确保DOM元素已经被渲染
    onMounted(() => {
      // 现在可以通过myDivRef.value访问对应的DOM元素
      console.log(myDivRef.value); // 输出: 这是一个div的DOM节点
    });

    // 返回引用对象，使其在模板中可用
    return {
      myDivRef
    };
  }
};
</script>
```

在这个例子中，我们在模板中的`<div>`元素上使用了`ref`属性，并在`setup`函数中创建了一个名为`myDivRef`的响应式引用对象。通过这个引用对象，我们可以在组件的逻辑中访问和操作对应的DOM元素。

## 注意事项

* 在Vue 3中，ref属性在模板中的作用仅仅是为了给元素或子组件命名，而实际的引用对象是通过Composition API的ref函数创建的。
* 你需要在组件的setup函数中创建响应式引用对象，并通过返回值使其在模板中可用。
* 由于`setup`函数的执行时机在组件挂载之前，所以在setup函数中访问`ref`对象的`.value`将会得到`null`。你需要在某个生命周期钩子（如`onMounted`）中访问ref对象，以确保DOM元素已经被渲染。
* 你可以使用这些响应式引用对象来进行DOM操作或与子组件进行交互。

通过这种方式，Vue 3提供了更加灵活和模块化的方式来处理DOM元素和子组件的引用，同时也使得代码更加清晰和易于维护。
