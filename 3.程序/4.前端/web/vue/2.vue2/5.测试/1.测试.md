# 测试

>全部摘录官网文档

web 应用领域的测试主要是三大类：

* 单元测试
* 组件测试
* 端到端（E2E,end-to-end）测试

---

## 单元测试

含义：将独立单元的代码进行隔离测试，确定代码的稳定性。

### 单元测试框架选择建议

单元测试通常与框架无关，这里说下，选择单元测试框架关注点：

1. 准确错误报告。如使用断言库等
2. 活跃的社区和团队，可以通过社区找到问题解决的方案。

### 单元测试推荐框架

常用框架如下：

1. Jest：专注于简易性的 JavaScript 测试框架
    * [Jest 官网](https://jestjs.io/zh-Hans/)
    * [Vue CLI 官方插件 - Jest](https://cli.vuejs.org/core-plugins/unit-jest.html)
2. Mocha：专注于灵活性的 JavaScript 测试框架。它允许你选择不同的库来满足诸如侦听 (如 Sinon) 和断言 (如 Chai) 等其它常见的功能。
    * [Mocha 官网](https://mochajs.org/)
    * [Vue CLI 官方插件 - Mocha](https://cli.vuejs.org/core-plugins/unit-mocha.html)

---

## 组件测试

测试大多数 Vue 组件时都必须将它们挂载到 DOM (虚拟或真实) 上，才能完全断言它们正在工作。这是另一个与框架无关的概念。因此组件测试框架的诞生，是为了让用户能够以可靠的方式完成这项工作，同时还提供了 Vue 特有的诸如对 Vuex、Vue Router 和其他 Vue 插件的集成的便利性。

### 组件测试框架选择建议

选择框架，以下章节提供了在评估最适合你的应用的组件测试框架时需要记住的事项。

* 与 Vue 生态系统的最佳兼容性
* 一流的错误报告

### 组件测试推荐框架

1. Vue Testing Library (@testing-library/vue)

    Vue Testing Library 是一组专注于测试组件而不依赖实现细节的工具。由于在设计时就充分考虑了可访问性，它采用的方案也使重构变得轻而易举。

    它的指导原则是，与软件使用方式相似的测试越多，它们提供的可信度就越高。

    资料：

    * [Vue Testing Library 官网](https://testing-library.com/docs/vue-testing-library/intro)

2. Vue Test Utils

    Vue Test Utils 是官方的偏底层的组件测试库，它是为用户提供对 Vue 特定 API 的访问而编写的。如果你对测试 Vue 应用不熟悉，我们建议你使用 Vue Testing Library，它是 Vue Test Utils 的抽象。

    资源：

    * [Vue Test Utils 官方文档](https://vue-test-utils.vuejs.org/)
    * [Vue 测试指南](https://lmiller1990.github.io/vue-testing-handbook/zh-CN/) by Lachlan Miller
    * [Cookbook：Vue 组件的单元测试](https://v2.cn.vuejs.org/v2/cookbook/unit-testing-vue-components.html)

---

## 端到端 (E2E) 测试

端到端测试验证应用中的所有层。这不仅包括你的前端代码，还包括所有相关的后端服务和基础设施，它们更能代表你的用户所处的环境

### 端到端推荐框架

1. Cypress.io
    Cypress.io 是一个测试框架，旨在通过使开发者能够可靠地测试他们的应用，同时提供一流的开发者体验，来提高开发者的生产率。

    资料：

    * [Cypress 官网](https://www.cypress.io/)
    * [Vue CLI 官方插件 - Cypress](https://cli.vuejs.org/core-plugins/e2e-cypress.html)
    * [Cypress Testing Library](https://github.com/testing-library/cypress-testing-library)

2. Nightwatch.js
    Nightwatch.js 是一个端到端测试框架，可用于测试 web 应用和网站，以及 Node.js 单元测试和集成测试。

    资料：

    * [Nightwatch 官网](https://nightwatchjs.org/)
    * [Vue CLI 官方插件 - Nightwatch](https://cli.vuejs.org/core-plugins/e2e-nightwatch.html)
3. Puppeteer
    Puppeteer 是一个 Node.js 库，它提供高阶 API 来控制浏览器，并可以与其他测试运行程序 (例如 Jest) 配对来测试应用。

    资料：

    * [Puppeteer 官网](https://pptr.dev/)

4. TestCafe
    TestCafe 是一个基于端到端的 Node.js 框架，旨在提供简单的设置，以便开发者能够专注于创建易于编写和可靠的测试。

    资料：

    * [TestCafe 官网](https://devexpress.github.io/testcafe/)
