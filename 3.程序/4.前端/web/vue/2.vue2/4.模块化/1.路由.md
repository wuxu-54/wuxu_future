# 路由

Vue 2 路由指的是 Vue Router，这是一个为 Vue.js 应用程序提供声明式路由功能的核心库。Vue Router 允许你为应用定义路由，使得应用能够根据 URL 的变化展示不同的组件视图，从而实现单页面应用（SPA）的导航和视图管理。
>vue3 章节有详细讲解

## 官方路由

官方推荐库：[vue-router](https://github.com/vuejs/vue-router)。[vue-router 文档](https://router.vuejs.org/)

## 整合第三方路由

如果你有更偏爱的第三方路由，如 `Page.js` 或者 `Director`，整合起来也一样简单。这里有一个使用了 Page.js 的[完整示例](https://github.com/chrisvfritz/vue-2.0-simple-routing-example/tree/pagejs)。

## 安装 Vue Router

如果你还没有安装 Vue Router，可以通过 npm 或 yarn 来安装它：

```shell
npm install vue-router
# 或者
yarn add vue-router
```

## 基本使用

### 1.引入 Vue 和 Vue Router

首先，你需要在项目的入口文件 main.js 中引入 Vue 和 Vue Router，并使用 Vue.use() 方法来安装 Vue Router。

```js
import Vue from 'vue';
import VueRouter from 'vue-router';

Vue.use(VueRouter);
```

### 2.定义路由

接下来，你需要定义应用的路由。路由是一个从路径到组件的映射。每个路由记录定义了路径（path），组件（component）和其他可选属性。

```js
const routes = [
  { path: '/', component: Home },
  { path: '/about', component: About },
  { path: '/contact', component: Contact }
  // ...其他路由
];
```

### 3.创建 Router 实例

使用 `new VueRouter()` 创建一个 router 实例，并传入 routes 配置。

```js
const router = new VueRouter({
  routes // (缩写) 相当于 routes: routes
});
```

### 4.告诉 Vue 使用该路由

在创建 Vue 实例时，通过 router 选项挂载路由实例。

```js
new Vue({
  router,
  // ...其他选项
}).$mount('#app');
```

### 5.在组件中使用 `<router-view>`

在应用的根组件模板中，使用 `<router-view>` 元素作为路由的目标点。路由匹配到的组件将会渲染在这个元素所在的 DOM 位置。

```js
<template>
  <div id="app">
    <router-view></router-view>
  </div>
</template>
```

## 导航

Vue Router 提供了多种导航方式

### 编程式导航

使用 `router.push`、`router.replace` 或 `router.go` 方法来改变 URL。

```js
// 导航到 /about
router.push('/about');
// 替换历史中的当前记录，导航到 /contact
router.replace('/contact');
// 后退历史记录
router.go(-1);
```

### 声明式导航

使用 `<router-link>`组件来创建一个导航链接。

```html
<!-- 导航到 /about 的链接 -->
<router-link to="/about">About</router-link>
<!-- 使用 HTML5 History 模式 -->
<router-link :to="{ name: 'user', params: { userId: 123 }}">User</router-link>
<!-- 导航到根路径，在大多数情况下，根路径对应于首页或主页面 -->
<router-link to="/">根路径<router-link>
```

## 路由模式

Vue Router 支持两种路由模式：

* 哈希模式（default）：使用 URL 的哈希值来模拟一个完整的 URL，当 URL 改变时，页面不会重新加载。这种模式在不支持 HTML5 History API 的浏览器中也能工作。

* 历史模式：充分利用 HTML5 History API 来实现干净的 URL，没有 # 符号。这种模式需要服务器端配置，以便所有的路由请求都指向同一个 index.html 文件。

你可以通过 mode 选项在创建 router 实例时指定路由模式：

```js
const router = new VueRouter({
  mode: 'history', // 历史模式
  routes
});
```

## 路由元信息

你可以在路由配置中添加一个 `meta` 属性来定义路由的元信息，这些信息可以用于导航守卫、标签页等。

```js
const routes = [
  {
    path: '/user',
    component: User,
    meta: {
      requiresAuth: true // 路由需要认证
    }
  }
  // ...其他路由
];
```

## 总结

Vue Router 是 Vue 2 项目中实现复杂单页面应用路由的关键工具。通过定义路由、创建 router 实例、使用 `<router-view>` 和 `<router-link>` 组件，以及利用编程式和声明式导航，你可以构建出具有复杂路由和导航功能的 Vue 应用程序。此外，路由模式的选择和路由元信息的使用，使得 Vue Router 能够灵活适应不同的项目需求和开发场景。
