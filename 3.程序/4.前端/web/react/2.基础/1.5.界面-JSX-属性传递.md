# 属性传递

React 组件使用属性相互通信。每个父组件都可以通过给它们属性将一些信息传递给它的子组件。属性可能会让你想起 HTML 属性，但你可以通过它们传递任何 JavaScript 值，包括对象、数组和函数。

- 要传递属性，将它们添加到 JSX，就像使用 HTML 属性一样。
- 要读取属性，请使用 `function Avatar({ person, size })` 解构语法。
- 你可以指定一个默认值，如 size = 100，用于缺失和 undefined 属性。
- 你可以使用 `<Avatar {...props} />` JSX 展开语法转发所有属性，但不要过度使用它！
- 像 `<Card><Avatar /></Card>` 这样的嵌套 JSX 将作为 Card 组件的 children 属性出现。
- 属性是时间上的只读快照：每个渲染器都会收到一个新版本的属性。
- 你不能改变属性。当你需要交互时，你需要设置状态。

## html属性

JSX中使用的属性都是HTML标准属性，例如，`className`、`src`、`alt`、`width` 和 `height`.

## 组件传递属性

像我之前说的，即通过js 解构语法，组件属性即为函数入参

1. 步骤 1：将属性传递给子组件
2. 步骤 2：读取子组件内的属性

```js
import { getImageUrl } from './utils.js';

function Avatar({ person, size }) { // 解构接收属性
  return (
    <img
      className="avatar"
      src={getImageUrl(person)}
      alt={person.name}
      width={size}
      height={size}
    />
  );
}

export default function Profile() {
  return (
    <div>
      {/* 传递属性 */}
      <Avatar
        size={100}
        person={{ 
          name: 'Katsuko Saruhashi', 
          imageId: 'YfeOqp2'
        }}
      />
      <Avatar
        size={80}
        person={{
          name: 'Aklilu Lemma', 
          imageId: 'OKS67lh'
        }}
      />
      <Avatar
        size={50}
        person={{ 
          name: 'Lin Lanying',
          imageId: '1bX5QH6'
        }}
      />
    </div>
  );
}
```

如果你想给一个属性一个默认值以在没有指定值时返回，你可以通过将 = 和默认值放在参数后面来使用解构来实现：
>默认值仅在缺少 size 属性或传递 `size={undefined}` 时使用。但如果传递 `size={null}` 或 `size={0}`，则不会使用默认值。

```js
function Avatar({ person, size = 100 }) {
  // ...
}
```

## 使用 JSX 展开语法转发属性

有时，传递属性会变得非常重复：

```js
function Profile({ person, size, isSepia, thickBorder }) {
  return (
    <div className="card">
      <Avatar
        person={person}
        size={size}
        isSepia={isSepia}
        thickBorder={thickBorder}
      />
    </div>
  );
}
```

重复的代码没有什么问题 - 它可以更清晰。但有时你可能会看重简洁。一些组件将它们所有的属性转发给它们的子级，就像这个 Profile 对 Avatar 的处理方式。因为它们不直接使用任何属性，所以使用更简洁的 “展开” 语法是有意义的：

```js
function Profile(props) {
  return (
    <div className="card">
      <Avatar {...props} />
    </div>
  );
}
```

这会将 Profile 的所有属性转发给 Avatar，但不会列出每个属性的名称。

>有节制地使用展开语法。如果你在所有其他组件中都使用它，那就有问题了。出现这种情况时，表示你应该拆分组件并将子级作为 JSX 传递。接下来会详细介绍！

## 作为子级传递 JSX

JSX可以作为属性传递,组件方法处需要使用 `children` 属性:

```js
import Avatar from './Avatar.js';

function Card({ children }) {
  return (
    <div className="card">
      {children}
    </div>
  );
}

export default function Profile() {
  return (
    <Card>
      <Avatar
        size={100}
        person={{ 
          name: 'Katsuko Saruhashi',
          imageId: 'YfeOqp2'
        }}
      />
    </Card>
  );
}
```

## 动态属性

组件可能会随着时间的推移接收不同的属性。属性并不总是静态的！然而，props 是 不可变的 ，当组件需要更改其属性时（例如，响应用户交互或新数据），**它必须对其父组件进行 “询问” 才能向其传递不同的属性- 一个新对象**！它的旧属性将被丢弃，最终 JavaScript 引擎将回收它们占用的内存。

不要尝试 “改变属性”。当你需要响应用户输入时（比如改变选择的颜色），你将需要 “设置状态”，你可以在 ![状态：组件的内存](https://react.nodejs.cn/learn/state-a-components-memory)。 中了解。
