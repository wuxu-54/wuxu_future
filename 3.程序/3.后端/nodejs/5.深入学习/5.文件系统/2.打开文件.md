# 打开文件

## 语法

以下为在异步模式下打开文件的语法格式：

```js
fs.open(path, flags[, mode], callback)
```

## 参数

参数使用说明如下：

* path - 文件的路径。

* flags - 文件打开的行为。具体值详见下文。

* mode - 设置文件模式(权限)，文件创建默认权限为 0666(可读，可写)。

* callback - 回调函数，带有两个参数如：callback(err, fd)。

## flags 参数值

|Flag|描述|
|:-:|-|
|r|以只读模式打开文件。文件必须存在。如果文件不存在，会抛出异常|
|r+|以读写模式打开文件。文件必须存在。|
|rs|以同步方式只读打开文件。阻塞操作，但在某些操作系统上可能会提供更好的稳定性。|
|rs+|以同步方式读写打开文件。阻塞操作，但在某些操作系统上可能会提供更好的稳定性。|
|w|以只写模式打开文件。如果文件不存在则创建文件，如果文件存在则截断文件。|
|wx|类似于 'w'，但如果路径存在，则失败。|
|w+|以读写模式打开文件。如果文件不存在则创建文件，如果文件存在则截断文件。|
|wx+|类似于 'w+'，但如果路径存在，则失败。|
|a|以追加模式打开文件。如果文件不存在则创建文件。|
|ax|类似于 'a'，但如果路径存在，则失败。|
|a+|以读取和追加模式打开文件。如果文件不存在则创建文件。|
|ax+|类似于 'a+'，但如果路径存在，则失败。|

## 实例

接下来我们创建 file.js 文件，并打开 input.txt 文件进行读写，代码如下所示：

```js
var fs = require("fs");

// 异步打开文件
console.log("准备打开文件！");
fs.open('input.txt', 'r+', function(err, fd) {
   if (err) {
       return console.error(err);
   }
  console.log("文件打开成功！");     
});

/*
以上代码执行结果如下：
$ node file.js 
准备打开文件！
文件打开成功！
*/
```
