# 服务端的模块

之前我们已经在代码中使用了模块了。像这样：

```js
var http = require("http");

...
http.createServer(...);
```

Node.js 中自带了一个叫做 http 的模块，在我们的代码中请求它并把返回值赋给一个本地变量。

这把我们的本地变量变成了一个拥有所有 http 模块所提供的公共方法的对象。

## http模块

在Node.js的http模块中，创建服务器时传递的回调函数通常会接收两个参数：req和res。这两个参数分别代表请求（Request）对象和响应（Response）对象，它们提供了处理HTTP请求和发送响应所需的方法和属性。

### 请求对象（req）

req对象包含了客户端发起请求的所有信息，包括请求头、请求体、URL等。以下是req对象的一些常用属性和方法：

* req.url：请求的URL。
* req.method：HTTP请求方法（如'GET', 'POST'等）。
* req.headers：请求头的对象表示。
* req.body：请求体的内容。通常需要使用中间件如body-parser来解析。
* req.query：URL中的查询字符串参数的对象表示。通常需要使用中间件如express或query-string来解析。
* req.params：路由参数的对象表示，用于处理动态路由。
* req.socket：底层的TCP套接字。

### 响应对象（res）

res对象用于构造和发送HTTP响应给客户端。以下是res对象的一些常用方法：

* `res.writeHead(statusCode[, statusMessage][, headers])`：发送HTTP响应头。statusCode是状态码（如200, 404等），statusMessage是状态消息（如'OK', 'Not Found'等），headers是响应头的对象表示。
* `res.write(chunk[, encoding])`：向客户端发送响应体的一部分。chunk可以是字符串或缓冲区（Buffer），encoding是字符串的编码（如'utf-8'）。
* `res.end([data[, encoding]])`：结束响应。如果提供data，则它会被写入响应体，然后响应结束。encoding是字符串的编码。
* `res.json(obj)`：发送JSON响应。它通过调用res.write(JSON.stringify(obj))和res.end()来工作。
* `res.sendFile(path[, options][, callback])`：发送文件作为响应。它使用fs模块读取文件并设置适当的响应头。

### 示例

```js
const http = require('http');

const server = http.createServer((req, res) => {
  // 设置响应头
  res.writeHead(200, { 'Content-Type': 'text/html' });

  // 发送响应体
  res.write('<h1>Hello World</h1>');
  res.end();
});

// 启动服务器
server.listen(3000, () => {
  console.log('Server running at http://localhost:3000/');
});
```
