# 通用命令

Redis的通用命令操作主要涵盖了键（key）的管理、数据类型的操作以及其他一些辅助命令。以下是对这些命令的详细归纳：

## 一、键的管理命令

1. **SET key value**

   * 设置键值对，如果键不存在则创建。
   * 示例：`SET mykey "Hello, Redis!"`

2. **GET key**

   * 获取键的值，如果不存在则返回nil（null）。
   * 示例：`GET mykey`

3. **EXISTS key [key ...]**

   * 检查键是否存在，存在返回1，不存在返回0。可以检查一个或多个键。
   * 示例：`EXISTS mykey anotherkey`

4. **DEL key [key ...]**

   * 删除一个或多个键及其值。返回被删除键的数量。
   * 示例：`DEL mykey anotherkey`

5. **UNLINK key [key ...]**

   * 根据value选择非阻塞删除，仅将keys从keyspace元数据中删除，真正的删除会在后续异步操作。

6. **RENAME key newkey**

   * 将键重命名为新的键名。如果新键名已存在，则覆盖旧值。
   * 示例：`RENAME mykey mynewkey`

7. **RENAMENX key newkey**

   * 仅在新键名不存在时，将键重命名为新的键名。

8. **TYPE key**

   * 获取键的数据类型，如string、hash、list、set、zset。
   * 示例：`TYPE mykey`

9. **KEYS pattern**

   * 查找所有匹配指定模式的键。模式可以是通配符，如`*`匹配任意数量的字符，`?`匹配一个字符。注意，在生产环境中应避免使用KEYS命令，因为它会扫描整个数据库来查找匹配的键，可能会导致Redis阻塞。
   * 示例：`KEYS *my*`

10. **RANDOMKEY**

    * 随机返回一个键名称。

11. **COPY source destination [db destination-db] [replace]**

    * 拷贝当前某一个key的值，存放到新的key中（可以跨库拷贝）。

12. **MOVE key db**

    * 把指定的键值移动到选定的数据库db当中。如果key在目标数据库中已存在，或者key在源数据库中不存在，则key不会被移动。

## 二、数据类型操作命令

Redis支持五种数据类型：字符串（string）、哈希（hash）、列表（list）、集合（set）、有序集合（zset）。每种数据类型都有其特定的操作命令。

1. **字符串（string）**

   * **SETNX key value**：仅当键不存在时设置键的值。
   * **INCR key**：将键的值加1，并返回新值（仅对数字值操作）。
   * **DECR key**：将键的值减1，并返回新值（仅对数字值操作）。
   * **APPEND key value**：将值追加到键的原始值后面。
   * **STRLEN key**：返回键值的长度。
   * **GETSET key value**：以新值替换旧值，并返回旧值。
   * **SETEX key seconds value**：设置键的值和过期时间（以秒为单位）。
   * **GETRANGE key start stop**：获取字符串值从start到stop的子字符串（闭区间）。
   * **SETRANGE key offset value**：用value覆写所储存的字符串值，从offset开始。

2. **哈希（hash）**

   * **HSET key field value**：设置哈希表中指定字段的值。
   * **HGET key field**：获取哈希表中指定字段的值。
   * **HMSET key field1 value1 [field2 value2 ...]**：同时设置哈希表中多个字段的值（Redis 4.0.0后已废弃，建议使用HSET key field1 value1 field2 value2 ...的形式）。
   * **HMGET key field1 [field2 ...]**：同时获取哈希表中多个字段的值。
   * **HEXISTS key field**：检查哈希表中是否存在指定的字段。
   * **HDEL key field [field ...]**：删除哈希表中一个或多个字段。
   * **HGETALL key**：获取哈希表中所有字段和值的列表。
   * **HKEYS key**：列出该哈希集合的所有字段。
   * **HVALS key**：列出该哈希集合的所有值。
   * **HINCRBY key field increment**：为哈希表key中的字段field的值加上增量increment。
   * **HSETNX key field value**：将哈希表key中的字段field的值设置为value，当且仅当字段field不存在。

3. **列表（list）**

   * **LPUSH key value [value ...]**：将一个或多个值插入到列表的头部。
   * **RPUSH key value [value ...]**：将一个或多个值插入到列表的尾部。
   * **LPOP key**：移除并返回列表的头部元素。
   * **RPOP key**：移除并返回列表的尾部元素。
   * **LRANGE key start stop**：获取列表中指定范围内的元素（包括start和stop）。
   * **LLEN key**：获取列表的长度。
   * **LINSERT key BEFORE|AFTER pivot value**：在列表的元素前或后插入值。
   * **LREM key count value**：移除列表中前count个值为value的元素。
   * **LSET key index value**：通过索引设置列表元素的值。
   * **RPOPLPUSH source destination**：移除列表的最后一个元素，并将该元素添加到另一个列表的头部。

4. **集合（set）**

   * **SADD key member [member ...]**：向集合中添加一个或多个成员。
   * **SREM key member [member ...]**：从集合中移除一个或多个成员。
   * **SISMEMBER key member**：判断成员是否存在于集合中。
   * **SMEMBERS key**：获取集合中的所有成员。
   * **SCARD key**：获取集合的成员数量。
   * **SPOP key [count]**：随机移除并返回集合中的一个或多个成员。
   * **SRANDMEMBER key [count]**：随机返回集合中的一个或多个成员，但不移除。
   * **SMOVE source destination member**：将成员从一个集合移动到另一个集合。
   * **SINTER key [key ...]**：返回多个集合的交集。
   * **SUNION key [key ...]**：返回多个集合的并集。
   * **SDIFF key [key ...]**：返回多个集合的差集。

5. **有序集合（zset）**

   * **ZADD key score member [score2 member2 ...]**：向有序集合中添加一个或多个成员和分数。
   * **ZREM key member [member ...]**：从有序集合中移除一个或多个成员。
   * **ZSCORE key member**：获取有序集合中指定成员的分数。
   * **ZRANGE key start stop [WITHSCORES]**：按分数递增顺序返回有序集合中指定范围内的成员和分数（可选）。
   * **ZREVRANGE key start stop [WITHSCORES]**：按分数递减顺序返回有序集合中指定范围内的成员和分数（可选）。
   * **ZRANGEBYSCORE key min max [WITHSCORES] [LIMIT offset count]**：返回有序集合中分数在指定范围内的成员和分数（可选），并按分数递增排序。还可以指定返回结果的偏移量和数量。
   * **ZREVRANGEBYSCORE key max min [WITHSCORES] [LIMIT offset count]**：与ZRANGEBYSCORE类似，但按分数递减排序。
   * **ZINCRBY key increment member**：为有序集合中指定成员的分数加上增量。
   * **ZRANK key member**：返回有序集合中指定成员的排名（按分数递增排序）。
   * **ZREVRANK key member**：返回有序集合中指定成员的排名（按分数递减排序）。
   * **ZCOUNT key min max**：返回有序集合中分数在指定范围内的成员数量。

## 三、其他辅助命令

1. **EXPIRE key seconds**

   * 为键设置过期时间（以秒为单位）。
   * 示例：`EXPIRE mykey 60`

2. **PEXPIRE key milliseconds**

   * 为键设置过期时间（以毫秒为单位）。

3. **EXPIREAT key timestamp**

   * 为键设置过期时间（以UNIX时间戳的形式）。

4. **PEXPIREAT key milliseconds-timestamp**

   * 为键设置过期时间（以毫秒级的UNIX时间戳的形式）。

5. **TTL key**

   * 获取键的剩余生存时间（以秒为单位）。如果键不存在或没有设置过期时间，则返回-2或-1。
   * 示例：`TTL mykey`

6. **PTTL key**

   * 获取键的剩余生存时间（以毫秒为单位）。

7. **PERSIST key**

   * 移除键的过期时间，将其设置为永久有效。
   * 示例：`PERSIST mykey`

8. **SELECT index**

   * 切换到指定的数据库
