# 聚合查询

MySQL中的聚合查询通常是指使用聚合函数对一组数据进行计算，得到一个单一的结果。聚合函数可以对一组值进行计算，如求和、求平均值、计数、最大值、最小值等。

以下是一些常用的聚合函数及其用法：

1. `COUNT()`：计算行数。
   - `SELECT COUNT(*) FROM table_name;` 计算表中的总行数。
   - `SELECT COUNT(column_name) FROM table_name;` 计算某列非`NULL`值的数量。

2. `SUM()`：计算数值列的总和。
   - `SELECT SUM(column_name) FROM table_name;`

3. `AVG()`：计算数值列的平均值。
   - `SELECT AVG(column_name) FROM table_name;`

4. `MAX()`：找出数值列的最大值。
   - `SELECT MAX(column_name) FROM table_name;`

5. `MIN()`：找出数值列的最小值。
   - `SELECT MIN(column_name) FROM table_name;`

6. `GROUP BY`：用来将取回的记录分组。
   - `SELECT column_name, COUNT(*) FROM table_name GROUP BY column_name;`

7. `HAVING`：用来过滤分组后的结果集。
   - `SELECT column_name, SUM(column_name) FROM table_name GROUP BY column_name HAVING SUM(column_name) > 100;`

8. `GROUP_CONCAT()`：将分组后的行值连接成一个字符串。
   - `SELECT column_name, GROUP_CONCAT(another_column_name) FROM table_name GROUP BY column_name;`

9. `STDDEV()`：计算数值列的标准差。
   - `SELECT STDDEV(column_name) FROM table_name;`

10. `VAR_POP()`：计算数值列的总体方差。
    - `SELECT VAR_POP(column_name) FROM table_name;`

11. `VAR_SAMP()`：计算数值列的样本方差。
    - `SELECT VAR_SAMP(column_name) FROM table_name;`

聚合查询通常与`GROUP BY`子句一起使用，以便对数据进行分组处理。如果需要对分组后的结果进行过滤，可以使用`HAVING`子句。

下面是一个聚合查询的例子：

```sql
SELECT department, AVG(salary) AS average_salary
FROM employees
GROUP BY department;
```

这个查询会返回每个部门的平均薪资。

记得在使用聚合函数时，除了`GROUP BY`列之外，选择列表中的其他列都应该使用聚合函数进行处理。
