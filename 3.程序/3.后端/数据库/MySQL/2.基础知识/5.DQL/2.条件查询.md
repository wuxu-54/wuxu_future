# 条件查询

在 MySQL 中，条件查询通常使用 `SELECT` 语句结合 `WHERE` 子句来实现。`WHERE` 子句允许你指定条件，以便从表中返回满足这些条件的行。以下是一些基本的条件查询操作：

## 1. 等于（=）

查询列值等于特定值的行：

```sql
SELECT * FROM table_name WHERE column1 = 'value';
```

## 2. 不等于（!= 或 <>）

查询列值不等于特定值的行：

```sql
SELECT * FROM table_name WHERE column1 != 'value';
-- 或者
SELECT * FROM table_name WHERE column1 <> 'value';
```

补充：NULL 不能比较，需要通过 `IS NULL` 或 `NOT NULL`判断

```sql
SELECT * FROM table_name WHERE column1 != 'value' OR column1 IS NULL;
```

## 3. 大于（>）

查询列值大于特定值的行：

```sql
SELECT * FROM table_name WHERE column1 > 'value';
```

## 4. 大于等于（>=）

查询列值大于或等于特定值的行：

```sql
SELECT * FROM table_name WHERE column1 >= 'value';
```

## 5. 小于（<）

查询列值小于特定值的行：

```sql
SELECT * FROM table_name WHERE column1 < 'value';
```

## 6. 小于等于（<=）

查询列值小于或等于特定值的行：

```sql
SELECT * FROM table_name WHERE column1 <= 'value';
```

## 7. 范围查询（BETWEEN ... AND ...）

查询列值在两个值之间的行：

```sql
SELECT * FROM table_name WHERE column1 BETWEEN 'value1' AND 'value2';
```

## 8. IN

查询列值属于某个列表的行：

```sql
SELECT * FROM table_name WHERE column1 IN ('value1', 'value2', ...);
```

## 9. LIKE

查询列值匹配特定模式的行：

```sql
SELECT * FROM table_name WHERE column1 LIKE 'pattern';

--- 模糊匹配，匹配单字符。 有几个 _ 就匹配对应个数的字符
SELECT  * FROM  wuxu_table where name like '_';
```

## 10. 空值（IS NULL）

查询列值为空（NULL）的行：

```sql
SELECT * FROM table_name WHERE column1 IS NULL;
```

## 11. 非空值（IS NOT NULL）

查询列值非空的行：

```sql
SELECT * FROM table_name WHERE column1 IS NOT NULL;
```

## 12. 正则表达式（REGEXP 或 RLIKE）

查询列值匹配正则表达式的行：

```sql
SELECT * FROM table_name WHERE column1 REGEXP 'pattern';
-- 或者
SELECT * FROM table_name WHERE column1 RLIKE 'pattern';
```

## 13. 逻辑运算符

组合多个条件查询：

```sql
SELECT * FROM table_name WHERE column1 = 'value1' AND column2 = 'value2';
SELECT * FROM table_name WHERE column1 = 'value1' OR column2 = 'value2';
SELECT * FROM table_name WHERE column1 <> 'value1' AND column2 > 'value2';
```

## 14. 正则匹配

使用`REGEXP`或`RLIKE`可以支持正则表达式匹配

```sql
SELECT * FROM table_name WHERE column_name REGEXP '^[0-9]';
```

## 示例

假设有一个名为 `employees` 的表，包含 `id`, `name`, `age`, 和 `salary` 这些列：

```sql
-- 查询薪资大于 5000 的员工
SELECT * FROM employees WHERE salary > 5000;

-- 查询名字以 'A' 开头的员工
SELECT * FROM employees WHERE name LIKE 'A%';

-- 查询年龄在 25 到 35 岁之间的员工
SELECT * FROM employees WHERE age BETWEEN 25 AND 35;

-- 查询薪资在列表中的员工
SELECT * FROM employees WHERE salary IN (3000, 5000, 7000);

-- 查询名字不是 'John' 的员工
SELECT * FROM employees WHERE name != 'John';
```

在使用 `WHERE` 子句时，可以结合使用多个条件和逻辑运算符来精确地定位需要查询的数据。

---

## `LIKE`匹配

在 MySQL 中，`LIKE` 运算符用于在 `WHERE` 子句中搜索列中的指定模式。`LIKE` 是 SQL 中最常用的模糊匹配运算符之一，它通常与通配符 `%`（匹配任意数量的字符）和 `_`（匹配单个字符）一起使用。

### `LIKE` 运算符的基本用法

1. **百分号（%）**：表示任意数量的字符（包括零个字符）。

   ```sql
   SELECT * FROM table_name WHERE column_name LIKE '%value%';
   ```

   这个查询将返回 `column_name` 包含 "value" 的所有行。

2. **下划线（_）**：表示任意单个字符。

   ```sql
   SELECT * FROM table_name WHERE column_name LIKE 'val_ue%';
   ```

   这个查询将返回 `column_name` 第三个字符是 "u"，后面跟着 "e" 的所有行。

### 示例详解

假设有一个名为 `employees` 的表，其中包含 `name` 列。

- **查找以 "A" 开头的员工**：

  ```sql
  SELECT * FROM employees WHERE name LIKE 'A%';
  ```

  这将返回所有以 "A" 开头的员工记录。

- **查找名字中包含 "ma" 的员工**：

  ```sql
  SELECT * FROM employees WHERE name LIKE '%ma%';
  ```

  这将返回所有名字中包含 "ma" 的员工记录。

- **查找名字以 "n" 结尾的员工**：

  ```sql
  SELECT * FROM employees WHERE name LIKE '%n';
  ```

  这将返回所有名字以 "n" 结尾的员工记录。

- **查找第二个字符是 "a" 的员工**：

  ```sql
  SELECT * FROM employees WHERE name LIKE '_a%';
  ```

  这将返回所有名字第二个字符是 "a" 的员工记录。

- **查找名字中第三个位置是 "o" 的员工**：

  ```sql
  SELECT * FROM employees WHERE name LIKE '%_o%';
  ```

  这将返回所有名字中第三个位置是 "o" 的员工记录。

### 注意事项

- `LIKE` 运算符是大小写敏感的，但 MySQL 默认配置是不区分大小写的。如果需要区分大小写，可以在比较时使用 `BINARY` 关键字，或者设置数据库的校对规则。

  ```sql
  SELECT * FROM employees WHERE BINARY name LIKE 'A%';
  ```

- 在使用 `LIKE` 进行模糊匹配时，如果列中有 `NULL` 值，这些行将不会被包含在结果集中。如果需要包含 `NULL` 值，可以使用 `OR` 条件。

  ```sql
  SELECT * FROM employees WHERE name LIKE 'A%' OR name IS NULL;
  ```

- `LIKE` 运算符通常与全文搜索不同，全文搜索提供了更复杂的搜索功能，如相关性排名等。

- 在性能方面，如果 `LIKE` 操作的模式以通配符开头（例如 `%value`），则无法使用索引。如果模式中通配符在尾部（例如 `value%`），则可以利用索引。

通过合理使用 `LIKE` 运算符，可以灵活地进行模糊匹配查询，满足各种数据检索需求。
