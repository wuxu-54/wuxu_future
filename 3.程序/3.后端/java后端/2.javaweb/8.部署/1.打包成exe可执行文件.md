# 打包成exe

将一个Java项目打包成可执行文件（EXE），并且使其能够加载和运行本地HTML文件，涉及多个步骤。以下是一个详细的指南，帮助你完成这项任务：

## 1. 准备工作

- **Java项目**：确保你的Java项目已经正确编写和测试过，特别是加载本地HTML文件的部分。
- **Java开发工具包（JDK）**：确保已安装并配置好JDK。
- **第三方工具**：
  - **Launch4j**：一个将Java JAR文件打包成EXE文件的工具。
  - **Inno Setup**（可选）：一个用于创建安装程序的工具，如果你的项目需要分发。

## 2. 编写Java代码加载本地HTML文件

确保你的Java项目中有一个类能够加载和显示本地HTML文件。例如，使用JavaFX或Swing的`JEditorPane`。

**使用JavaFX加载HTML示例**：

```java
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.layout.StackPane;
import javafx.scene.web.WebView;
import javafx.stage.Stage;

import java.io.File;
import java.net.URL;

public class LoadLocalHtmlApp extends Application {

    @Override
    public void start(Stage primaryStage) {
        try {
            WebView webView = new WebView();
            File htmlFile = new File("path/to/your/local.html");
            URL url = htmlFile.toURI().toURL();
            webView.getEngine().load(url.toString());

            StackPane root = new StackPane();
            root.getChildren().add(webView);

            primaryStage.setTitle("Load Local HTML");
            primaryStage.setScene(new Scene(root, 800, 600));
            primaryStage.show();
        } catch(Exception e) {
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {
        launch(args);
    }
}
```

**使用Swing加载HTML示例**：

```java
import javax.swing.*;
import java.io.File;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;

public class LoadLocalHtmlSwing {

    public static void main(String[] args) {
        try {
            JFrame frame = new JFrame("Load Local HTML");
            JEditorPane editorPane = new JEditorPane();
            editorPane.setContentType("text/html");
            File htmlFile = new File("path/to/your/local.html");
            URL url = htmlFile.toURI().toURL();
            editorPane.setPage(url);
            frame.add(new JScrollPane(editorPane));
            frame.setSize(800, 600);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setVisible(true);
        } catch (MalformedURLException | IOException e) {
            e.printStackTrace();
        }
    }
}
```

## 3. 打包Java项目为JAR文件

使用Maven、Gradle或命令行工具将你的Java项目打包成一个JAR文件。

**使用Maven**：

```sh
mvn clean package
```

**使用Gradle**：

```sh
gradle clean build
```

**使用命令行**：

```sh
javac -d out src/com/yourpackage/*.java
jar cfe yourapp.jar com.yourpackage.MainClass -C out .
```

## 4. 使用Launch4j将JAR文件打包为EXE文件

1. 下载并安装Launch4j。
2. 打开Launch4j，配置你的JAR文件。
   - **Output file**：设置输出EXE文件的路径。
   - **Jar**：选择你的JAR文件。
   - **Main class**：设置你的主类（包含`main`方法的类）。
   - **Classpath**：确保包含所有必要的库。
3. 配置其他选项，比如图标等。
4. 点击“Build Wrapper”生成EXE文件。

## 5. 测试EXE文件

运行生成的EXE文件，确保它能够正确加载和显示本地HTML文件。

## 6. 分发（可选）

如果你需要分发你的应用程序，可以使用Inno Setup创建一个安装程序，包含你的EXE文件和其他必要的资源。

## 注意事项

- **路径问题**：确保在EXE文件中正确引用本地HTML文件的路径。可以使用相对路径或配置文件来指定HTML文件的路径。
- **依赖库**：如果JavaFX或Swing需要额外的库，确保这些库在打包过程中被正确包含。
- **权限问题**：在某些操作系统上，可能需要额外的权限来访问本地文件系统。

通过以上步骤，你应该能够将一个Java项目打包成EXE文件，并使其能够加载和运行本地HTML文件。
