# 配置

Spring Data Redis是Spring中数据操作的模块之一，专门用于支持在Spring管理项目中对Redis的操作。以下是对Spring Data Redis的配置和使用的详细介绍：

## 一、配置Spring Data Redis

1. **引入依赖**

   在Spring Boot项目中，可以通过在`pom.xml`文件中添加以下依赖来引入Spring Data Redis：

   ```xml
   <dependency>
       <groupId>org.springframework.boot</groupId>
       <artifactId>spring-boot-starter-data-redis</artifactId>
   </dependency>
   ```

   此外，如果需要连接池支持，还可以添加`commons-pool2`依赖：

   ```xml
   <dependency>
       <groupId>org.apache.commons</groupId>
       <artifactId>commons-pool2</artifactId>
   </dependency>
   ```

2. **配置Redis数据源**

   在`application.yml`或`application.properties`文件中配置Redis的数据源信息，例如：

   ```yaml
   spring:
     redis:
       host: localhost  # Redis服务器地址
       port: 6379       # Redis服务器端口
       password: 123456 # Redis服务器密码（如果没有设置密码，可以省略此行）
       database: 0      # Redis数据库编号（默认为0，可省略此行）
       lettuce:
         pool:
           max-active: 10  # 最大连接数
           max-idle: 5      # 最大空闲连接数
           min-idle: 1      # 最小空闲连接数
           max-wait: -1ms   # 最大阻塞等待时间（负值表示没有限制）
   ```

3. **创建RedisTemplate配置类**

   编写配置类来创建`RedisTemplate`对象，并设置序列化器。默认情况下，Spring Boot会自动装配`RedisTemplate`对象，但默认的key序列化器为`JdkSerializationRedisSerializer`，这会导致存到Redis中的数据和原始数据有差别。因此，通常会将key的序列化器设置为`StringRedisSerializer`。示例如下：

   ```java
   import org.springframework.context.annotation.Bean;
   import org.springframework.context.annotation.Configuration;
   import org.springframework.data.redis.connection.RedisConnectionFactory;
   import org.springframework.data.redis.core.RedisTemplate;
   import org.springframework.data.redis.serializer.StringRedisSerializer;

   @Configuration
   public class RedisConfig {

       @Bean
       public RedisTemplate<String, Object> redisTemplate(RedisConnectionFactory redisConnectionFactory) {
           RedisTemplate<String, Object> redisTemplate = new RedisTemplate<>();
           redisTemplate.setConnectionFactory(redisConnectionFactory);
           redisTemplate.setKeySerializer(new StringRedisSerializer());
           // 可以根据需要设置value的序列化器，例如使用GenericJackson2JsonRedisSerializer来序列化对象
           // redisTemplate.setValueSerializer(new GenericJackson2JsonRedisSerializer());
           return redisTemplate;
       }
   }
   ```

4. **使用RedisTemplate对象进行Redis操作**
