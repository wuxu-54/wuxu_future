# 分层解耦

完整的数据逻辑处理会很混乱，所以通常我们需要将接口分为三个层级：

1. dao 数据层
2. service 处理层
3. controller 控制层，接收B/C端请求

## service

接口层会持有service层实例对象，此时就会有耦合，因为实例对象如果发生变化，那么接口层也要修改。为了解决此问题，采用 IOC+依赖注入框架 来实现。
>android也是java开发语言，所以很多框架都是通用的，android也有IOC+依赖注入的使用。

- IOC：控制反转，即IOC获取接口层对service层对象的控制权，可以当做一个容器，service层对象的创建会交给此容器
- 依赖注入框架：spring中使用`DI`依赖注入框架，这个框架是将实例数据设置到使用地方即接口层。

## 注解

- `@Component` 标记实例对象类。衍生注解（即SpringBoot已实现的Component）：`@Service`（service层）、`@Controller`（控制层）、`Repository`（数据层）
- `@Autowired` 标记被注入的属性。

`@Autowired`是spring框架提供按类型注入，如果有多个实例对象类，编译时会报错。那么怎么解决呢？

答：

1. `@Primary`；
2. `@Autowired`+`@Qualifier`；
3. `@Resource(name="bean名称")` jdk提供按名称注入
