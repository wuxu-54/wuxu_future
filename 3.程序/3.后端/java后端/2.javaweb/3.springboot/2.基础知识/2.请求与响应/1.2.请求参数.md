# 请求参数

B端或C端通过访问服务器接口来获取数据，那么就涉及请求处理与响应。SpringBoot 通过很简便的方式可以实现接口，但是使用时有一些注意点。

## 注意

1. 请求参数名要与数据接收属性名一致

    ```java
   @RequestMapping("/simpleArray")
    public String simpleArray(String[] name) {//请求参数名必须是name
        System.out.println(Arrays.toString(name));
        return "simpleArray";
    }

    /*
     *  如果是数据对象 ,请求参数必须与属性名相同
     */

    public class UserData {
        public String name; // 请求参数名必须是name
        //set get...
    }
    ```

### 1. 原始方式参数

通过HttpServletRequest对象获取参数

```java
/*
    * 原始获取请求数据方式：使用HttpServletRequest对象取参数
    */
@RequestMapping("/simpleParam")
public String simpleParam(HttpServletRequest request) {

    String name = request.getParameter("name");
    String age =  request.getParameter("age");

    System.out.println(name + " " + age);

    return "ok";
}
```

### 2. 普通参数

直接通过对应类型方法参数接收数据。

```java
/*
* 非原始&post请求：实体参数
*
* springboot 会自动解析
*/
@RequestMapping("/simpleParam2")
public String simpleParam2(String name, Integer age) {
    System.out.println(name + " " + age);
    return "ok";
}
```

### 3. 数据对象参数

- SpringBoot获取请求参数，数据对象必须有修改器（get）和访问器（set）
- 请求参数名要与数据对象中的属性名相同
- 在不设置`require`时，数据对象中的属性是可选的，不必在请求参数中全部设置。

```java
/*
* 非原始&post请求：实体参数- UserData
*
* postman中的Param添加key、value。  post、get 都行
*
* springboot 会自动解析
*/
@RequestMapping("/simpleParam3")
public String simpleParam3(UserData userData) {
    System.out.println(userData.toString());
    return "ok";
}

public class UserData {
    public String name;
    public int age;
     //set get...
}
```

### 4. 数组参数

```java
/*
* 数组
* postman中的Param添加相同key多个参数
*
* 参数用数组接收
*/
@RequestMapping("/simpleArray")
public String simpleArray(String[] name) {
    System.out.println(Arrays.toString(name));
    return "simpleArray";
}
```

### 5. 集合参数

方法参数需要使用注解`@RequestParam`

```java
/*
* 集合
* postman中的Param添加相同key多个参数
*
* 参数用集合接收
*/
RequestMapping("/simpleList")
public String simpleList(@RequestParam List<String> listName) {
   System.out.println(listName.toString());
   return "ok";

```

### 6. 路径参数

在接口地址`RequestMapping`中使用`{}`标记路径参数，在方法参数中使用`@PathVariable`绑定被标记的路径参数，同时也获取路径参数数据

```java
/*
* 路径参数
* postman中的Param添加相同key多个参数
*/
@RequestMapping("/path/{id}/{name}")
public String simplePath(@PathVariable Integer id,@PathVariable String name) {
    System.out.println(id+" "+name);
    return "simplePath";
}
```

### 7. 日期参数

postman请求：`http://localhost:8080/time?updateTime=2024-09-13 11:39:15`

```java
/*
* 日期参数
*/
@RequestMapping("/time")
public String simpleTime(@DateTimeFormat(pattern = "yyyy-MM-dd HH:mm:ss")LocalDateTime updateTime) {
    System.out.println(updateTime);
    return "simpleTime";
}
```

- `@DateTimeFormat()`修饰
- `pattern = "yyyy-MM-dd HH:mm:ss"` 是约定的日期格式
- 使用`LocalDateTime`日期类型接收数据

### 8. json参数

`@RequestBody`修饰参数

```java
/*
* json参数
*
* @RequestBody 修饰，会自动将json数据转换为UserData实例对象
*/
@RequestMapping("/json")
public String simpleJson(@RequestBody UserData userData) {
    System.out.println(userData.toString());
    return "simpleJson";
}
```

## 响应

`@ResponseBody`注解，可以放在Controller方法/类上，将返回值都会转换为json格式响应。`@RestController` = `@Controller`+`@ResponseBody`

上面示例，Controller类使用的是`@RestController`，return的就是 B/C 端收到服务端返回的响应信息。为保证返回数据格式一致性一般会封装一个Result响应数据类。

```java
class Result{
    int code;
    String msg;
    Object data;
}
```
