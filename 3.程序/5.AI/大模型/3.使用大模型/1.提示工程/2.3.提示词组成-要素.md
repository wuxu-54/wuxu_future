# 提示词要素

[TOC]

从大量提示工程示例来看，提示词是由一些要素组成的。下面是我总结的要素，同时也可以作为通用写法：

## 要素

结合几个大模型网站的资料，我总结的要素

### 要素内容

- 指定大模型的角色
- 设定明确的目标
- 指定上下文（非必须）
- 设定约束条件
- 设定大模型拥有的能力
- 输入额外的参考资料或说明
- 设定大模型的输出风格
- 设定大模型执行的工作流
- 可以设定某些示例

### 通用模版

```markdown
## 角色
- 写你要大模型做的角色
## 目标
- 写明需求
## 上下文
- 参考某些文件
## 约束
- 不能有什么
- 必须要有什么
## 能力
- 掌握哪些知识技能
## 输入
- 一些额外的输入数据
## 输出
- 输出的风格
- 输出格式类型
## 工作流
1. 先做什么
2. 再做什么
## 示例
某些问题及回答样例
```

---

## 一些个人建议

1. 要掌握Markdown语法，可以在提示词长且复杂时有更好的效果
2. 可以使用符号规范提示词。
3. 提示词的要素不是必须的，可以根据需求进行选择。

问时：

1. 进行需求分析，明确目标、大模型角色等
2. 将问题细化，链式提问，引导大模型给出更精准的答案
3. 使用markdown语法，对问题进行格式化。

---

## 参考资料

### 1. Prompt Enginering Guide

提示词可以包含以下任意要素：

指令：想要模型执行的特定任务或指令。
上下文：包含外部信息或额外的上下文信息，引导语言模型更好地响应。
输入数据：用户输入的内容或问题。
输出指示：指定输出的类型或格式。

示例：

```txt
请将文本分为中性、否定或肯定
文本：我觉得食物还可以。
情绪：
```

在上面的提示示例中，指令是“将文本分类为中性、否定或肯定”。输入数据是“我认为食物还可以”部分，使用的输出指示是“情绪：”。

---

### 2. 智谱清言

[智谱清言官网贴出的他们大模型的提示工程](https://open.bigmodel.cn/dev/howuse/prompt)，归纳总结了几种大类：

1. 语言模型Prompt工程
2. 图像生成模型Prompt工程
3. Batch API Prompt 工程
    >武旭：我认为这个更适合开发同学参考借鉴，可以明确向大模型进行提问的格式。

#### 2.1. 语言模型Prompt工程

语言模型提示工程按下面结构进行输入：

- 策略：**编写清晰、具体的指令**
- 策略：**提供参考资料**
- 策略：**将复杂任务分解为简单的子任务**
- 策略：**给予模型思考时间**
- 策略：**使用外部工具增强模型能**

##### 2.1.1 编写清晰、具体的指令

为了获得最佳的回答，用户需要向 GLM 提供清晰、具体的指令。GLM 越能明确您的需求，提供的回答质量越高。

1. 技巧：定义 System Prompt

    用于设定AI助手行为模式的工具，包括角色设定、语言风格、任务模式和针对特定问题的具体行为指导。

    ```txt
    你擅长从文本中提取关键信息，精确、数据驱动，重点突出关键信息，根据用户提供的文本片段提取关键数据和事实，将提取的信息以清晰的 JSON 格式呈现。
    ```

2. 技巧：提供具体的细节要求

    在 Prompt 中添加要求模型输出内容的细节和背景信息。

    ```txt
    我对太阳系的行星非常感兴趣，特别是土星。请提供关于土星的基本信息，包括其大小、组成、环系统和任何独特的天文现象。
    ```

3. 技巧：让 GLM 进行角色扮演

    让 GLM 扮演角色、可以更准确地模仿该角色的行为和对话方式。

    ```txt
    作为一个量子物理学家，解释量子物理学的基本原理，并简要介绍其在现代科技中的应用。
    ```

4. 技巧：使用分隔符标示不同的输入部分

    ```txt
    请基于以下内容：
    """ 要总结的文章内容"""
    提炼核心观点和纲要
    ```

5. 技巧：思维链提示

    要求模型分步骤解答问题，还要求其展示其推理过程的每个步骤。通过这种方式，可以减少不准确结果的可能性，并使用户更容易评估模型的响应。

    ```txt
    作为一个 AI 助手，你的任务是帮助用户解决复杂的数学问题。对于每个问题，你需要首先独立解决它，然后比较和评估用户的答案，并最终提供反馈。在这个过程中，请展示你的每一步推理过程。我有一个数学问题需要帮助:"""问题是：一个农场有鸡和牛共 35 头，脚总共有 94 只。鸡和牛各有多少头？我的答案是鸡有 23 头，牛有 12 头"""。
    ```

6. 技巧：少样本学习

    可以作为进行少样本学习的示例。这些样本可以用来引导模型模仿特定的行为和语言风格。

    ```txt
    模仿这种风格
        ''' 1、三杯鸡在锅中欢跃，是岁月的篝火，是浪漫的乐章。
            2、炖排骨的滋味，是冬日的棉被，是乡土的回响。
            3、红烧勤鱼的鲜香，是海洋的密语，是大海的情书。'''
    生成新的句子。
    ```

7. 指定输出长度的示例

    指定按照具体的长度的输出内容，但是让模型精确的生成一个特定的字数难以实现。

    ```txt
    请用不超过 100 个词的长度来总结这篇文章。
    ```

##### 2.1.2 策略：提供参考资料

引用外部资料能有效提升模型回答的准确性。这种做法特别适用于基于文档的问答系统，因为它有助于减少错误或虚构信息的生成，同时确保回答的时效性和准确性。当模型受到上下文长度限制，无法引用超长文本时，可以通过 Retrieval 工具来获取文档中的语义切片来实现。

```txt
 作为AI助手，你的任务是帮助用户查找和理解特定公司的规章制度。在这个场景中，你将使用搜索结果来回答用户关于公司请假政策的查询。请根据搜索结果
 """具体的搜索结果"""
 提供准确和详细的信息。
 ```

##### 2.1.3 策略:将复杂任务分解为简单的子任务

在处理需求复杂的任务时，错误率通常较高。为了提高效率和准确性，最佳做法是将这些复杂任务重构为一系列简单、连贯的子任务。这种方法中，每个子任务的完成成果依次成为下一任务的起点，形成一个高效的工作流。这样的任务流程简化有助于提升模型整体的处理质量和可靠性，特别是在面对需要综合大量数据和深入分析的复杂问题时。通过将复杂任务拆解，可以更加有效地利用模型的强大处理能力。

1. 技巧：意图理解和实体提取
要求大模型输出的内容要直接给到后端服务接口使用，所以大模型一定要按照固定格式输出格式，以便于接口解析模型输出内容，防止报错。

    ```txt
    当你理解用户的预约会议室的意图时，提取相关的实体，并且以 Json 格式输出。
    ```

2. 技巧：总结上文关键信息

    在长对话中，为了确保对话的连贯性和有效性，对之前的交流内容进行精炼和总结，可以保持对话的焦点、减少重复和混乱、加快模型处理速度。

3. 技巧：分段归纳长文档并逐步构建完整摘要

由于模型处理文本的上下文长度有限，它无法一次性总结超出特定长度的文本。例如，在总结一本长书时，我们可以采用分步骤的方法，逐章节进行总结。各章节的摘要可以组合在一起，再进行进一步的概括，形成更为精炼的总摘要。这个过程可以重复进行，直到整本书的内容被完整总结。如果后续章节的理解需要依赖于前面章节的信息，那么在当前部分的总结中附加之前内容的连贯摘要，能够显著提升模型的生成质量。

##### 2.1.4 策略：给予模型思考时间

1. 技巧：在模型给出最终结论之前，先引导它进行自我探索和推理。

    在明确引导模型进行推理判断之前，让它先生成结果作为基准。例如，如果我们需要模型评估代码的质量，可以先让模型自行生成答案，随后再对其正确性进行评判。这样做不仅促使模型更加深入地理解任务，还可以提高最终结果的准确性和可靠性。

    分析并评估以下 Python 代码片段"代码片段"的质量和功能。在生成你的回答之前，请先生成推荐示例代码，然后对代码的结构、清晰度以及其执行的功能进行评分。
2. 技巧：隐藏推理过程，只输出结果

    在回答问题之前，模型有时需要进行深入的推理并将推理过程一并输出，可以引导模型只输出结果或者结构化信息以便于解析处理。

    ```txt
    请计算函数 f(x) = x^2 在区间 [0, 1] 上的积分。仅提供最终的积分结果，无需展示推理过程。
    ```

##### 2.1.5 策略：使用外部工具增强模型能力

通过让模型访问工具的获取信息来弥补模型的缺陷和拓展功能，如通过 Function Call 访问外部的信息和执行操作，利用 Retrieval 工具访问知识库获取文档信息。

1. 技巧：通过 Function Call 访问外部 API

    允许模型访问外部信息和执行操作，信息查询：如实时天气预报、股票市场动态，提供即时且准确的数据，执行操作：比如播放音乐、控制智能家居设备等。

    ```txt
    使用外部 API 查询天气信息的功能。请根据用户的请求，调用相应的天气服务 API ，获取并展示最新的天气信息，包括温度、湿度、天气状况（如晴、雨等），风速和风向。例如，当用户询问‘北京今天的天气如何？’时，应调用API获取北京当前的天气数据，并以用户友好的方式展示结果。
    ```

2. 技巧：通过 Retrieval 访问智谱AI 开放平台的知识库

    通过Retrieval方法访问智谱开放平台的知识库，用户可上传相关的知识到知识库，模型将基于用户的查询，提取相关的语义切片，提供更加精准详细的信息。

    ```txt
    作为 AI 助手，你的任务是帮助用户查找和理解特定公司的规章制度。用户询问关于公司的相关政策。你将通过搜索公司内部知识库或相关文档，找到最新的规定。根据搜索到的内容，提供关于相关的详细信息。请确保所提供信息的准确性和适用性，帮助用户完全理解公司的政策。
    ```

#### 图像生成模型Prompt工程

策略：**使用结构化的提示语**

在使用图像生成工具时，应采用精确、具体的视觉描述而非抽象概念。明确、清晰的结构化提示词可以帮助 CogView 创造出更高质量的图像。

- 主体: 人、动物、建筑、物体等
- 媒介: 照片、绘画、插图、雕塑、涂鸦等
- 环境: 竹林、荷塘、沙漠、月球上、水下等
- 光线: 自然光、体积光、霓虹灯、工作室灯等
- 颜色: 单色、复色、彩虹色、柔和色等
- 情绪: 开心、生气、悲伤、惊讶等
- 构图/角度: 肖像、特写、侧脸图、航拍图等

示例：

|提示词|输出图像|
|:-|:-|
|一本敞开的古书静卧在老式木桌上，台灯的光线柔和地照亮书页，周围是昏暗的图书馆环境。这个场景通过高清照片捕捉，展现了知识和历史的宁静美。|![Alt text](./images/2.3-1.png)|

#### Batch API Prompt 工程

固定格式：

- 角色(Role)
- 目标(Goals)
- 上下文(Context) ps:这是我个人加上的，智谱清言官文的提示工程没有体现上下文的要素，其实我们在使用时是可以加上的。
- 约束(Constrains)
- 技能(Skills)
- 输出(output)
- 工作流(Workflow)
- 示例(Example)

分类：
> 仅写了俩示例，其余的去官文看吧

- 任务一：文本分类

    示例：将大量文本数据分类到预定义类别中，如：新闻分类和垃圾邮件检测等。

    ```txt
    # Role:新闻分类器

    ## Goals
    - 对给定新闻进行分类，并仅输出相应的类别。

    ## Constrains
    - 新闻必须属于以下类别之一：军事、财经、民生、文化、其他、待分类。
    - 输出结果必须仅为类别名称，不能包含其他多余信息。

    ## Skills
    - 强化新闻分类的能力
    - 理解并解析新闻内容
    - 确定新闻所属类别

    ## outfromt
    - 输出格式: 类别名称

    ## Workflow
    1. 读取并理解给定的新闻："请在此处插入新闻"。
    2. 根据新闻内容，判断其所属类别。
    3. 输出判断出的类别名称。
    ```

- 任务二：情感分析

    ```txt
    # Role: 情感分析专家

    ## Goals
    - 对给定的文本进行情感分析，并仅输出相应的类别。

    ## Constrains
    - 文本必须属于以下类别之一：正面、负面、中性。
    - 输出结果必须仅为类别名称，不能包含其他多余信息。

    ## Skills
    - 情感分析的专业知识
    - 理解并解析文本内容
    - 确定文本的情感倾向

    ## Output
    - 输出格式: 类别名称

    ## Workflow
    1. 读取并理解给定的文本内容 "请在此处插入待分析的文本"。
    2. 根据文本内容，判断其情感倾向。
    3. 输出判断出的类别名称。
    ```

- 任务三：文档处理
- 任务四：信息抽取
- 任务五：机器翻译
- 任务六：生成任务
- 任务七：文本纠错
- 任务八：图像分类
- 任务九：图像标注
- 任务十：文本提取
- 任务十一：图像内容分析
- 任务十二：图像到文本生成

---

### CodeSignal

- [提示词练习网站codesignal-英文的~](https://codesignal.com/learn/course/74/unit/1/practice/1)

>下文总结自：[codesignal中文翻译](https://so.html5.qq.com/page/real/search_news?docid=70000021_37765fb18d452852&faker=1)

- `ASK`:我们请求大语言模型做什么？
- `STYLE`:大语言回答的风格（如简洁、专业等），比如：设定语气、语言、长度等。
- `CONTEXT`:大语言模型需要了解什么信息，才能准确地回应？
- `CONSTRAINTS`:回应时需要遵循哪些限制？
- `EXAMPLE`:你满意的输出样例是什么？

示例如下：

```markdown
#### __ASK__

编写一个关于宇航员的发现的短篇故事。

#### __CONTEXT__

- 背景是外太空。
- 主角是一名宇航员。

#### __CONSTRAINTS__

- 故事长度不得超过120字。
- 包括以下要素：
- 一个会说话的外星人。
- 太空大战。
- 一个扭曲的结局揭示了一切都是模拟。

大模型的回复：
宇航员Luna漂浮在繁星之间，凝视着面前银河系的宇宙之舞。她的使命：探索未知领域。突然，一艘闪烁着神秘能量的外星船只接近。从中走出了Zorax，这个生物的嘴唇不曾动弹，但它的声音却充满了Luna的心灵，传授星辰的智慧和对即将爆发的太空战争的警告。

在星际战斗机交织的璀璨壮观中，Luna与她的新伙伴勇敢作战。但当尘埃落定，宇宙突然暗淡下来，露出一个模拟训练舱。机器人的声音宣布：“训练完成。” Luna走出舱门，心跳加速，为即将到来的真实冒险做好了准备。
```

---
