
# 提示工程

提示工程（Prompt Engineering）是通过设计和优化输入文本（提示词）来引导大模型生成高质量、符合预期输出的技术体系。其核心目标是最大化模型的能力，同时控制输出的方向、格式和内容。以下是提示工程的主要技术分类及具体方法：

## **一、基础提示技术**

### 1. **清晰指令（Explicit Instructions）**

- **核心思想**：使用明确、具体的动词引导模型执行任务（如“总结”“翻译”“推理”“生成”）。  
- **关键技巧**：  
  - 指定输出格式（如“用JSON格式列出...”“以markdown表格呈现...”）；  
  - 限定输出长度（如“不超过200字”“分3点回答”）；  
  - 示例：  

    ```text
    请将以下中文翻译成英文，并保持专业术语准确性：  
    “大模型的上下文窗口决定了其处理长文本的能力。”
    ```

### 2. **上下文提供（Contextual Information）**

- **作用**：为模型提供背景知识或参考信息，弥补其训练数据之外的实时信息缺失。  
- **应用场景**：  
  - 结合外部知识（如实时数据、专有领域资料）；  
  - 示例：  

    ```text
    根据以下财报数据（2024年Q3营收120亿元，同比增长15%），分析公司业绩增长的主要原因。
    ```

### 3. **格式控制（Format Control）**

- **方法**：使用分隔符（如`<<< >>>`、JSON标记）或结构化符号（如XML、YAML）约束输出格式，便于解析。  
- **示例**：  

  ```text
  请用JSON格式列出北京的5个旅游景点，包含名称和简介：  
  {
    "景点": [
      {"名称": "故宫", "简介": "明清皇家宫殿，世界文化遗产"},
      ...
    ]
  }
  ```

## **二、高级提示技术**

### 1. **思维链提示（Chain of Thought, CoT）**

- **目标**：引导模型分步骤推理，提升复杂问题的解决能力（如数学计算、逻辑推理）。  
- **实现方式**：  
  - 在提示中加入“让我们一步步思考”等引导语；  
  - 示例中间推理过程（少样本CoT）。  
- **示例**：  

  ```text
  问题：小明买了3个苹果，每个4元，又买了2瓶水，每瓶5元，一共花了多少钱？  
  思考过程：首先计算苹果的总价：3×4=12元；然后计算水的总价：2×5=10元；最后相加：12+10=22元。  
  答案：一共花了22元。
  ```

### 2. **少样本提示（Few-Shot Prompting）**

- **方法**：在提示中提供少量示例（Demo），让模型模仿示例的格式和逻辑。  
- **关键要素**：  
  - 示例需与目标任务高度相关，包含“输入-输出”对；  
  - 示例顺序影响模型响应（通常将最佳示例前置）。  
- **示例**：  

  ```text
  [示例1]  
  输入：“今天天气如何？”  
  输出：“今天北京晴，气温18-28℃，适合户外活动。”  

  [示例2]  
  输入：“推荐一部科幻电影”  
  输出：“推荐《星际穿越》，讲述宇航员穿越虫洞的史诗级科幻故事。”  

  [你的问题]  
  输入：“如何学习提示工程？”  
  输出：
  ```

### 3. **零样本提示（Zero-Shot Prompting）**

- **场景**：无需提供示例，直接通过自然语言指令触发模型的泛化能力（依赖模型预训练时的知识）。  
- **技巧**：  
  - 使用“假设你是XX专家”等角色设定；  
  - 结合“请根据常识回答”等限定词。  
- **示例**：  

  ```text
  假设你是一位美食博主，请推荐3道适合夏季的清爽菜品。
  ```

### 4. **检索增强提示（Retrieval-Augmented Prompting）**

- **流程**：先通过外部知识库检索相关信息，再将结果融入提示中，提升回答的准确性和时效性。  
- **工具整合**：  
  - 结合向量数据库（如FAISS）或搜索引擎（如Bing）获取实时数据；  
  - 示例：  

    ```text
    [检索结果：2025年5月全球新能源汽车销量前三位为比亚迪、特斯拉、上汽通用五菱]  
    请分析上述企业销量领先的原因。
    ```

## **三、评估与优化技术**

### 1. **提示评估指标**

- **量化指标**：  
  - 准确率（Accuracy）：如问答任务中答案的正确性；  
  - 相关性（Relevance）：输出与问题的关联度；  
  - 多样性（Diversity）：生成任务中结果的丰富性。  
- **定性评估**：人工检查输出的逻辑连贯性、偏见风险、合规性（如是否涉及敏感内容）。

### 2. **A/B测试（Prompt A/B Testing）**

- **方法**：设计多组提示变体，对比不同提示下的模型输出效果，选择最优版本。  
- **示例**：  
  - 变体A：“写一篇关于人工智能的文章”  
  - 变体B：“写一篇500字的科普文章，解释人工智能如何改变医疗行业”  
  - 通过对比阅读流畅度和信息密度，选择更优提示。

### 3. **反馈循环（Feedback Loop）**

- **迭代流程**：  
  1. 收集用户对模型输出的反馈；  
  2. 分析反馈中的问题（如信息错误、格式混乱）；  
  3. 调整提示词（如补充细节、修正指令）并重新测试。  

## **四、特定场景提示技术**

### 1. **多轮对话提示（Multi-Turn Prompting）**

- **技巧**：  
  - 维护对话历史上下文（如使用`对话记录：[用户问题1→模型回答1；用户问题2→模型回答2]`）；  
  - 通过追问引导模型深入分析（如“能否进一步解释这个观点？”）。  

### 2. **角色扮演提示（Role-Playing Prompting）**

- **应用**：指定模型扮演特定角色（如医生、律师、虚拟助手），并遵循角色的专业规范和语气。  
- **示例**：  

  ```text
  你现在是一名心理咨询师，请以温暖、共情的语气回应用户的焦虑情绪。  
  用户：“最近工作压力很大，总是失眠。”
  ```

### 3. **对抗性提示防御（Adversarial Prompt Mitigation）**

- **目标**：防止模型生成有害内容（如偏见、虚假信息）。  
- **方法**：  
  - 在提示中加入安全约束（如“请避免任何歧视性表述”）；  
  - 使用系统提示（System Prompt）设定模型的价值观和行为边界：  

    ```text
    [系统提示]：你是一个遵守伦理规范的AI，回答需符合法律法规，拒绝生成暴力、仇恨或误导性内容。
    ```

## **五、提示工程的关键原则**

1. **明确性优先**：避免模糊指令（如“写点东西”→“写一篇200字的科技新闻短评”）；  
2. **分层引导**：复杂任务拆分为子步骤（如“先分析原因，再提出建议”）；  
3. **实验迭代**：通过多次测试优化提示，不同模型可能需要差异化提示策略；  
4. **理解模型限制**：注意上下文长度限制（如GPT-4默认8K词元）、知识截止日期（如模型训练数据的时间范围）。

## **总结：提示工程的技术图谱**

| **技术类别**       | **核心方法**                          | **典型工具/场景**                |  
|--------------------|---------------------------------------|----------------------------------|  
| 基础提示           | 清晰指令、上下文、格式控制            | 日常问答、结构化数据生成         |  
| 高级推理           | 思维链、少样本/零样本提示            | 数学题解答、逻辑推理             |  
| 知识增强           | 检索提示、外部数据整合                | 实时资讯分析、专业领域问答       |  
| 交互优化           | 多轮对话、角色扮演、反馈循环          | 客服机器人、虚拟角色互动         |  
| 安全控制           | 对抗性提示防御、系统提示约束          | 内容合规审查、伦理风险规避       |  

提示工程是一门兼具科学性与创造性的技能，需结合模型特性、任务目标和用户需求灵活调整。通过合理设计提示，即使是相同的模型也能展现出截然不同的能力边界。
