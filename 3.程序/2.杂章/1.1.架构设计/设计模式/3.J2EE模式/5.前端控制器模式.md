# 前端控制器模式

前端控制器模式（Front Controller Pattern）是用来提供一个集中的请求处理机制，所有的请求都将由一个单一的处理程序处理。该处理程序可以做认证/授权/记录日志，或者跟踪请求，然后把请求传给相应的处理程序。这种模式通常用于Web应用程序中，作为请求的单一入口点，有助于简化请求的处理流程。

类型：J2EE设计模式

目的：使用一个中心控制器（或处理器）来转发客户端请求到适当的处理程序，解决Web应用程序中请求处理分散的问题，提供统一的请求处理入口。

## 结构

包含的几个主要角色：

- **前端控制器（Front Controller）**：作为请求的单一入口点，负责接收请求并决定如何处理。
- **处理程序（Handler）**：实际执行请求处理的组件。
- **视图（View）**：用于呈现处理程序生成的响应。
- **处理程序映射（Handler Mapping）（可选）**：将请求映射到相应的处理程序。
- **客户端（Client）（可选）**：发出请求的Web浏览器或API客户端。

## 适用场景

- 当需要一个集中的请求处理入口点时。
- 当希望简化请求的分发和处理流程时。
- 当需要在请求处理过程中实现公共逻辑时。

## 优缺点

- 优点
  - 统一请求处理：所有请求通过一个入口点进行处理，简化了请求分发，减少了代码重复。
  - 公共逻辑集中：可以在前端控制器中实现日志记录、安全控制等公共逻辑。
  - 扩展性：新增请求处理器时，只需在前端控制器中注册，无需修改其他代码。
- 缺点
  - 可能成为性能瓶颈：所有请求都通过前端控制器，可能影响性能。

## 注意事项

- 确保前端控制器不会由于集中处理所有请求而成为性能瓶颈。

## 示例

```java
// 请求接口
interface Request {
    String getURI();
}

// 响应接口
interface Response {
    void send(String message);
}

// 前端控制器
class FrontController {
    private Map<String, Controller> controllerMap = new HashMap<>();

    public void register(String uri, Controller controller) {
        controllerMap.put(uri, controller);
    }

    public void handleRequest(Request request, Response response) {
        String uri = request.getURI();
        Controller controller = controllerMap.get(uri);
        if (controller != null) {
            controller.process(request, response);
        } else {
            response.send("404 Not Found");
        }
    }
}

// 控制器接口
interface Controller {
    void process(Request request, Response response);
}

// 具体控制器
class HomeController implements Controller {
    @Override
    public void process(Request request, Response response) {
        response.send("Welcome to the Home Page");
    }
}

// 客户端代码
public class FrontControllerPatternDemo {
    public static void main(String[] args) {
        Request request = new Request() {
            @Override
            public String getURI() {
                return "/home";
            }
        };
        Response response = new Response() {
            @Override
            public void send(String message) {
                System.out.println(message);
            }
        };

        FrontController frontController = new FrontController();
        frontController.register("/home", new HomeController());
        frontController.handleRequest(request, response);
    }
}
```
