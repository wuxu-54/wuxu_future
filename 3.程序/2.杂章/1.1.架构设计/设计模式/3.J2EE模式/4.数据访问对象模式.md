# 数据访问对象模式（Data Access Object Pattern）

此模式（也叫 DAO 模式）用于提供对数据源的抽象和简化数据访问。DAO模式充当了数据模型和业务逻辑之间的桥梁，允许开发者通过一致的接口访问不同类型的数据源，如关系数据库、XML文件或内存集合。

类型：J2EE设计模式

目的：将数据访问逻辑从业务逻辑中分离出来，并将数据访问操作封装在一个专用的类中，解决业务逻辑与数据访问逻辑紧密耦合的问题，提高代码的可维护性和可重用性。

## 结构

包含的几个主要角色：

- **DAO接口（DAO Interface）**：声明数据访问和操作的方法。
- **DAO实现（DAO Implementation）**：实现DAO接口，封装对数据源的所有访问逻辑。
- **数据传输对象/数据模型（Data Transfer Object, DTO）（可选）**：封装从数据源检索的数据，用于业务逻辑层与数据访问层之间的数据传输。
- **业务逻辑层（Business Logic Layer）**：使用DAO接口与数据源交互，不直接依赖于数据访问的具体实现。
- **数据源/数据访问技术（Data Source）**：数据库或其他持久化存储，DAO实现与之交互以存取数据。

## 适用场景

- 当需要简化数据访问并将其与业务逻辑分离时。
- 当需要支持多种数据访问技术或数据源时。
- 当需要提高应用程序的可维护性和可测试性时。

## 优缺点

- 优点
  - **分离关注点**：将数据访问逻辑与业务逻辑分离，降低系统的耦合度。
  - **易于维护**：数据访问逻辑集中管理，便于维护和更新。
  - **可扩展性**：更换数据源或修改数据访问逻辑时，不影响业务逻辑层。
- 缺点
  - **可能增加复杂性**：对于简单的应用程序，引入DAO模式可能增加额外的抽象层次。

## 注意事项

- DAO类应该尽量简单，只包含数据访问逻辑，不包含业务逻辑。

## 示例

```java
// DAO接口
interface UserDao {
    User findById(int id);
    List<User> findAll();
    void save(User user);
    void update(User user);
    void delete(User user);
}

// DAO实现类
class UserDaoImpl implements UserDao {
    // 数据访问技术，例如JDBC、Hibernate等
    @Override
    public User findById(int id) {
        // 实现根据ID查找用户的逻辑
    }

    @Override
    public List<User> findAll() {
        // 实现查找所有用户的逻辑
    }

    @Override
    public void save(User user) {
        // 实现保存用户数据的逻辑
    }

    @Override
    public void update(User user) {
        // 实现更新用户数据的逻辑
    }

    @Override
    public void delete(User user) {
        // 实现删除用户数据的逻辑
    }
}

// 数据模型
class User {
    private int id;
    private String name;
    // 其他属性和方法...
}

// 客户端代码
public class UserService {
    private UserDao userDao;

    public UserService() {
        userDao = new UserDaoImpl();
    }

    public User getUserById(int id) {
        return userDao.findById(id);
    }

    // 其他业务逻辑...
}
```
