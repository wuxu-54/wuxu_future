# 任务类型

在Gradle中，任务是构建过程中的基本单元，负责执行特定的操作，如编译源代码、运行测试、打包文件等。Gradle提供了多种任务类型，这些类型由各种插件引入，以满足不同的构建需求。
>简单说是：任务类型就是gradle设定好的任务逻辑，比如设定cope类型，那表示你这个任务可以进行复制操作，会提供相应的api供你使用。

以下是对Gradle任务类型的详细解释：

## 一、内置任务类型

Gradle自带了一些内置的任务类型，这些任务类型提供了常见的构建功能。以下是一些常见的内置任务类型：

1. **Copy任务**：用于复制文件和目录。Copy任务可以配置源路径和目标路径，以及是否要保留文件的属性（如时间戳）等。
2. **Jar任务**：用于创建JAR文件。Jar任务可以配置要包含的文件、是否要压缩、Manifest文件的内容等。
3. **Zip任务**：用于创建ZIP文件。Zip任务与Jar任务类似，但创建的是ZIP格式的压缩文件。
4. **Delete任务**：用于删除文件或目录。Delete任务可以配置要删除的文件或目录的路径。
5. **Exec任务**：用于执行外部命令或脚本。Exec任务可以配置要执行的命令、工作目录、环境变量等。

## 二、插件引入的任务类型

除了内置任务类型外，Gradle还通过插件引入了许多其他任务类型。这些插件通常针对特定的编程语言、框架或工具，提供了相应的构建功能。以下是一些常见的插件及其引入的任务类型：

1. **Java插件**：

    * **Compile任务**：用于编译Java源代码。Compile任务包括`compileJava`（编译主源代码）和`compileTestJava`（编译测试源代码）等。
    * **Test任务**：用于运行Java测试用例。Test任务通常依赖于Compile任务，以确保在测试之前已经编译了源代码。
    * **Build任务**：综合任务，通常包含编译、测试和打包等步骤。Build任务通常是最终的构建目标，如`build`任务。
    * **Jar任务**：虽然Jar任务是内置的，但Java插件通常会为其配置特定的源集和Manifest文件等。

2. **Android插件**：

    * **Assemble任务**：用于构建Android应用的APK或AAB文件。Assemble任务包括`assembleDebug`（构建调试版本的APK）和`assembleRelease`（构建发布版本的APK）等。
    * **Install任务**：用于将构建的APK安装到连接的Android设备上。Install任务包括`installDebug`和`installRelease`等。
    * **Test任务**：用于运行Android应用的测试用例。Test任务通常依赖于Compile任务，并确保在测试之前已经构建了应用。

3. **War插件**：

    * **War任务**：用于创建WAR文件（Web应用程序归档）。War任务通常包含Web应用的所有组件，如Servlet、JSP文件、静态资源等。

## 三、自定义任务类型

除了内置和插件引入的任务类型外，Gradle还允许开发者通过继承`DefaultTask`类或其他任务类型来创建自定义任务。自定义任务可以包含特定的逻辑和配置，以满足项目的特定需求。例如，可以创建一个自定义任务来执行特定的构建步骤、生成报告或执行其他自定义操作。

## 四、任务之间的关系

在Gradle中，任务之间可以定义依赖关系。这意味着一个任务在执行之前，其依赖的任务会先执行。这种依赖关系有助于确保构建过程的正确性和顺序性。例如，编译任务通常依赖于清理任务，以确保在编译之前已经清理了旧的构建输出。

## 五、任务的配置和执行

在Gradle中，任务的配置和执行是通过构建脚本（如`build.gradle`或`build.gradle.kts`）来完成的。构建脚本定义了任务的名称、类型、属性、动作以及依赖关系等。在执行构建时，Gradle会根据构建脚本中的定义来创建和执行任务。

综上所述，Gradle提供了丰富的任务类型来满足不同的构建需求。通过合理配置和执行这些任务，开发者可以高效地构建和管理项目。
