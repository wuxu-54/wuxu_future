# Gradle 领域对象及 API 全量表格汇总

以下表格按领域对象分类，详细列出每个对象的定义、功能及完整 API（含属性、方法、创建/配置方式、预定义对象），确保覆盖所有核心能力。

## 1. Project 对象

| 类别         | 详情                                                                                                                                                                                                 |
|--------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **对象名称** | Project                                                                                                                                                                                                 |
| **定义**     | 代表整个项目的构建配置，每个 `build.gradle` 文件自动转换为 1 个 Project 对象，是构建脚本的核心上下文。                                                                                                   |
| **核心功能** | 统一管理项目属性、任务、依赖、源代码集合等所有构建配置，是操作其他领域对象（如 Task、SourceSet）的入口。                                                                                                 |
| **API 详情** | - **属性**：<br>  1. `name`：项目名称（读写，示例：`project.name = 'MyProject'`）<br>  2. `group`：项目分组（读写，示例：`project.group = 'com.example'`）<br>  3. `version`：项目版本（读写，示例：`project.version = '1.0.0'`）<br>  4. `description`：项目描述（读写，示例：`project.description = 'Demo Project'`）<br>  5. `buildDir`：构建输出目录（读写，默认 `build`，示例：`project.buildDir = 'out'`）<br><br>- **方法**：<br>  1. `task(String name, Closure configureClosure)`：创建并配置 Task（示例：`project.task('myTask') { doLast { println 'Run' } }`）<br>  2. `getTasks()`：获取所有 Task 集合（返回 `TaskContainer`）<br>  3. `getConfigurations()`：获取所有 Configuration 集合（返回 `ConfigurationContainer`）<br>  4. `getExtensions()`：获取所有 Extension 集合（返回 `ExtensionContainer`）<br>  5. `dependencies(Closure configureClosure)`：配置项目依赖（示例：`dependencies { implementation 'org.springframework:spring-core:5.3.20' }`）<br><br>- **预定义关联对象**：<br>  自动关联 `sourceSets`（SourceSet 容器）、`configurations`（Configuration 容器）、`tasks`（Task 容器）。 |

## 2. Task 对象

| 类别         | 详情                                                                                                                                                                                                 |
|--------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **对象名称** | Task                                                                                                                                                                                                  |
| **定义**     | 代表构建过程中的单个原子操作（如编译代码、运行测试、打包），是 Project 对象的子对象。                                                                                                                   |
| **核心功能** | 执行具体构建逻辑，支持配置执行时机（doFirst/doLast）、依赖关系（dependsOn）、执行条件（onlyIf）。                                                                                                       |
| **API 详情** | - **属性**：<br>  1. `name`：任务名称（创建时指定，只读，示例：`myTask.name`）<br>  2. `description`：任务描述（读写，示例：`myTask.description = 'Execute custom logic'`）<br>  3. `group`：任务分组（读写，示例：`myTask.group = 'Custom Tasks'`）<br>  4. `enabled`：是否启用（读写，布尔值，示例：`myTask.enabled = false`）<br>  5. `dependsOn`：依赖的其他任务（读写，示例：`myTask.dependsOn 'clean'`）<br><br>- **方法**：<br>  1. `doLast(Closure action)`：定义任务最后执行逻辑（示例：`myTask.doLast { println 'Task done' }`）<br>  2. `doFirst(Closure action)`：定义任务最先执行逻辑（示例：`myTask.doFirst { println 'Task start' }`）<br>  3. `onlyIf(Closure condition)`：设置执行条件（示例：`myTask.onlyIf { project.version != 'SNAPSHOT' }`）<br>  4. `mustRunAfter(Task... tasks)`：指定任务执行顺序（示例：`myTask.mustRunAfter 'compileJava'`）<br><br>- **创建方式**：<br>  1. 简写：`task myTask { ... }`（隐含调用 Project 的 `task()` 方法）<br>  2. 完整：`project.task('myTask', { doLast { ... } })`。 |

## 3. SourceSet 对象

| 类别         | 详情                                                                                                                                                                                                 |
|--------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **对象名称** | SourceSet                                                                                                                                                                                             |
| **定义**     | 表示项目中一组源代码的集合，用于标准化源代码目录结构（如主代码、测试代码），Java 插件默认创建 `main` 和 `test` 两个 SourceSet。                                                                          |
| **核心功能** | 配置源代码/资源文件的目录路径，管理源代码与编译输出的关联（如指定 Java 目录、资源目录）。                                                                                                               |
| **API 详情** | - **配置容器**：<br>  `sourceSets`：Project 中管理 SourceSet 的容器（通过 `sourceSets { ... }` 配置）<br><br>- **属性**：<br>  1. `java`：Java 源代码配置（返回 `SourceDirectorySet`，示例：`main.java`）<br>  2. `resources`：资源文件配置（返回 `SourceDirectorySet`，示例：`test.resources`）<br>  3. `output`：编译输出配置（含 `classesDirs` 类文件目录、`resourcesDir` 资源输出目录）<br>  4. `compileClasspath`：编译类路径（依赖 Configuration 对象）<br><br>- **方法**：<br>  1. `srcDir(Object dir)`：添加源代码目录（示例：`main.java.srcDir 'src/main/java'`）<br>  2. `setSrcDirs(Iterable<?> dirs)`：批量设置源代码目录（示例：`test.java.setSrcDirs(['src/test/java', 'src/test/extra'])`）<br>  3. `getJava()`：获取 Java 源代码配置（等同于 `java` 属性）<br>  4. `getResources()`：获取资源文件配置（等同于 `resources` 属性）<br><br>- **预定义对象**：<br>  1. `main`：主源代码集合（默认目录：`src/main/java`、`src/main/resources`）<br>  2. `test`：测试源代码集合（默认目录：`src/test/java`、`src/test/resources`）。 |

## 4. NamedDomainObjectContainer

| 类别         | 详情                                                                                                                                                                                                 |
|--------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **对象名称** | NamedDomainObjectContainer<T>                                                                                                                                                                        |
| **定义**     | 通用容器对象，用于管理“具有唯一名称”的领域对象集合（如 SourceSet、Configuration），支持动态创建、查找和配置，避免重复定义。                                                                              |
| **核心功能** | 标准化命名对象的生命周期管理（创建、查找、遍历），为其他领域对象提供统一的容器能力。                                                                                                                   |
| **API 详情** | - **创建方式**：<br>  1. `project.container(Class<T> type)`：创建指定类型的容器（示例：`NamedDomainObjectContainer<SomeType> myObjects = project.container(SomeType)`）<br>  2. `project.container(Class<T> type, Action<? super T> factory)`：带自定义创建逻辑的容器（指定对象默认行为）<br><br>- **方法**：<br>  1. `create(String name)`：创建指定名称的对象（示例：`myObjects.create('objectName')`）<br>  2. `create(String name, Closure configureClosure)`：创建并配置对象（示例：`myObjects.create('objectName') { prop = 'value' }`）<br>  3. `get(String name)`：根据名称获取对象（不存在抛异常，示例：`myObjects.get('objectName')`）<br>  4. `findByName(String name)`：根据名称查找对象（不存在返回 `null`，示例：`myObjects.findByName('objectName')`）<br>  5. `each(Closure action)`：遍历所有对象（示例：`myObjects.each { println it.name }`）<br><br>- **属性**：<br>  1. `names`：获取所有对象名称集合（返回 `SortedSet<String>`）<br>  2. `isEmpty()`：判断容器是否为空（返回布尔值）。 |

## 5. Plugin 插件对象

| 类别         | 详情                                                                                                                                                                                                 |
|--------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **对象名称** | Plugin                                                                                                                                                                                                 |
| **定义**     | 扩展 Gradle 功能的组件，可向 Project 注入属性、任务、领域对象，封装通用构建逻辑（如 Java 编译、Spring Boot 打包）。                                                                                    |
| **核心功能** | 标准化构建流程，减少重复配置（如 Java 插件自动添加编译/测试任务，Spring Boot 插件自动添加打包任务）。                                                                                                   |
| **API 详情** | - **应用方法**：<br>  1. 短格式：`apply plugin: '插件ID'`（示例：`apply plugin: 'java'`）<br>  2. 类格式：`apply(plugin: Class<? extends Plugin<Project>>)`（示例：`apply plugin: JavaPlugin`）<br>  3. 推荐格式（Gradle 3.0+）：`plugins { id '插件ID' version '插件版本' }`（示例：`plugins { id 'org.springframework.boot' version '2.7.0' }`）<br><br>- **插件注入内容（示例）**：<br>  1. **Java 插件**：注入 `sourceSets` 容器、`compileJava` 任务、`test` 任务、`jar` 任务<br>  2. **Spring Boot 插件**：注入 `springBoot` 扩展对象、`bootJar` 任务、`bootRun` 任务<br>  3. **War 插件**：注入 `war` 任务、`providedCompile` 配置。 |

## 6. Extension 扩展对象

| 类别         | 详情                                                                                                                                                                                                 |
|--------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **对象名称** | Extension                                                                                                                                                                                             |
| **定义**     | 插件向 Project 注入的自定义配置对象，用于提供插件专属的配置选项（如 Spring Boot 主类配置）。                                                                                                            |
| **核心功能** | 隔离插件配置逻辑，让用户通过统一格式配置插件（避免直接操作插件内部任务/属性）。                                                                                                                       |
| **API 详情** | - **获取方式**：<br>  1. 直接访问：`project.扩展名称`（Project 自动代理，示例：`springBoot { ... }`）<br>  2. 显式获取：`project.getExtensions().getByName(String name)`（示例：`def springBootExt = project.extensions.getByName('springBoot')`）<br><br>- **常见扩展对象及属性（示例）**：<br>  1. **Spring Boot 插件：`springBoot` 扩展**：<br>     - `mainClass`：指定主类（示例：`springBoot { mainClass = 'com.example.Main' }`）<br>     - `version`：指定 Spring Boot 版本（示例：`springBoot { version = '2.7.0' }`）<br>     - `buildInfo`：配置构建信息（示例：`springBoot.buildInfo { properties { artifact = 'demo' } }`）<br>  2. **Java 插件：`java` 扩展**：<br>     - `sourceCompatibility`：源代码兼容版本（示例：`java { sourceCompatibility = JavaVersion.VERSION_11 }`）<br>     - `targetCompatibility`：编译目标版本（示例：`java { targetCompatibility = JavaVersion.VERSION_11 }`）<br><br>- **自定义扩展创建（插件开发）**：<br>  `project.getExtensions().create(String name, Class<T> type)`（示例：`project.extensions.create('myExt', MyExtension.class)`）。 |

## 7. Configuration 对象

| 类别         | 详情                                                                                                                                                                                                 |
|--------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **对象名称** | Configuration                                                                                                                                                                                         |
| **定义**     | 用于管理项目的依赖范围和依赖行为（如编译依赖、测试依赖），是依赖管理的核心对象。                                                                                                                     |
| **核心功能** | 定义依赖用途（如 `implementation` 用于编译期）、控制依赖传递性（`transitive`）、管理依赖解析规则（如冲突解决）。                                                                                       |
| **API 详情** | - **配置容器**：<br>  `configurations`：Project 中管理 Configuration 的容器（通过 `configurations { ... }` 配置）<br><br>- **属性**：<br>  1. `extend`：是否继承其他配置依赖（布尔值，示例：`compile { extend true }`）<br>  2. `transitive`：是否允许依赖传递（布尔值，示例：`configurations.compile.transitive = false`）<br>  3. `visible`：对其他项目是否可见（布尔值，控制多项目依赖可见性）<br>  4. `resolvable`：是否可解析（布尔值，可解析配置才能获取依赖文件，如 `runtimeClasspath`）<br><br>- **方法**：<br>  1. `extendsFrom(Configuration... configurations)`：指定继承的配置（示例：`configurations.testCompile.extendsFrom configurations.compile`）<br>  2. `exclude(Map<String, String> exclude)`：排除指定依赖（示例：`configurations.compile.exclude group: 'org.slf4j', module: 'slf4j-log4j12'`）<br>  3. `resolve()`：解析依赖并返回文件集合（示例：`def jars = configurations.compile.resolve()`）<br>  4. `resolutionStrategy(Closure configureClosure)`：配置依赖解析策略（示例：`configurations.compile.resolutionStrategy { failOnVersionConflict() }`）<br><br>- **预定义配置（常见）**：<br>  1. `implementation`（新）/ `compile`（旧）：主代码编译依赖<br>  2. `testImplementation`（新）/ `testCompile`（旧）：测试代码编译依赖<br>  3. `runtimeOnly`（新）/ `runtime`（旧）：运行期依赖（不参与编译）<br>  4. `testRuntimeOnly`（新）/ `testRuntime`（旧）：测试运行期依赖<br>  5. `providedCompile`：编译期需要、运行期由环境提供的依赖（如 Servlet API）。 |

## 8. Settings 对象

| 类别         | 详情                                                                                                                                                                                                 |
|--------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **对象名称** | Settings                                                                                                                                                                                              |
| **定义**     | 由 `settings.gradle` 文件转换而来，仅用于多项目构建，配置根项目与子项目的关系。                                                                                                                       |
| **核心功能** | 指定子项目的包含/排除、配置根项目目录、设置构建脚本查找路径。                                                                                                                                         |
| **API 详情** | - **属性**：<br>  1. `gradle`：当前 Gradle 构建实例（返回 `Gradle` 对象，示例：`settings.gradle.version`）<br>  2. `rootProject`：根项目对象（返回 `Project` 对象，示例：`settings.rootProject.name = 'root'`）<br>  3. `rootProjectDir`：根项目目录（返回 `File` 对象，只读，示例：`settings.rootProjectDir`）<br>  4. `buildScriptSource`：构建脚本来源（返回 `BuildScriptSource`，控制 `settings.gradle` 查找路径）<br><br>- **方法**：<br>  1. `include(String... projectPaths)`：包含子项目（路径格式：`':子项目名'`，示例：`include ':module1', ':module2'`）<br>  2. `includeFlat(String... projectNames)`：包含同级目录子项目（无需路径前缀，示例：`includeFlat 'module3'`）<br>  3. `exclude(String... projectPaths)`：排除已包含子项目（示例：`exclude ':module2'`）<br>  4. `project(String path, Closure configureClosure)`：配置指定子项目（示例：`project(':module1') { description = 'Module 1' }`）<br>  5. `setProjectDir(File dir)`：设置根项目目录（示例：`settings.rootProject.setProjectDir(new File('/path/to/root'))`）。 |

## 9. 其他核心领域对象

### 9.1 Dependency 对象

| 类别         | 详情                                                                                                                                                                                                 |
|--------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **对象名称** | Dependency                                                                                                                                                                                            |
| **定义**     | 表示项目的单个依赖项（如第三方库、子项目、本地 JAR），是 Configuration 的组成单元。                                                                                                                   |
| **核心功能** | 描述依赖的坐标（group/name/version）、类型（jar/war）、范围（编译/测试）及传递排除规则。                                                                                                               |
| **API 详情** | - **创建方式（通过 `dependencies` 块）**：<br>  1. 模块依赖：`implementation 'groupId:artifactId:version'`（示例：`implementation 'org.springframework:spring-core:5.3.20'`）<br>  2. 项目依赖：`implementation project(':子项目名')`（示例：`implementation project(':module1')`）<br>  3. 文件依赖：`implementation files('路径1', '路径2')`（示例：`implementation files('lib/demo.jar')`）<br>  4. 动态版本依赖：`implementation 'groupId:artifactId:版本通配符'`（示例：`implementation 'org.springframework:spring-core:5.3.+'`）<br><br>- **属性**：<br>  1. `group`：依赖分组 ID（示例：`dependency.group`）<br>  2. `name`：依赖 artifact ID（示例：`dependency.name`）<br>  3. `version`：依赖版本（示例：`dependency.version`）<br>  4. `type`：依赖类型（如 `jar`/`war`，示例：`dependency.type`）<br><br>- **方法**：<br>  1. `exclude(Map<String, String> exclude)`：排除传递依赖（示例：`implementation('org.springframework:spring-core:5.3.20') { exclude group: 'commons-logging' }`）<br>  2. `setForce(boolean force)`：强制使用当前版本（忽略冲突，示例：`implementation('org.slf4j:slf4j-api:1.7.36') { force = true }`）。 |

### 9.2 Repository 对象

| 类别         | 详情                                                                                                                                                                                                 |
|--------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **对象名称** | Repository                                                                                                                                                                                            |
| **定义**     | 用于配置依赖项的存储库（仓库），Gradle 从仓库中下载依赖文件（如 JAR）。                                                                                                                                |
| **核心功能** | 指定依赖的查找来源（如 Maven 中央仓库、本地仓库、私有仓库），控制依赖下载优先级。                                                                                                                     |
| **API 详情** | - **配置容器**：<br>  `repositories`：Project 中管理 Repository 的容器（通过 `repositories { ... }` 配置）<br><br>- **常见仓库类型及配置方法**：<br>  1. Maven 中央仓库：`mavenCentral()`（示例：`repositories { mavenCentral() }`）<br>  2. 本地 Maven 仓库：`mavenLocal()`（使用 `~/.m2/repository` 目录）<br>  3. 自定义 Maven 仓库：`maven { url '仓库地址'; 认证配置 }`（示例：`maven { url 'https://repo.example.com/maven2'; credentials { username 'admin'; password '123456' } }`）<br>  4. Ivy 仓库：`ivy { url '仓库地址' }`（示例：`ivy { url 'https://repo.example.com/ivy' }`）<br>  5. 平面目录仓库：`flatDir { dirs '目录1', '目录2' }`（示例：`flatDir { dirs 'lib' }`，不支持依赖传递）<br><br>- **仓库优先级**：<br>  Gradle 按 `repositories` 块中定义的顺序查找依赖，优先使用靠前的仓库。 |
