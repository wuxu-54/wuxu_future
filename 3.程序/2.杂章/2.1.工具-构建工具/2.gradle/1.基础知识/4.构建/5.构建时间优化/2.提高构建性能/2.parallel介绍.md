# parallel

Gradle的`--parallel`选项用于并行执行属于不同子项目的任务，这样可以显著提高多项目构建的性能，尤其是在多核CPU的系统上。以下是`--parallel`选项的一些详细作用和注意事项：

## 作用

1. **提高构建速度**：通过并行执行不同项目中的任务，可以减少总体构建时间，特别是在大型多模块项目中。

2. **优化CPU利用率**：`--parallel`允许Gradle同时在多个CPU核心上执行任务，充分利用系统资源。

3. **自动项目配置**：Gradle 4.0及以上版本引入了自动项目配置（Auto Project Configuration）和配置缓存（Configuration Cache）等特性，这些特性可以进一步提高并行构建的性能。

## 使用方法

要启用并行执行，可以在命令行中添加`--parallel`选项，例如：

```shell
gradle build --parallel
```

## 注意事项

1. **任务依赖性**：只有没有依赖的任务才能并行执行。如果任务之间存在依赖关系，它们不能并行执行，因为依赖关系决定了任务的执行顺序。

2. **资源竞争**：在并行化构建中，要注意避免资源竞争和死锁，尤其是在访问共享资源时。

3. **日志输出**：并行执行的任务可能会同时输出日志，导致日志信息交错，难以阅读。

4. **配置并行构建**：除了在命令行中使用`--parallel`选项外，还可以在项目的`gradle.properties`文件中设置以下属性来默认启用并行构建：

```properties
org.gradle.parallel=true
```

这样，每次运行Gradle命令时都会自动并行执行任务。

通过合理配置并行化参数和利用Gradle的新特性，可以进一步优化构建性能。使用`--parallel`选项时，需要确保任务之间没有依赖关系，并且要注意资源管理和日志输出的可读性。
