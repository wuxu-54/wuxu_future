# 使用介绍

Gradle 提供了一个灵活的日志系统，允许用户控制构建过程中的输出详细程度和格式。以下是关于如何配置和理解Gradle日志输出的一些关键点：

## 日志级别

Gradle支持以下日志级别，按输出信息的详细程度递增：

1. **ERROR**：仅记录错误信息。
2. **WARNING**：记录错误和警告信息。
3. **LIFECYCLE**：记录生命周期事件，如任务的执行。
4. **INFO**：记录常规信息，包括任务执行和配置详情。
5. **DEBUG**：记录更详细的调试信息。
6. **TRACE**（实验性）：记录最详细的信息，包括任务执行的堆栈跟踪。
7. **QUIET**：减少输出的日志信息，只显示错误和一些关键信息，这对于减少日志输出的噪音非常有用

## 通过命令行配置日志级别

在命令行中运行Gradle任务时，可以使用 `-i`、 `-d` 或 `--info`、 `--debug` 标志来调整日志级别：
>使用 -q 或者 --quiet 选项可以设置日志级别为 QUIET。

```shell
# 设置为INFO级别
gradle build --info

# 设置为DEBUG级别
gradle build --debug
```

## 在 `gradle.properties` 中配置日志级别

可以在项目的 `gradle.properties` 文件中设置默认的日志级别：

```properties
# 设置默认日志级别为INFO
org.gradle.logging.level=INFO
```

## 编程方式配置日志级别

在Gradle构建脚本中，可以使用 `LoggingManager` 来配置日志级别：

```groovy
// 在build.gradle中配置日志级别
gradle.startParameter.logLevel = LogLevel.INFO
```

## 配置日志输出

除了设置日志级别外，还可以配置日志的输出目的地，如控制台、文件等：

```properties
# 将日志输出到文件
org.gradle.logging.output=file
# 设置日志文件的路径
org.gradle.logging.file=my-gradle-build.log
```

## 输入自己的日志

通常情况下都是使用 `print` 系列方法，把日志输出到控制台（它把Gradle定向为 QUIET 级别日志）：

```groovy
println '输出一段日志信息'
```

除了 `print` 系列之外，还可以使用内置的 `logger` 更灵活的控制输出不同级别的日志：

```groovy
task log(){
  doLast{
    logger.quiet('quiet 重要消息')
    logger.error('error 错误消息')
    logger.lifecycle('lifecycle 进度消息')
    logger.warn('warn 警告消息')
    logger.info('info 消息 信息')
    logger.debug('debug 调试信息')
  }
}
```

新建一个 `logger.gradle` 添加一个 `log` Task 运行 `log` Task：

```shell
gradle -b logger.gradle log
```

如果使用 `-d` 的话，就是下面这种了：

```shell
gradle -b logger.gradle -d log
```

## Gradle 日志示例

以下是一些Gradle日志的示例：

1. **使用 `stdout` 写入日志消息**：

   ```groovy
   println("A message which is logged at QUIET level")
   ```

2. **编写自己的日志消息**：

   ```groovy
   logger.quiet("An info log message which is always logged.")
   logger.error("An error log message.")
   logger.warn("A warning log message.")
   logger.lifecycle("A lifecycle info log message.")
   logger.info("An info log message.")
   logger.debug("A debug log message.")
   logger.trace("A trace log message.") // Gradle never logs TRACE level logs
   ```

3. **使用占位符编写日志消息**：

   ```groovy
   logger.info("A {} log message", "info")
   ```

4. **使用 SLF4J 写入日志消息**：

   ```groovy
   import org.slf4j.LoggerFactory
   def slf4jLogger = LoggerFactory.getLogger("some-logger")
   slf4jLogger.info("An info log message logged using SLF4j")
   ```

这些示例展示了如何在Gradle中配置和使用日志，帮助你更好地理解和控制构建过程中的日志输出。
