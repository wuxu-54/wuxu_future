# 本地Maven仓库

要配置Gradle以使用本地Maven仓库（mavenLocal），你可以按照以下步骤操作：

## 1. 在`build.gradle`中添加`mavenLocal()`配置

在你的Gradle项目的`build.gradle`文件中，你需要在`repositories`块中添加`mavenLocal()`，这样Gradle就会优先从本地Maven仓库中查找依赖。配置如下所示：

```groovy
repositories {
    mavenLocal() // 先从本地Maven仓库寻找依赖的jar包
    mavenCentral() // 如果本地没有，则从Maven中央仓库下载
}
```

这样配置后，Gradle会先检查本地Maven仓库是否存在所需的依赖，如果存在就直接使用，否则会从远程仓库下载。

## 2. 发布插件到本地Maven仓库

如果你开发的是Gradle插件，并希望将其发布到本地Maven仓库，可以使用`publishToMavenLocal`任务。首先，确保你的插件已经正确实现并配置了`gradlePlugin`块。然后，执行以下命令：

```shell
gradle publishToMavenLocal
```

这会将你的插件打包并发布到本地Maven仓库，你可以在`~/.m2/repository`目录下查看是否成功上传。

## 3. 在其他项目中使用插件

要在其他Gradle项目中使用你刚刚发布的插件，需要在`build.gradle`文件中添加对本地Maven仓库的引用，并添加插件依赖：

```groovy
buildscript {
    repositories {
        mavenLocal() // 指定使用本地Maven仓库
    }
    dependencies {
        classpath 'com.xingfeng:firstplugin:1.0.0' // 使用插件的groupId、artifactId和版本号
    }
}
```

然后，在项目的`build.gradle`中应用插件：

```groovy
apply plugin: 'com.xingfeng.firstplugin'
```

执行`gradle build`命令，如果配置正确，你应该能看到插件的效果，例如打印出"hello world"字样。

## 4. 配置环境变量

有时候，你可能需要配置环境变量`GRADLE_USER_HOME`来指定Gradle下载依赖的存储位置，或者配置`M2_HOME`来指定Maven的安装路径，这样Gradle可以正确地识别和使用本地Maven仓库。

通过以上步骤，你可以成功地配置Gradle使用本地Maven仓库，并发布及使用Gradle插件。
