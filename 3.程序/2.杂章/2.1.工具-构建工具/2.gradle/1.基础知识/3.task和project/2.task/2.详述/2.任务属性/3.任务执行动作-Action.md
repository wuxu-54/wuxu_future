# 任务执行动作-Action

在 Gradle 中，任务（Task）的执行动作（Action）是任务执行时的具体操作。一个任务可以有多个执行动作，这些动作按照特定的顺序执行。以下是关于任务属性中 Action 的详解和示例：

## 详解

1. **Action 的作用**：
   Action 是任务中的具体执行代码块，它定义了任务在执行时要做的事情。在 Gradle 中，可以通过 `doFirst` 和 `doLast` 方法来添加 Action。

2. **doFirst 和 doLast**：
   - `doFirst`：在任务执行时最先执行的操作。可以添加多个 `doFirst`，它们将按照添加的逆序执行（后添加的先执行）。
   - `doLast`：在任务执行时最后执行的操作。可以添加多个 `doLast`，它们将按照添加的顺序执行（先添加的先执行）。

3. **@TaskAction 注解**：
   - 当创建自定义任务类时，可以使用 `@TaskAction` 注解来标记任务执行时的动作。被 `@TaskAction` 注解的方法将作为任务的执行动作。

## 示例

1. **使用 doLast 添加 Action**：

   ```groovy
   tasks.register('hello') {
       doLast {
           println 'Hello world!'
       }
   }
   ```

   这个示例创建了一个名为 `hello` 的任务，并使用 `doLast` 添加了一个打印 "Hello world!" 的 Action。

2. **使用 doFirst 和 doLast 添加多个 Action**：

   ```groovy
   tasks.register("yechaoa") {
       it.doFirst {
           println("${it.name} = doFirst 111")
       }
       it.doFirst {
           println("${it.name} = doFirst 222")
       }
       println("Task Name = " + it.name)
       it.doLast {
           println("${it.name} = doLast 111")
       }
       it.doLast {
           println("${it.name} = doLast 222")
       }
   }
   ```

   执行结果将显示两个 `doFirst` 动作按逆序执行，两个 `doLast` 动作按顺序执行。

3. **自定义任务类使用 @TaskAction**：

   ```kotlin
   open class MyTask: DefaultTask() {
       @TaskAction
       fun action() {
           println("$name action")
       }
   }
   tasks.register("taskA", MyTask::class)
   ```

   这个示例定义了一个自定义任务类 `MyTask`，并使用 `@TaskAction` 注解标记了一个方法作为任务的执行动作。然后在 build script 中注册了这个任务。

通过这些示例，你可以看到如何在 Gradle 任务中定义和使用 Action。这些 Action 定义了任务的具体行为，是 Gradle 构建过程中的基本执行单元。
