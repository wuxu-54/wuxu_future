# 任务类型的示例

以下是对Gradle任务类型及其配置的详细示例：

## 一、内置任务类型示例

1. **Copy任务**

    ```groovy
    task copyFiles(type: Copy) {
        from 'src/main/resources'
        into 'build/resources/main'
        include '**/*.txt'
        exclude 'secret.txt'
    }
    ```

    这个Copy任务将`src/main/resources`目录下的所有`.txt`文件（除了`secret.txt`）复制到`build/resources/main`目录中。

2. **Zip任务**

    ```groovy
    task zipFiles(type: Zip) {
        from 'src/main/resources'
        include '*.txt'
        exclude 'secret.txt'
        destinationDir = file('build')
        compressionLevel = 9
    }
    ```

    这个Zip任务将`src/main/resources`目录下的所有`.txt`文件（除了`secret.txt`）打包成一个ZIP文件，并保存到`build`目录中，压缩级别为9。

3. **Delete任务**

    ```groovy
    task deleteBuildDir(type: Delete) {
        delete buildDir
    }
    ```

    这个Delete任务将删除`build`目录及其所有内容。

4. **Exec任务**

    ```groovy
    task executeCommand(type: Exec) {
        commandLine 'echo', 'Hello, Gradle!'
    }
    ```

    这个Exec任务将在命令行中执行`echo Hello, Gradle!`命令。

## 二、插件引入的任务类型示例

1. **Java插件的Compile任务**

    ```groovy
    plugins {
        id 'java'
    }

    tasks.named('compileJava') {
        options.encoding = 'UTF-8'
    }
    ```

    这个示例展示了如何配置Java插件的`compileJava`任务，设置其编码为`UTF-8`。

2. **Android插件的Assemble任务**

    ```groovy
    plugins {
        id 'com.android.application'
    }

    android {
        // Android插件的配置
    }

    tasks.register('assembleCustom') {
        dependsOn 'assembleDebug'
        doLast {
            println 'Custom assemble task executed after assembleDebug.'
        }
    }
    ```

    这个示例展示了如何为Android应用创建一个自定义的Assemble任务`assembleCustom`，它依赖于`assembleDebug`任务，并在其执行后打印一条消息。

## 三、自定义任务类型示例

```groovy
class CustomTask extends DefaultTask {
    @TaskAction
    def customAction() {
        println 'Executing custom task action.'
    }
}

tasks.register('customTask', CustomTask)
```

这个示例展示了如何创建一个自定义任务类型`CustomTask`，并在其中定义一个任务动作`customAction`。然后，通过`tasks.register`方法注册一个名为`customTask`的任务，类型为`CustomTask`。

## 四、任务依赖关系示例

```groovy
tasks.register('taskA') {
    doLast {
        println 'Task A executed.'
    }
}

tasks.register('taskB') {
    dependsOn 'taskA'
    doLast {
        println 'Task B executed after Task A.'
    }
}
```

这个示例展示了如何定义两个任务`taskA`和`taskB`，并设置`taskB`依赖于`taskA`。在执行`taskB`时，Gradle会先执行`taskA`，然后再执行`taskB`。

## 五、任务执行示例

在命令行中执行Gradle任务时，可以使用以下格式：

```bash
./gradlew taskName
```

其中`taskName`是你要执行的任务的名称。例如，要执行上面定义的`customTask`任务，可以使用以下命令：

```bash
./gradlew customTask
```

如果任务名称是唯一的（即没有其他任务名称与其前缀相同），则可以只输入任务名称的前缀来执行它。例如，要执行`taskB`，可以使用以下命令之一：

```bash
./gradlew taskB
./gradlew tB
```

（注意：在实际使用中，应避免使用可能与其他任务名称冲突的前缀。）

以上示例展示了Gradle任务类型的配置、执行以及依赖关系的定义方法。通过合理配置和执行这些任务，开发者可以高效地构建和管理项目。
