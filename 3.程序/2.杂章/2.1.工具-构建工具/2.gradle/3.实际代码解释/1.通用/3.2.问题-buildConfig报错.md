# buildConfig报错

问题：

```txt
* What went wrong:
A problem occurred configuring project ':app'.
>                         Build Type 'debug' contains custom BuildConfig fields, but the feature is disabled.
                          To enable the feature, add the following to your module-level build.gradle:
  `android.buildFeatures.buildConfig true`
```

## 答案

这个错误提示表明你在 Android 项目中使用了自定义的 `BuildConfig` 字段，但未启用相应的构建功能。`BuildConfig` 是 Android 自动生成的类，用于存储构建时的配置信息，例如 API 密钥或调试标志。

### **错误原因**

在你的 `build.gradle` 文件中，可能有类似这样的代码：

```kotlin
android {
    buildTypes {
        debug {
            buildConfigField("String", "API_KEY", "\"debug_key\"") // 自定义字段
        }
        release {
            buildConfigField("String", "API_KEY", "\"release_key\"") // 自定义字段
        }
    }
}
```

但没有启用 `buildConfig` 功能，导致构建失败。

### **解决方案**

在你的 **module-level `build.gradle`** 文件中（通常是 `app/build.gradle.kts` 或 `app/build.gradle`），添加以下配置：

```kotlin
// app/build.gradle.kts (Kotlin DSL)
android {
    buildFeatures {
        buildConfig = true // 启用 BuildConfig 功能
    }
}
```

如果你使用的是 **Groovy DSL**，则修改为：

```groovy
// app/build.gradle (Groovy DSL)
android {
    buildFeatures {
        buildConfig true
    }
}
```

### **验证配置**

启用后，你可以在代码中访问自定义的 `BuildConfig` 字段：

```kotlin
// 使用自定义的 API_KEY
val apiKey = BuildConfig.API_KEY
```

### **注意事项**

1. **敏感信息**：避免在 `BuildConfig` 中存储敏感信息（如密码），因为这些值会被编译到 APK 中。
2. **Gradle 版本**：确保使用的是较新版本的 Gradle（7.0+），旧版本可能需要不同的配置方式。
3. **同步项目**：修改后，点击 Android Studio 中的 **Sync Now** 或运行 `./gradlew sync` 命令。

通过上述配置，你可以正常使用自定义的 `BuildConfig` 字段。
