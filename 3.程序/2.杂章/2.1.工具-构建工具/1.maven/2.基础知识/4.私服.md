# 私服

要搭建一个 Maven 私服，你可以选择使用 Nexus Repository Manager OSS 或者 Artifactory，这两种是目前最流行的解决方案。以下是搭建和使用 Maven 私服的基本步骤：

1. **下载和安装 Nexus Repository Manager OSS**：
   - 从 Sonatype 官网下载 Nexus Repository Manager OSS：[Sonatype Nexus Repository OSS](https://www.sonatype.com/nexus/repository-oss)。
   - 按照提供的安装说明进行安装。

2. **启动 Nexus**：
   - 使用安装目录下的 `bin` 文件夹中的脚本启动 Nexus。

3. **访问 Nexus**：
   - 打开浏览器，访问 `http://localhost:8081`，使用默认的管理员账号（用户名：`admin`，密码：`admin123`）登录。

4. **创建 Maven 仓库**：
   - 在 Nexus 界面中，点击左侧的 "Repositories" 菜单，然后点击 "Create repository"。
   - 选择 "maven2 (hosted)" 作为仓库类型，填写必要的信息，如 "Name" 和 "Blob store"，然后点击 "Create repository"。

5. **配置 Maven 项目**：
   - 更新 Maven `settings.xml` 文件（通常位于 `~/.m2` 目录下），添加私服的配置信息。例如：

     ```xml
     <servers>
       <server>
         <id>nexus</id>
         <username>admin</username>
         <password>admin123</password>
       </server>
     </servers>
     <profiles>
       <profile>
         <repositories>
           <repository>
             <id>nexus</id>
             <url>http://localhost:8081/repository/maven-public/</url>
           </repository>
         </repositories>
       </profile>
     </profiles>
     ```

   - 确保 `<id>` 与 Nexus 中创建的仓库 ID 匹配。

6. **部署和发布构件**：
   - 在项目的 `pom.xml` 文件中，添加 `<distributionManagement>` 部分，指定部署到私服的配置。例如：

     ```xml
     <distributionManagement>
       <repository>
         <id>nexus</id>
         <name>Nexus Release Repository</name>
         <url>http://localhost:8081/repository/maven-releases/</url>
       </repository>
       <snapshotRepository>
         <id>nexus</id>
         <name>Nexus Snapshot Repository</name>
         <url>http://localhost:8081/repository/maven-snapshots/</url>
       </snapshotRepository>
     </distributionManagement>
     ```

   - 使用 Maven 命令 `mvn deploy` 将构件部署到私服。

7. **使用私服中的构件**：
   - 在其他项目的 `pom.xml` 中，配置 `<repositories>` 部分，以便从私服下载构件。例如：

     ```xml
     <repositories>
       <repository>
         <id>nexus</id>
         <url>http://localhost:8081/repository/maven-public/</url>
       </repository>
     </repositories>
     ```

以上步骤提供了一个基本的指南，你可以根据具体的需求进行调整和扩展。例如，你可以配置更多的仓库类型，如代理仓库（用于缓存外部仓库）或组仓库（用于组合多个仓库）。此外，你还可以设置权限管理，以控制对私服的访问。
