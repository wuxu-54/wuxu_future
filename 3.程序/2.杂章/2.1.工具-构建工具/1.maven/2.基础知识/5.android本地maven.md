# Android 本地maven仓库搭建

在Android项目中搭建本地Maven仓库，可以通过设置Gradle脚本来实现。以下是一个简化的例子：

1. 在项目的根目录下创建一个`build.gradle`文件，用于配置本地Maven仓库。

    ```groovy
    //文件位置：项目根目录/build.gradle
    buildscript {
        repositories {
            google()
            jcenter()
        }
        dependencies {
            classpath 'com.android.tools.build:gradle:版本号'
            // 其他依赖...
        }
    }
    
    allprojects {
        repositories {
            google()
            jcenter()
            maven {
                url "文件路径: 你的本地仓库路径"
            }
        }
    }
    
    task clean(type: Delete) {
        delete rootProject.buildDir
    }
    ```

2. 在要发布到本地Maven仓库的模块中的build.gradle文件里添加发布配置。

    ```groovy
    // 文件位置：模块目录/build.gradle
    
    apply plugin: 'maven-publish'
    
    publishing {
        publications {
            mavenJava(MavenPublication) {
                groupId '你的groupID'
                artifactId '你的artifactId'
                version '你的版本号'


                //下面必须要加，否则不会将最终产物aar，上传至maven
                afterEvaluate { artifact(tasks.getByName("bundleReleaseAar")) }
            }

            //这里还可以写更多配置，得自己查资料
        }
        repositories {
            maven {
                url "文件路径: 你的本地仓库路径"
            }
        }
    }
    ```

3. 使用Gradle任务来发布库到本地Maven仓库。

    ```sh
    ./gradlew publishToMavenLocal
    ```

    也可以用下面这个。

    ```sh
    ./gradlew publishMavenPublicationTomMavenLocal
    ```

    >`publishToMavenLocal`是执行整个项目的publication任务，`publishMavenPublicationTomMavenLocal`是执行特殊的某个任务。

    这样就可以在项目中通过Maven依赖来使用本地发布的库了。

4. 其他项目使用本地maven的库。

    - 配置本地maven地址

        ```groovy
        //文件位置：项目根目录/build.gradle
        buildscript {
            repositories {
                mavenLocal()
                maven{url '本地maven路径'}
            }
        }
        ```

    - 模块中引入依赖

        ```groovy
        //模块中直接引入
        implement 'groupId:artifactId:版本号'
        ```

注意：确保替换以上代码中的版本号、你的`groupID`、你的`artifactId`、你的版本号和你的本地仓库路径为实际值。你的本地仓库路径应该指向你的本地Maven仓库目录。
