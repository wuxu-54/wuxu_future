# Cargo 的常用命令

以下是 Rust 的包管理工具 Cargo 的常用命令详解，按功能分类整理：

---

## **一、项目创建与管理**

1. **`cargo new`**  
   **用途**：创建新项目。  
   **选项**：  
   - `--bin`：创建二进制项目（默认）  
   - `--lib`：创建库项目  
   - `--vcs <git|hg|none>`：指定版本控制系统（默认：git）  

   **示例**：

   ```bash
   cargo new my_project          # 创建二进制项目
   cargo new my_lib --lib        # 创建库项目
   cargo new my_project --vcs none  # 不初始化版本控制
   ```

---

## **二、构建与运行**

1. **`cargo build`**  
   **用途**：编译项目及依赖。  
   **选项**：  
   - `--release`：生成优化后的发布版本（输出在 `target/release/`）  
   - `--target <triple>`：指定目标平台（如 `x86_64-unknown-linux-gnu`）  

   **示例**：

   ```bash
   cargo build            # 调试模式构建（默认）
   cargo build --release  # 发布模式构建
   ```

2. **`cargo run`**  
   **用途**：编译并运行项目。  
   **选项**：  
   - `--bin <name>`：指定运行的二进制目标（多二进制项目时）  
   - `--example <name>`：运行示例  
   - `--` 后接参数传递给程序  

   **示例**：

   ```bash
   cargo run              # 运行主程序
   cargo run -- --help    # 传递参数给程序
   cargo run --bin app    # 运行名为 `app` 的二进制目标
   ```

3. **`cargo check`**  
   **用途**：快速检查代码能否编译（不生成可执行文件）。  
   **选项**：同 `cargo build`。  

   **示例**：

   ```bash
   cargo check    # 快速检查语法和类型错误
   ```

---

## **三、测试与文档**

1. **`cargo test`**  
   **用途**：运行项目测试。  
   **选项**：  
   - `--nocapture`：显示测试输出（默认捕获输出）  
   - `<test_name>`：运行匹配名称的测试  
   - `--test-threads=1`：单线程运行测试（解决并发问题）  

   **示例**：

   ```bash
   cargo test                     # 运行所有测试
   cargo test my_test             # 运行名称含 `my_test` 的测试
   cargo test -- --nocapture      # 显示测试中的打印输出
   ```

2. **`cargo doc`**  
   **用途**：生成项目及依赖的文档。  
   **选项**：  
   - `--open`：生成后自动打开文档网页  

   **示例**：

   ```bash
   cargo doc       # 生成文档（位于 `target/doc/`）
   cargo doc --open  # 生成并打开文档
   ```

---

## **四、依赖管理**

1. **`cargo update`**  
   **用途**：更新依赖版本（根据 `Cargo.toml` 的约束）。  
   **选项**：  
   - `-p <package>`：指定更新某个包  

   **示例**：

   ```bash
   cargo update           # 更新所有依赖
   cargo update -p serde  # 仅更新 `serde` 包
   ```

---

## **五、清理与安装**

1. **`cargo clean`**  
   **用途**：删除 `target/` 目录，清理编译文件。  
   **示例**：

   ```bash
   cargo clean    # 彻底清理构建产物
   ```

2. **`cargo install`**  
   **用途**：安装二进制 crate 到系统（默认在 `~/.cargo/bin`）。  
   **示例**：

   ```bash
   cargo install ripgrep  # 安装 `ripgrep` 工具
   ```

3. **`cargo uninstall`**  
    **用途**：卸载通过 `cargo install` 安装的包。  
    **示例**：

    ```bash
    cargo uninstall ripgrep  # 卸载 `ripgrep`
    ```

---

## **六、发布与共享**

1. **`cargo publish`**  
    **用途**：将 crate 发布到 [crates.io](https://crates.io/)。  
    **步骤**：  
    - 登录：`cargo login <API_TOKEN>`  
    - 发布：`cargo publish`  

2. **`cargo search`**  
    **用途**：在 [crates.io](https://crates.io/) 搜索包。  
    **示例**：

    ```bash
    cargo search serde  # 搜索 `serde` 相关包
    ```

---

## **七、代码质量工具**

1. **`cargo clippy`**  
    **用途**：运行 Clippy 代码检查（需安装：`rustup component add clippy`）。  
    **示例**：

    ```bash
    cargo clippy    # 检查代码并给出改进建议
    ```

2. **`cargo fmt`**  
    **用途**：格式化
