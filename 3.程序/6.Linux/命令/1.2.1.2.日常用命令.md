
# 常用命令-2

 **shell常用命令、全局变量及硬件信息工具汇总**，按功能分类整理，涵盖系统信息、环境变量、硬件详情等维度，并区分Linux/macOS平台差异：

## 一、系统信息命令（基础环境与状态）

### 1. 文件系统相关（路径/目录/磁盘）

| 命令               | 功能说明                                  | 示例用法                                  |
|--------------------|-------------------------------------------|-------------------------------------------|
| `pwd`              | 显示当前工作目录绝对路径                  | `pwd` → `/home/user/documents`            |
| `ls`               | 列出目录内容                              | `ls -l`（详细列表）、`ls -a`（显示隐藏文件） |
| `cd`               | 切换目录（内置命令）                      | `cd ~`（切换到用户主目录）、`cd -`（切换到上一目录） |
| `df`               | 查看磁盘分区使用情况                      | `df -h`（人类可读格式：GB/MB）            |
| `du`               | 查看文件/目录占用空间                      | `du -sh ./dir`（显示目录总大小）          |
| `dirname`          | 提取路径中的目录部分                      | `dirname /a/b/c.txt` → `/a/b`             |
| `basename`         | 提取路径中的文件名/目录名                  | `basename /a/b/c.txt` → `c.txt`           |
| `realpath`         | 获取文件绝对路径（解析符号链接）          | `realpath ./file` → `/home/user/file`     |
| `lsblk`            | 查看块设备（硬盘/分区/U盘，Linux）        | `lsblk -f`（显示设备、分区、文件系统）    |
| `diskutil list`    | 查看磁盘/分区信息（macOS）                | `diskutil list`（列出所有磁盘及分区）      |

### 2. 用户与权限相关

| 命令               | 功能说明                                  | 示例用法                                  |
|--------------------|-------------------------------------------|-------------------------------------------|
| `whoami`           | 显示当前用户名                            | `whoami` → `user`                         |
| `id`               | 显示当前用户UID/GID及所属组              | `id` → `uid=1000(user) gid=1000(user) groups=1000(user)` |
| `groups`           | 显示当前用户所属组                        | `groups` → `user sudo wheel`              |
| `who`              | 显示当前登录的所有用户                    | `who` → `user pts/0 2025-08-20 10:00 (192.168.1.1)` |
| `w`                | 显示登录用户及正在执行的命令              | `w`（含用户、终端、CPU负载等）            |
| `chmod`            | 修改文件/目录权限                        | `chmod 755 file.sh`（赋予读写执行权限）   |
| `chown`            | 修改文件/目录所有者                       | `chown user:group file`                   |

### 3. 网络信息相关

| 命令               | 功能说明                                  | 示例用法                                  |
|--------------------|-------------------------------------------|-------------------------------------------|
| `hostname`         | 显示/设置主机名                          | `hostname` → `my-laptop`                  |
| `ifconfig`/`ip`    | 查看网络接口信息（IP/MAC）                | Linux：`ip addr`；macOS：`ifconfig en0`   |
| `netstat`/`ss`     | 查看网络连接/端口占用                    | `netstat -tuln`（显示监听的TCP/UDP端口）  |
| `ping`             | 测试网络连通性                            | `ping -c 3 baidu.com`（发送3个ICMP包）    |
| `curl`/`wget`      | 发送HTTP请求/下载文件                     | `curl http://example.com`（获取网页内容）  |
| `dig`/`nslookup`   | 域名解析                                  | `dig baidu.com`（显示DNS解析结果）        |
| `iwconfig`         | 无线网卡信息（信号强度/信道，Linux）      | `iwconfig wlan0`                          |
| `airport -I`       | 无线网卡信息（macOS，需手动链接工具）     | `airport -I`（显示WiFi信号强度）          |

### 4. 系统状态相关

| 命令               | 功能说明                                  | 示例用法                                  |
|--------------------|-------------------------------------------|-------------------------------------------|
| `date`             | 显示/设置系统时间                          | `date +"%Y-%m-%d %H:%M:%S"`（自定义格式） |
| `uname`            | 显示系统内核信息                          | `uname -a`（完整信息）、`uname -r`（内核版本） |
| `uptime`           | 显示系统运行时间及负载（1/5/15分钟）      | `uptime` → `12:00:00 up 5 days, 2h, load average: 0.50, 0.30, 0.20` |
| `free`             | 查看内存使用情况（Linux）                 | `free -h`（总内存/已用/空闲）             |
| `vm_stat`          | 查看虚拟内存统计（macOS）                 | `vm_stat`（显示页错误、swap使用等）       |
| `top`/`htop`       | 实时监控进程资源占用（CPU/内存）          | `top -o %CPU`（按CPU使用率排序）          |
| `ps`               | 查看当前进程快照                          | `ps aux`（显示所有用户的进程）            |
| `cal`              | 显示日历                                  | `cal 2025`（显示2025年日历）              |

## 二、全局变量（环境变量与特殊变量）

### 1. 环境变量（系统/用户环境描述）

| 变量名          | 功能说明                                  | 示例值（Linux/macOS）                     |
|-----------------|-------------------------------------------|-------------------------------------------|
| `$HOME`         | 当前用户主目录路径                        | Linux：`/home/user`；macOS：`/Users/user` |
| `$USER`/`$LOGNAME` | 当前用户名                                | `user`                                    |
| `$PATH`         | 命令搜索路径（用`:`分隔）                 | `/usr/local/bin:/usr/bin:/bin`            |
| `$PWD`          | 当前工作目录（等价于`pwd`命令）           | `/home/user/documents`                    |
| `$OLDPWD`       | 上一次工作目录（`cd -`可切换回）          | `/home/user/downloads`                    |
| `$SHELL`        | 当前使用的shell程序路径                   | `/bin/bash` 或 `/bin/zsh`                 |
| `$TERM`         | 终端类型（控制显示格式）                  | `xterm-256color`                          |
| `$LANG`/`$LC_ALL` | 系统语言/编码设置                        | `en_US.UTF-8` 或 `zh_CN.UTF-8`            |
| `$HOSTNAME`     | 主机名（等价于`hostname`命令）            | `my-laptop`                               |
| `$MACHINE`（macOS） | 硬件型号                                | `MacBookPro18,3`                          |

### 2. 特殊变量（脚本/命令状态记录）

| 变量名          | 功能说明                                  | 示例场景                                  |
|-----------------|-------------------------------------------|-------------------------------------------|
| `$?`            | 上一个命令的退出码（0=成功，非0=失败）    | `echo $?` → `0`（上一条命令成功）         |
| `$$`            | 当前shell进程的PID（进程ID）              | `echo $$` → `12345`                       |
| `$!`            | 上一个后台进程的PID                      | `sleep 10 &; echo $!` → `6789`            |
| `$0`            | 当前脚本的文件名                          | 脚本中`echo $0` → `./script.sh`           |
| `$n`            | 脚本/函数的第n个参数（n=1,2,...）         | 执行`./script.sh a b`，`echo $1` → `a`    |
| `$#`            | 脚本/函数的参数总数                      | 执行`./script.sh a b`，`echo $#` → `2`    |
| `$*`/`$@`       | 所有参数的集合（`$*`合并为单字符串，`$@`保留分隔） | 执行`./script.sh a b`，`echo "$@"` → `a b` |

## 三、硬件信息命令（设备详情与状态）

### 1. 综合硬件概览

| 命令 | 平台 | 功能说明 | 示例用法 |
|------|------|----------|----------|
| `inxi` | Linux | 轻量硬件概览工具（需安装） | `inxi -F`（完整硬件信息：CPU/内存/显卡/磁盘） |
| `hwinfo` | Linux | 详细硬件探测工具（需安装） | `hwinfo --short`（精简硬件列表） |
| `system_profiler` | macOS | 系统自带硬件汇总工具 | `system_profiler SPHardwareDataType`（基本硬件：CPU/内存/型号） |

### 2. CPU/内存/主板

| 命令 | 平台 | 功能说明 | 示例用法 |
|------|------|----------|----------|
| `lscpu` | Linux | CPU详细信息（架构/核心数/主频） | `lscpu`（显示CPU型号、线程数、缓存等） |
| `sysctl -n machdep.cpu.brand_string` | macOS | CPU型号 | 直接输出：`Apple M1 Pro` |
| `free -h` | Linux | 内存使用情况（总/已用/缓存） | `free -h` → `Mem: 16G 5.2G 8.3G` |
| `system_profiler SPMemoryDataType` | macOS | 内存详情（容量/插槽） | 显示内存总容量、每个插槽的内存规格 |
| `dmidecode -t baseboard` | Linux（需root） | 主板信息（厂商/型号） | `sudo dmidecode -t baseboard` |
| `dmidecode -t bios` | Linux（需root） | BIOS信息（版本/日期） | `sudo dmidecode -t bios` |

### 3. 显卡（GPU）

| 命令 | 平台 | 功能说明 | 示例用法 |
|------|------|----------|----------|
| `lspci | grep -i vga` | Linux | 显卡型号（通过PCI设备过滤） | `lspci | grep -i vga` → 显示NVIDIA/AMD/Intel显卡型号 |
| `nvidia-smi` | Linux/macOS（NVIDIA显卡） | NVIDIA显卡状态（显存/温度） | `nvidia-smi`（实时显存使用、进程占用） |
| `system_profiler SPDisplaysDataType` | macOS | 显卡详情（型号/显存/显示器） | 显示“Chipset Model”“VRAM”等 |
| `glxinfo | grep "OpenGL renderer"` | Linux | OpenGL渲染器型号 | 输出显卡渲染器信息 |

### 4. 存储设备（磁盘/分区）

| 命令 | 平台 | 功能说明 | 示例用法 |
|------|------|----------|----------|
| `parted -l` | Linux/macOS | 磁盘分区表（GPT/MBR） | `sudo parted -l`（显示分区表类型、分区大小） |
| `fdisk -l` | Linux（需root） | 磁盘分区详情 | `sudo fdisk -l /dev/sda`（查看sda磁盘分区） |
| `diskutil info /dev/disk0` | macOS | 磁盘详细信息（型号/接口） | 显示“Model Identifier”“Protocol”（NVMe/SATA） |
| `smartctl -H /dev/sda` | Linux（需安装smartmontools） | 硬盘健康状态（SMART） | `sudo smartctl -H /dev/sda` → 显示“PASSED”或故障 |

### 5. 传感器与硬件状态（温度/电池/风扇）

| 命令 | 平台 | 功能说明 | 示例用法 |
|------|------|----------|----------|
| `sensors` | Linux（需安装lm-sensors） | CPU/主板温度、风扇转速 | `sensors` → 显示“Core 0: +45.0°C”“fan1: 2000 RPM” |
| `acpi -b` | Linux（需安装acpi） | 电池状态（电量/充电状态） | `acpi -b` → `Battery 0: Discharging, 75%, 01:20:00 remaining` |
| `pmset -g batt` | macOS | 电池状态（电量/循环次数） | `pmset -g batt` → 显示“InternalBattery-0: 75% charged” |
| `istats` | macOS（需安装） | 硬件温度监控 | `istats` → 显示CPU/电池/硬盘温度 |

### 6. 外设（USB/PCI/蓝牙）

| 命令 | 平台 | 功能说明 | 示例用法 |
|------|------|----------|----------|
| `lsusb` | Linux | 列出USB设备（鼠标/U盘等） | `lsusb -v`（详细USB设备信息） |
| `lspci` | Linux | 列出PCI设备（显卡/网卡/声卡） | `lspci | grep -i network`（查看网卡型号） |
| `system_profiler SPUSBDataType` | macOS | USB设备信息 | 显示连接的USB设备型号、厂商 |
| `hciconfig` | Linux（需安装bluez） | 蓝牙设备状态 | `hciconfig`（显示蓝牙适配器状态） |

以上内容覆盖了shell脚本中常用的 **系统查询、环境变量、硬件监控** 场景，可根据需求组合使用（如脚本中用`$HOME`定位用户目录，用`sensors`监控CPU温度，用`df -h`检查磁盘空间）。使用时注意平台差异，部分工具需通过包管理器安装。
