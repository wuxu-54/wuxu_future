# Android 系统中常用的命令

以下是 Android 系统中常用的命令、全局变量及软硬件信息查询方式，涵盖系统管理、应用调试、硬件监控等场景（主要通过 `adb shell` 执行，部分需 root 权限）：

## 一、系统属性命令（核心配置查询/修改）

Android 系统通过「系统属性」存储核心配置（键值对），常用命令如下：

| 命令 | 功能说明 | 示例用法 |
|------|----------|----------|
| `getprop` | 查看所有系统属性（键值对） | `getprop`（列出所有属性） |
| `getprop <key>` | 查看指定属性值 | `getprop ro.build.version.release`（获取Android版本，如14） |
| `setprop <key> <value>` | 修改系统属性（多数属性只读，需root） | `setprop persist.sys.debug 1`（开启调试模式，需root） |
| `resetprop` | 重置属性（root环境下，可修改只读属性） | `resetprop ro.product.model "CustomModel"`（修改设备型号） |

### 常用系统属性（`getprop` 可查询的关键键值）

| 属性键名 | 含义 | 示例值 |
|----------|------|--------|
| `ro.build.version.release` | Android 版本号 | `14` |
| `ro.build.version.sdk` | SDK 版本（API级别） | `34`（对应Android 14） |
| `ro.product.model` | 设备型号 | `Pixel 8 Pro` |
| `ro.product.brand` | 设备品牌 | `Google` |
| `ro.hardware` | 硬件平台 | `google/shiba` |
| `ro.boot.serialno` | 设备序列号 | `ABC123456789` |
| `dalvik.vm.heapsize` | 应用最大堆内存 | `512m` |
| `net.eth0.ipaddress` | 以太网IP（如有） | `192.168.1.100` |
| `wifi.interface` | WiFi接口名称 | `wlan0` |
| `persist.sys.locale` | 系统语言 | `zh-CN` |

## 二、应用与包管理命令

Android 特有的应用/包管理工具，用于查询、安装、卸载应用及权限管理：

| 命令 | 功能说明 | 示例用法 |
|------|----------|----------|
| `pm`（Package Manager） | 应用包管理（安装/卸载/查询） | `pm list packages`（列出所有已安装应用包名）<br>`pm install -r app.apk`（覆盖安装应用）<br>`pm uninstall com.example.app`（卸载应用）<br>`pm grant com.example.app android.permission.CAMERA`（授予权限） |
| `am`（Activity Manager） | 活动/服务管理（启动/停止组件） | `am start -n com.android.settings/.Settings`（启动设置界面）<br>`am force-stop com.example.app`（强制停止应用）<br>`am startservice com.example.app/.MyService`（启动服务） |
| `dumpsys package <包名>` | 查看应用详细信息（权限/组件） | `dumpsys package com.android.chrome`（查看Chrome的权限、安装路径等） |
| `pm path <包名>` | 获取应用APK路径 | `pm path com.android.systemui`（获取系统UI的APK位置） |

## 三、硬件信息查询命令

获取设备硬件（CPU、内存、电池、传感器等）信息的核心命令：

| 命令 | 功能说明 | 示例用法 |
|------|----------|----------|
| `dumpsys` | 查看系统服务状态（硬件/软件信息汇总） | `dumpsys battery`（电池状态：电量/充电状态/温度）<br>`dumpsys meminfo`（内存使用：总内存/应用占用）<br>`dumpsys cpuinfo`（CPU占用：各进程CPU使用率）<br>`dumpsys display`（屏幕信息：分辨率/刷新率）<br>`dumpsys sensor`（传感器列表：加速度计/陀螺仪等） |
| `cat /proc/cpuinfo` | CPU信息（核心数/型号/架构） | `cat /proc/cpuinfo | grep "processor"`（统计逻辑核心数） |
| `cat /proc/meminfo` | 内存信息（总内存/可用内存/缓存） | `cat /proc/meminfo | grep MemTotal`（总内存） |
| `cat /sys/class/power_supply/BAT0/capacity` | 电池电量（百分比，部分设备路径不同） | `cat /sys/class/power_supply/BAT0/capacity` → `75` |
| `cat /sys/class/power_supply/BAT0/temp` | 电池温度（单位：0.1℃，如350→35.0℃） | `cat /sys/class/power_supply/BAT0/temp` → `350` |
| `vdc camera list` | 摄像头信息（需root） | 列出设备摄像头型号及参数 |
| `ls /sys/class/sensor` | 传感器列表（加速度计/陀螺仪等） | 输出如 `accelometer gyroscope` 等传感器目录 |

## 四、网络相关命令

查询网络状态、配置网络参数的命令：

| 命令 | 功能说明 | 示例用法 |
|------|----------|----------|
| `ifconfig` | 网络接口信息（IP/MAC/子网掩码） | `ifconfig wlan0`（查看WiFi接口IP和MAC） |
| `ip` | 更详细的网络配置（替代ifconfig） | `ip addr show`（列出所有接口IP）<br>`ip route`（查看路由表） |
| `netstat` | 网络连接状态（端口/进程） | `netstat -tuln`（显示监听的TCP/UDP端口） |
| `ping` | 测试网络连通性 | `ping -c 4 baidu.com`（发送4个ICMP包） |
| `nslookup`/`dig` | DNS解析 | `nslookup google.com`（解析域名IP） |
| `svc` | 网络服务控制（开关WiFi/数据） | `svc wifi enable`（开启WiFi）<br>`svc data disable`（关闭移动数据） |
| `netcfg` | 网络接口配置（简化版ifconfig） | `netcfg wlan0 up`（启用WiFi接口） |

## 五、调试与日志命令

用于系统调试、日志查看、性能分析的工具：

| 命令 | 功能说明 | 示例用法 |
|------|----------|----------|
| `logcat` | 查看系统日志（应用/框架/内核日志） | `logcat -s ActivityManager`（仅显示ActivityManager日志）<br>`logcat *:E`（仅显示错误级别日志） |
| `dmesg` | 查看内核日志（启动信息/硬件驱动日志） | `dmesg | grep "battery"`（搜索内核中的电池相关日志） |
| `systrace` | 系统性能分析（CPU/内存/IO耗时） | `systrace -o trace.html sched gfx`（记录调度和图形渲染轨迹） |
| `top` | 实时进程资源监控（CPU/内存占用） | `top -m 10`（显示CPU占用前10的进程）<br>`top -n 1`（输出一次进程快照） |
| `ps` | 查看进程列表 | `ps -A`（列出所有进程）<br>`ps | grep com.example.app`（查找指定应用进程） |
| `traceview` | 应用方法执行时间分析（需配合应用埋点） | 分析应用方法调用耗时，定位性能瓶颈 |
| `am bugreport` | 生成完整bug报告（系统状态汇总） | `am bugreport /sdcard/bugreport.zip`（保存报告到SD卡） |

## 六、文件系统与存储命令

Android 文件系统特有的目录结构及操作命令：

| 命令 | 功能说明 | 关键目录 |
|------|----------|----------|
| `ls`/`cd`/`cp`/`rm` | 基础文件操作（与Linux类似） | - `/system`：系统分区（只读，存放系统应用/框架）<br>- `/data`：用户数据分区（应用数据/设置，需root访问）<br>- `/sdcard`：外部存储（用户文件/下载，实际多为/data/media链接）<br>- `/proc`：伪文件系统（CPU/内存等实时信息）<br>- `/sys`：硬件设备信息（传感器/电池等状态） |
| `df` | 存储分区使用情况 | `df -h`（人类可读格式显示各分区容量） |
| `du` | 目录/文件占用空间 | `du -sh /data/app`（查看应用安装目录总大小） |
| `mount` | 查看挂载的分区及文件系统 | `mount | grep "/data"`（查看data分区的挂载参数） |
| `chmod`/`chown` | 修改文件权限/所有者（需root） | `chmod 777 /data/local/tmp/file`（授予所有权限） |

## 七、Android 全局变量（环境变量）

Android shell 中的环境变量，多与系统路径、配置相关：

| 变量名 | 含义 | 示例值 |
|--------|------|--------|
| `$ANDROID_ROOT` | 系统根目录（/system） | `/system` |
| `$ANDROID_DATA` | 数据目录（/data） | `/data` |
| `$BOOTCLASSPATH` | 系统框架类路径 | `/system/framework/core-oj.jar:...` |
| `$PATH` | 命令搜索路径 | `/sbin:/system/sbin:/system/bin:/system/xbin` |
| `$LD_LIBRARY_PATH` | 动态链接库路径 | `/system/lib64:/vendor/lib64` |
| `$USER` | 当前用户（Android默认多为root或shell） | `shell` |
| `$HOME` | 当前用户主目录（通常为/） | `/` |

## 八、其他实用命令

| 命令 | 功能说明 | 示例用法 |
|------|----------|----------|
| `input` | 模拟输入（点击/按键/滑动） | `input tap 500 1000`（点击屏幕坐标(500,1000)）<br>`input keyevent 3`（模拟按Home键，3=Home键代码） |
| `wm` | 窗口管理（分辨率/密度） | `wm size`（查看屏幕分辨率）<br>`wm density 480`（设置屏幕密度为480dpi） |
| `cmd` | 与系统服务交互（替代部分dumpsys功能） | `cmd statusbar expand`（展开状态栏）<br>`cmd power reboot`（重启设备，需root） |
| `settings` | 读写系统设置（显示/声音等） | `settings get system screen_brightness`（获取屏幕亮度）<br>`settings put system screen_off_timeout 60000`（设置屏幕超时1分钟） |
| `reboot` | 重启设备（需root） | `reboot`（正常重启）<br>`reboot recovery`（重启到恢复模式） |

## 注意事项

1. **权限限制**：多数敏感操作（如修改系统属性、访问/data目录）需root权限，非root设备会提示权限不足。
2. **平台差异**：部分命令（如传感器路径、电池文件）因设备厂商定制可能有差异，需根据实际设备调整。
3. **adb依赖**：多数命令需通过 `adb shell` 执行（`adb connect <设备IP>` 或连接USB后使用），少数可在设备本地终端（如Termux）执行。

以上命令覆盖了Android系统的核心操作场景，适合开发者调试、设备管理及自动化脚本编写。
