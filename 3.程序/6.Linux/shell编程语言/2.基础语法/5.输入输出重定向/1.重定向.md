# 输入输出重定向

在Shell脚本中，输入输出重定向是一种控制命令行输入和输出的强大技术。通过重定向，你可以将命令的标准输入（stdin）、标准输出（stdout）和标准错误（stderr）指向特定的文件或设备，而不是默认的终端。

## 基本概念

- **标准输入（stdin）**：通常是键盘输入。
- **标准输出（stdout）**：通常是终端显示的输出。
- **标准错误（stderr）**：用于显示错误信息，通常也显示在终端。

## 输出重定向

1. 使用 `>` 将命令的输出重定向到一个文件。如果文件不存在，将创建该文件；如果文件已存在，将覆盖其内容。

   ```bash
   echo "Hello, World!" > output.txt
   ```

2. 使用 `>>` 将命令的输出追加到一个文件的末尾，而不是覆盖文件。

   ```bash
   echo "Another line" >> output.txt
   ```

3. 使用 `2>` 重定向错误信息到一个文件。这将只重定向stderr。

   ```bash
   ls not_existing_file 2> error.txt
   ```

4. 使用 `&>` 将标准输出和标准错误都重定向到同一个文件。

   ```bash
   ./your_script.sh &> full_output.txt
   ```

5. 使用 `|` 或 `||` 将一个命令的输出作为另一个命令的输入，这称为管道。

   ```bash
   ls -l | grep "output.txt"
   ```

## 输入重定向

1. 使用 `<` 将文件内容作为命令的输入。

   ```bash
   cat < large_file.txt | sort
   ```

2. 使用管道将多个命令的输出和输入连接起来。

   ```bash
   grep "error" error_log.txt | sort | uniq
   ```

## 特殊文件

- `/dev/null` 是一个特殊的设备文件，写入到这个文件的数据会被丢弃，通常用于丢弃不需要的输出。

  ```bash
  ./your_script.sh > /dev/null 2>&1
  ```

- `/dev/stdout` 和 `/dev/stderr` 分别是标准输出和标准错误的文件描述符。

## 重定向特定文件描述符

- 通过指定文件描述符，可以重定向特定的输出到文件。

  ```bash
  ls -l /dev > /dev/stdout 2>&1
  ```

## 函数和脚本的输出重定向

- 当调用函数或执行脚本时，可以重定向它们的输出。

  ```bash
  ./script.sh > output.txt
  ```

## 环境变量

- 可以使用环境变量来控制输出重定向。

  ```bash
  OUTPUT=output.txt
  ./script.sh > "$OUTPUT"
  ```

## 示例：处理重定向

```bash
#!/bin/bash

# 将输出重定向到文件
echo "This will be saved to a file" > redirect_output.txt

# 追加到文件
echo "This will be appended" >> redirect_output.txt

# 将错误信息重定向到文件
./non_existing_command 2> error.txt

# 同时重定向标准输出和标准错误
./non_existing_command &> full_error.txt

# 丢弃输出
./your_command > /dev/null 2>&1
```

输入输出重定向是Shell脚本中不可或缺的一部分，它允许你控制命令的输入和输出，实现复杂的数据处理和错误处理。掌握这些技术，可以让你的脚本更加强大和灵活。
