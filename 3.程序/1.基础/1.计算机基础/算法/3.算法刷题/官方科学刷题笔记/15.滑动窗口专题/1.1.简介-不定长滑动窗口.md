# 不定长滑动窗口

不定长滑动窗口是滑动窗口算法的一种，它在给定的数组或字符串上维护一个窗口，但这个窗口的大小是不固定的。相比于固定长度滑动窗口，不定长滑动窗口的灵活性更高，可以根据具体问题的需求动态地调整窗口的大小。

不定长滑动窗口算法的基本思想是使用两个指针（通常称为左指针和右指针）来定义一个窗口，并通过移动这两个指针来改变窗口的大小和位置。在遍历数组或字符串的过程中，根据问题的具体条件来判断是否需要扩展或收缩窗口。

具体来说，不定长滑动窗口算法的实现步骤如下：

1. 初始化左指针和右指针为0，此时窗口为空。
2. 开始遍历数组或字符串，移动右指针来扩展窗口，直到窗口中的元素满足问题的某个条件（例如，窗口中的元素和大于某个值，或者窗口中的元素构成了一个满足特定条件的子序列）。
3. 当窗口满足条件后，尝试移动左指针来收缩窗口，同时保持窗口仍然满足条件。这个过程会一直持续到左指针无法再移动为止（即，如果左指针再移动，窗口将不再满足条件）。
4. 在每次移动左指针或右指针时，根据问题的需求更新最优解（例如，记录最长满足条件的子序列长度，或者计算满足条件的子序列的个数等）。
5. 重复步骤2到步骤4，直到右指针遍历完整个数组或字符串。

不定长滑动窗口算法的应用非常广泛，例如可以用于解决最长递增子序列、乘积小于某个值的子数组个数、字符串中的最长无重复字符子串等问题。通过使用不定长滑动窗口算法，可以高效地解决这些具有连续性和范围限制的问题。

## 更多介绍

不定长滑动窗口是一种在算法和数据处理中常用的技术，以下是对它的详细解释：

### 一、滑动窗口的基本概念

- 滑动窗口是一种通过维护一个窗口（通常是数组或字符串中的一段连续元素），并通过移动窗口的起始和结束位置，来处理或计算窗口内元素信息的技术。
- 这个窗口的大小可以是固定的，也可以是不定长的。

### 二、不定长滑动窗口的特点

- **窗口大小不固定**：
  - 与固定长度的滑动窗口不同，不定长滑动窗口的长度会根据特定的条件动态变化。
  - 窗口的起始位置和结束位置可以根据问题的要求灵活调整，而不是按照固定的长度进行移动。

### 三、应用场景

#### 字符串处理

- 例如，在处理最长不重复子串问题时，可以使用不定长滑动窗口。
- 以下是一个简单的实现思路：
  - 从字符串的起始位置开始，将窗口的起始和结束位置都初始化为 0。
  - 不断向右扩展窗口的结束位置，同时使用一个数据结构（如 `HashSet` 或 `HashMap`）来存储窗口内的字符，以检查是否出现重复字符。
  - 一旦出现重复字符，将窗口的起始位置向右移动，直到窗口内不再有重复字符。
  - 在此过程中，窗口的长度会根据字符的重复情况不断调整。

```java
import java.util.HashSet;

public class LongestSubstring {
    public static int lengthOfLongestSubstring(String s) {
        int n = s.length();
        int maxLength = 0;
        int i = 0, j = 0;
        HashSet<Character> set = new HashSet<>();
        while (j < n) {
            if (!set.contains(s.charAt(j))) {
                set.add(s.charAt(j));
                j++;
                maxLength = Math.max(maxLength, j - i);
            } else {
                set.remove(s.charAt(i));
                i++;
            }
        }
        return maxLength;
    }

    public static void main(String[] args) {
        String str = "abcabcbb";
        System.out.println(lengthOfLongestSubstring(str));
    }
}
```

**代码解释**：

- 上述 Java 代码使用了不定长滑动窗口来寻找字符串中的最长不重复子串。
- 变量 `i` 和 `j` 分别表示窗口的起始和结束位置。
- `HashSet<Character> set` 用来存储窗口内的字符。
- 不断扩展 `j`，若窗口内没有重复字符，将字符添加到 `set` 中，并更新最大长度；若有重复字符，从窗口的起始位置 `i` 处移除字符，移动 `i` 以缩小窗口，直到没有重复字符。

#### 数组问题

- 在一些数组的子数组处理问题中也会使用不定长滑动窗口。
- 例如，找到和大于或等于给定值 `k` 的最小子数组长度。

    ```java
    public static int minSubArrayLen(int s, int[] nums) {
        int n = nums.length;
        int minLength = Integer.MAX_VALUE;
        int left = 0, sum = 0;
        for (int right = 0; right < n; right++) {
            sum += nums[right];
            while (sum >= s) {
                minLength = Math.min(minLength, right - left + 1);
                sum -= nums[left];
                left++;
            }
        }
        return (minLength == Integer.MAX_VALUE)? 0 : minLength;
    }

    public static void main(String[] args) {
        int[] nums = {2,3,1,2,4,3};
        int s = 7;
        System.out.println(minSubArrayLen(s, nums));
    }
    ```

**代码解释**：

- 上述代码使用不定长滑动窗口来寻找和大于等于 `s` 的最小子数组长度。
- `left` 和 `right` 分别表示窗口的左右边界。
- 不断扩展 `right` 并累加元素到 `sum` 中。
- 当 `sum >= s` 时，更新最小长度，并从窗口左侧移除元素（通过 `left` 移动），同时更新 `sum`，直到 `sum < s`。

### 四、优势和局限性

- **优势**：
  - 灵活性：可以根据具体问题灵活调整窗口大小，适应各种复杂的条件和约束。
  - 适用性：适用于多种问题，如子数组问题、子串问题、求和问题等，尤其适用于解决需要动态调整范围的问题。
- **局限性**：
  - 实现相对复杂：与固定长度的滑动窗口相比，不定长滑动窗口的实现通常需要更多的逻辑来维护窗口的大小和更新条件。
  - 性能：在某些情况下，如果条件判断复杂，可能会导致性能下降，因为窗口的调整需要更多的操作和计算。

不定长滑动窗口是一种非常灵活的算法技术，适用于许多数据处理和算法问题。通过灵活调整窗口的起始和结束位置，可以根据不同的条件动态计算窗口内元素的属性，解决诸如最长不重复子串、满足特定和的最小子数组等问题。在实现时，需要根据具体问题设置合适的窗口调整条件，以达到最优的性能和效果。
