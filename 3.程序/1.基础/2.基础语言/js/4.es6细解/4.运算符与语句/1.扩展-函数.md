# 扩展-函数

## 函数参数的扩展

1. 默认参数
    * 只有在未传递参数，或者参数为 undefined 时，才会使用默认参数，null 值被认为是有效的值传递。
    * 使用函数默认参数时，不允许有同名参数。
    * 还未初始化赋值的参数值无法作为其他参数的默认值。
2. 不定参数 ： 不定参数用来表示不确定参数个数，形如，...变量名，由...加上一个具名参数标识符组成。具名参数只能放在参数组的最后，并且有且只有一个不定参数。

---

## 箭头函数

JavaScript中的箭头函数（Arrow Function）是ES6（ECMAScript 2015）引入的一种新的函数定义方式

结构体： 参数 => 函数体

1. 当箭头函数没有参数或者有多个参数，要用 () 括起来。
2. 当箭头函数函数体有多行语句，用 {} 包裹起来，表示代码块，当只有一行语句，并且需要返回结果时，可以省略 {} , 结果会自动返回。
3. 当箭头函数要返回对象的时候，为了区分于代码块，要用 () 将对象包裹起来
4. 没有 this、super、arguments 和 new.target 绑定。
5. 箭头函数体中的 this 对象，是定义函数时的对象，而不是使用函数时的对象。
6. 不可以作为构造函数，也就是不能使用 new 命令，否则会报错

适用场景：当我们需要维护一个 this 上下文的时候，就可以使用箭头函数。

>ES6 之前，JavaScript 的 this 对象一直很令人头大，回调函数，经常看到 var self = this 这样的代码，为了将外部 this 传递到回调函数中，那么有了箭头函数，就不需要这样做了，直接使用 this 就行。

不适用场景：需要使用调用对象的this时

### 箭头函数的基本语法

```javascript
// 没有参数
const noParamFunc = () => {
  console.log("No parameters function");
};

// 单个参数
const singleParamFunc = (param) => {
  console.log(`Single parameter function with ${param}`);
};

// 单个参数，可以省略括号
const singleParamFuncNoBrackets = param => {
  console.log(`Single parameter function without brackets with ${param}`);
};

// 多个参数
const multiParamFunc = (param1, param2) => {
  console.log(`Multiple parameters function with ${param1} and ${param2}`);
};

// 没有大括号和返回语句的表达式
const add = (a, b) => a + b;

// 对象字面量作为返回值
const createObj = () => ({ name: 'Alice', age: 30 });
```

### 箭头函数与普通函数的区别

1. **`this` 值**：箭头函数不绑定自己的`this`值，而是捕获其所在上下文的`this`值，作为自己的`this`值。

2. **`arguments` 对象**：箭头函数不提供`arguments`对象，如果需要使用参数列表，可以使用剩余参数（rest parameters）代替。

3. **`super` 关键字**：在箭头函数中不能使用`super`关键字，因为它们不适用于构造函数。

4. **`new.target`**：`new.target`在箭头函数中是`undefined`，因为箭头函数不能作为构造函数使用。

5. **方法定义**：在类中使用箭头函数定义方法时，这些方法没有自己的`this`上下文，它们会捕获类的`this`上下文。

### 示例

#### 使用箭头函数定义简单的函数

```javascript
const sayHello = () => console.log("Hello!");
sayHello(); // 输出 "Hello!"
```

#### 在事件处理器中使用箭头函数

```javascript
document.getElementById('myButton').addEventListener('click', (event) => {
  console.log('Button clicked', event);
});
```

#### 使用箭头函数定义类方法

```javascript
class Person {
  constructor(name) {
    this.name = name;
  }

  greet() {
    return `Hello, ${this.name}`;
  }
}

const person = new Person('Bob');
console.log(person.greet()); // 输出 "Hello, Bob"
```

#### 箭头函数与`this`

```javascript
function Timer() {
  this.seconds = 0;
  setInterval(() => {
    this.seconds++;
    console.log(this.seconds);
  }, 1000);
}

const timer = new Timer(); // 每秒递增并打印秒数
```

箭头函数为JavaScript提供了一种更简洁、更具表现力的函数定义方式，特别是在处理回调函数和事件处理器时。同时，它们在`this`值的处理上与普通函数有所不同，这一点在使用类和构造函数时需要特别注意。
