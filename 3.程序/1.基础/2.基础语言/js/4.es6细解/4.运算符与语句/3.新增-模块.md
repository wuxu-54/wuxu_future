# 新增-模块

现在都遵循模块化的编程思想，ES6引入了如何实现模块化
>TypeScript 在es6之上延伸了许多，具体可以看模块章节

* ES6 的模块自动开启严格模式，不管你有没有在模块头部加上 use strict;。
* 模块中可以导入和导出各种类型的变量，如函数，对象，字符串，数字，布尔值，类等。
* 每个模块都有自己的上下文，每一个模块内声明的变量都是局部变量，不会污染全局作用域。
* 每一个模块只加载一次（是单例的）， 若再去加载同目录下同文件，直接从内存中读取。

## export(导出) 与 import(导入)

模块导入导出各种类型的变量，如字符串，数值，函数，类。

* 导出的函数声明与类声明必须要有名称（export default 命令另外考虑）。
* 不仅能导出声明还能导出引用（例如函数）。
* export 命令可以出现在模块的任何位置，但必需处于模块顶层（顶层指：被导出的模块必须在其他模块使用前定义或是说执行）。
* import 命令会提升到整个模块的头部，首先执行。

```javascript
/*-----export [test.js]-----*/
let myName = "Tom";
let myAge = 20;
let myfn = function(){
    return "My name is" + myName + "! I'm '" + myAge + "years old."
}
let myClass =  class myClass {
    static a = "yeah!";
}
export { myName, myAge, myfn, myClass }
 
/*-----import [xxx.js]-----*/
import { myName, myAge, myfn, myClass } from "./test.js";
console.log(myfn());// My name is Tom! I'm 20 years old.
console.log(myAge);// 20
console.log(myName);// Tom
console.log(myClass.a );// yeah!
```

### as 用法

正常来说，export 命令导出的接口名称，须和模块内部的变量有一一对应关系。导入的变量名，须和导出的接口名称相同，即顺序可以不一致。

as作用： 使用as可以在导出或导入时，重新定义变量名

```javascript
/*-----export [test.js]-----*/
let myName = "Tom";
export { myName as exportName }
 
/*-----import [xxx.js]-----*/
import { exportName } from "./test.js";
console.log(exportName);// Tom

//使用 as 重新定义导出的接口名称，隐藏模块内部的变量

/*-----export [test1.js]-----*/
let myName = "Tom";
export { myName }
/*-----export [test2.js]-----*/
let myName = "Jerry";
export { myName }
/*-----import [xxx.js]-----*/
import { myName as name1 } from "./test1.js";
import { myName as name2 } from "./test2.js";
console.log(name1);// Tom
console.log(name2);// Jerry
```

### import 特点

**只读属性**：不允许在加载模块的脚本里面，改写接口的引用指向，即可以改写 import 变量类型为对象的属性值，不能改写 import 变量类型为基本类型的值。

```javascript
import {a} from "./xxx.js"
a = {}; // error
 
import {a} from "./xxx.js"
a.foo = "hello"; // a = { foo : 'hello' }
```

**单例模式**：多次重复执行同一句 import 语句，那么只会执行一次，而不会执行多次。import 同一模块，声明不同接口引用，会声明对应变量，但只执行一次 import 。

```javascript
import { a } "./xxx.js";
import { a } "./xxx.js";
// 相当于 import { a } "./xxx.js";
 
import { a } from "./xxx.js";
import { b } from "./xxx.js";
// 相当于 import { a, b } from "./xxx.js";
```

**静态执行特性**：import 是静态执行，所以不能使用表达式和变量。

```javascript
import { "f" + "oo" } from "methods";
// error
let module = "methods";
import { foo } from module;
// error
if (true) {
  import { foo } from "method1";
} else {
  import { foo } from "method2";
}
// error
```

## export default

* 在一个文件或模块中，export、import 可以有多个，export default 仅有一个。
* export default 中的 default 是对应的导出接口变量。
* 通过 export 方式导出，在导入时要加{ }，export default 则不需要。
* export default 向外暴露的成员，可以使用任意变量来接收。

```javascript
var a = "My name is Tom!";
export default a; // 仅有一个
export default var c = "error"; 
// error，default 已经是对应的导出变量，不能跟着变量声明语句
 
import b from "./xxx.js"; // 不需要加{}， 使用任意变量接收
```

## 复合使用

export 与 import 可以在同一模块使用，使用特点

* 可以将导出接口改名，包括 default。
* 复合使用 export 与 import ，也可以导出全部，当前模块导出的接口会覆盖继承导出的。

```javascript
export { foo, bar } from "methods";
 
// 约等于下面两段语句，不过上面导入导出方式该模块没有导入 foo 与 bar
import { foo, bar } from "methods";
export { foo, bar };
 
/* ------- 特点 1 --------*/
// 普通改名
export { foo as bar } from "methods";
// 将 foo 转导成 default
export { foo as default } from "methods";
// 将 default 转导成 foo
export { default as foo } from "methods";
 
/* ------- 特点 2 --------*/
export * from "methods"; //这个表示导出全部
```

---

## 导入导出的类型

在JavaScript中，模块（Module）是一种封装代码的方式，允许你将一些功能分割到不同的模块中，然后根据需要导入（Import）或导出（Export）它们。这有助于保持代码的组织性、重用性和可维护性。ECMAScript 6（ES6）引入了模块的基本语法，并且现在已经被大多数现代JavaScript环境所支持。

### 导出模块（Exporting Modules）

你可以使用 `export` 关键字来导出模块中的成员，包括函数、类、表达式、声明等。

**默认导出**（Default Export）:
默认导出允许你导出一个值，并且在导入时不需要使用特定的名称。

```javascript
// math.js
export default function add(x, y) {
  return x + y;
}
```

**具名导出**（Named Export）:
具名导出允许你导出多个值，并且每个值都有一个明确的名称。

```javascript
// shapes.js
export function circleArea(r) {
  return Math.PI * r * r;
}

export function squareArea(s) {
  return s * s;
}
```

### 导入模块（Importing Modules）

在使用 `export` 关键字导出了模块之后，其他模块可以使用 `import` 关键字来导入这些导出的成员。

**导入默认导出**:

```javascript
// main.js
import add from './math.js';

console.log(add(1, 2));
```

**导入具名导出**:

```javascript
// main.js
import { circleArea, squareArea } from './shapes.js';

console.log(circleArea(5));
console.log(squareArea(4));
```

**同时导入默认和具名导出**:

```javascript
// main.js
import add, { circleArea, squareArea } from './math.js';

console.log(add(1, 2));
console.log(circleArea(5));
console.log(squareArea(4));
```

### 注意事项

* 导出的成员名称在使用 `import` 时是区分大小写的。
* 在Node.js环境中，你需要确保你的文件扩展名正确，因为Node.js使用它来决定使用哪种模块加载器（例如`.js`, `.json`, `.node`）。
* 如果你在使用构建工具（如Webpack、Rollup）或Babel，它们可能会为你处理模块的导入导出。
* ES6模块在浏览器中的支持已经非常广泛，但在一些旧版浏览器中可能需要使用Babel等工具进行转译。

使用模块可以帮助你构建更清晰、更可维护的JavaScript应用程序，并且是现代JavaScript开发中的标准实践。
