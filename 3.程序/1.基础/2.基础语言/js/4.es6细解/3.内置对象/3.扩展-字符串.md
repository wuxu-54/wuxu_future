# 扩展-字符串

本文内容：ES6 对字符串的扩展

## 子串识别

ES6新增：

```javascript
let string = "apple,banana,orange";
string.includes("banana");     // true  判断是否找到参数字符串
string.startsWith("apple");    // true  判断参数字符串是否在原字符串的头部
string.endsWith("apple");      // false 判断参数字符串是否在原字符串的尾部
string.startsWith("banana",6)  // true  判断参数字符串是否在原字符串的从头开始index的位置
```

注意点：

* 这三个方法只返回布尔值，如果需要知道子串的位置，还是得用 indexOf 和 lastIndexOf 。
* 这三个方法如果传入了正则表达式而不是字符串，会抛出错误。而 indexOf 和 lastIndexOf 这两个方法，它们会将正则表达式转换为字符串并搜索它。

## 字符串重复

repeat() 字符串重复指定次数，返回新字符串。

注意点：

1. 参数是小数，向下取整
2. 参数是 `[-1,0]` ，会取 0
3. 参数是 `NaN` , 取 0
4. 参数是负数且(-无穷,-1] 或 `Infinity`，报错
5. 参数是字符串，先转换为数字，如果转换失败那就取 0

```javascript
console.log("Hello,".repeat(2));  // "Hello,Hello,"
console.log("Hello,".repeat(3.2));  // "Hello,Hello,Hello,"  小数向下取整
console.log("Hello,".repeat(-0.5));  // ""  取0
console.log("Hello,".repeat(NaN));  // ""  取0
console.log("Hello,".repeat(-1));  //报错，RangeError: Invalid count value
console.log("Hello,".repeat(Infinity));  //报错，RangeError: Invalid count value
console.log("Hello,".repeat("hh")); // "" 字符串转换失败，取0
console.log("Hello,".repeat("2"));  // "Hello,Hello,"
```

## 字符串补全

* padStart  参数字符串从头部补全原字符串，返回新串
* padEnd    参数字符串从尾部补全原字符串，返回新串

```javascript
console.log("h".padStart(5,"o"));  // "ooooh"  参数1 是声明生成字符串长度
console.log("h".padEnd(5,"o"));    // "hoooo"
console.log("h".padStart(5));      // "    h"  如果没有写补全参数，以空格填充

console.log("hello".padStart(5,"A"));  // "hello"  参数1 <= 原字符串长，那按原串返回
console.log("hello".padEnd(10,",world!"));  // "hello,worl" 参数1 > 原字符串长，那截去补全参数多余的字符
```

## 模版字符串

[`] 包裹，[${}]中可以写变量、表达式、函数调用。

作用：方便字符串拼接表达式

例子：

```javascript
let name = "111"
let string = `hello ${name}`  // string 字符串是 hello 111
```

注意：

* 模版字符串换行和空格会被保留

## 标签模版

函数的形参，传入的是模版字符串，调用时省略()

```javascript
alert`Hello`
// 等价于
alert("Hello");
```

应用：过滤HTML字符串，防止输入恶意内容。

## 国际化处理

```javascript
i18n`Hello ${name}, you are visitor number ${visitorNumber}.`;  //i18n 转换语言
// 你好**，你是第**位访问者
```
