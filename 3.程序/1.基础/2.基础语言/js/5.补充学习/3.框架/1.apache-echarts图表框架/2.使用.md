# 使用

ECharts是一个使用JavaScript实现的开源可视化库，可以流畅地运行在PC和移动设备上，兼容当前绝大部分浏览器（如IE8/9/10/11, Chrome, Firefox, Safari等），底层依赖矢量图形库ZRender，提供直观、交互丰富、可高度个性化定制的数据可视化图表。以下是对在JavaScript中使用ECharts的详细讲解：

## 一、引入ECharts

1. **在线引入**：可以通过CDN方式引入ECharts库。在HTML文件的`<head>`标签内添加以下代码：

    ```html
    <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
    ```

    请注意，上述CDN链接可能随时间变化，建议访问[ECharts官方中文网站](https://echarts.apache.org/zh/index.html)获取最新的CDN链接。

2. **本地引入**：如果项目需要离线运行或出于安全考虑，可以下载ECharts库文件并在本地引入。下载`echarts.min.js`文件后，将其放置在项目的合适位置，并在HTML文件中通过`<script>`标签引入。

## 二、准备DOM容器

在HTML文件中，准备一个具备大小的DOM容器，用于放置生成的图表。例如：

```html
<div id="main" style="width: 600px; height: 400px;"></div>
```

## 三、初始化ECharts实例

使用JavaScript获取DOM容器，并初始化ECharts实例。例如：

```javascript
var myChart = echarts.init(document.getElementById('main'));
```

## 四、设置配置项和数据

ECharts通过JSON格式的配置项来定义图表的样式、数据等。配置项通常包括标题（title）、提示框（tooltip）、图例（legend）、坐标轴（xAxis、yAxis）、系列（series）等部分。

以下是一个简单的柱状图配置项示例：

```javascript
var option = {
    title: {
        text: 'ECharts 入门示例'
    },
    tooltip: {},
    legend: {
        data: ['销量']
    },
    xAxis: {
        data: ["衬衫", "羊毛衫", "雪纺衫", "裤子", "高跟鞋", "袜子"]
    },
    yAxis: {},
    series: [{
        name: '销量',
        type: 'bar',
        data: [5, 20, 36, 10, 10, 20]
    }]
};
```

## 五、将配置项设置给ECharts实例

使用`setOption`方法将配置项设置给ECharts实例，从而渲染出图表。例如：

```javascript
myChart.setOption(option);
```

## 六、常用配置项详解

1. **title**：标题组件，包含主标题和副标题。

    ```javascript
    title: {
        text: '主标题',
        subtext: '副标题',
        left: 'center', // 位置参数，'left', 'center', 'right'，也可填数值或百分比
        top: 'top' // 位置参数，'top', 'center', 'bottom'，也可填数值或百分比
    }
    ```

2. **legend**：图例组件，展现了不同系列的标记（symbol）、颜色和名字。可以通过点击图例控制哪些系列不显示。

    ```javascript
    legend: {
        orient: 'vertical', // 布局朝向，可选：'horizontal'、'vertical'
        left: 'left', // 位置参数，'left', 'center', 'right'，也可填数值或百分比
        top: 'top', // 位置参数，'top', 'center', 'bottom'，也可填数值或百分比
        // ...其他配置项
    }
    ```

3. **tooltip**：提示框组件，用于展示数据的详细信息。

    ```javascript
    tooltip: {
        trigger: 'axis', // 可选：'axis'（坐标轴触发）、'item'（数据项图形触发）、'none'（什么都不触发）
        // ...其他配置项，如formatter等
    }
    ```

4. **xAxis**和**yAxis**：直角坐标系内绘图网格的x轴和y轴。

    ```javascript
    xAxis: {
        type: 'category', // 类型：'category'（类目轴）、'value'（数值轴）、'time'（时间轴）
        position: 'bottom', // x轴的位置，'top'、'bottom'
        name: '我是x轴', // 坐标轴名称
        nameLocation: 'start', // 坐标轴名称显示位置
        // ...其他配置项，如axisTick、data等
    },
    yAxis: {
        type: 'value',
        position: 'left', // y轴位置，'left'、'right'
        // ...其他配置项，与xAxis类似
    }
    ```

5. **series**：图表的核心部分，用于定义图表中显示的具体数据和样式。

    ```javascript
    series: [{
        data: [150, 230, 224, 218, 135], // 系列中的数据值
        name: 'data1', // 系列名称，用于tooltip的显示、legend的图例筛选变化
        type: 'line', // 类型：'bar'（柱状图）、'line'（线图）、'pie'（饼图）等
        // ...其他配置项，如stack、formatter等
    }]
    ```

## 七、动态更新数据

当需要动态更新图表数据时，可以重新调用`setOption`方法，并传入新的配置项。例如：

```javascript
// 假设新的数据为
var newData = [6, 25, 30, 15, 12, 28];

// 更新配置项中的series数据
var newOption = {
    series: [{
        data: newData
    }]
};

// 调用setOption方法更新图表
myChart.setOption(newOption);
```

## 八、事件处理

ECharts提供了丰富的事件处理机制，可以通过监听图表的各种事件来实现复杂的交互功能。例如：

```javascript
myChart.on('click', function (params) {
    // 处理点击事件
    console.log(params); // 打印点击事件的相关信息
});
```

通过以上步骤和配置，您可以在JavaScript中使用ECharts创建各种类型的数据可视化图表，并根据业务需求进行高度定制和交互处理。
