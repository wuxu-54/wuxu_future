# require.js

js的模块化工具。很早就有了，是最早的模块概念的实现。通过固定语法进行js模块引入。

## 为什么使用require.js

```js
　　<script src="1.js"></script>
　　<script src="2.js"></script>
　　<script src="3.js"></script>
　　<script src="4.js"></script>
　　<script src="5.js"></script>
　　<script src="6.js"></script>
```

这段代码目的是引入多个js文件，但这种方式会有缺陷：

1. 加载的时候，浏览器会停止网页渲染，加载文件越多，网页失去响应的时间就会越长；
2. 由于js文件之间存在依赖关系，因此必须严格保证加载顺序（比如上例的**1.js**要在**2.js**的前面），依赖性最大的模块一定要放到最后加载，当依赖关系很复杂的时候，代码的编写和维护都会变得困难。

require.js的诞生，就是为了解决这两个问题：

1. 实现js文件的异步加载，避免网页失去响应；
2. 管理模块之间的依赖性，便于代码的编写和维护。

---

## 通过代码展示使用requirejs的好处

### 未使用requirejs

```html
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="a.js"></script>
    </head>
    <body>
      <span>body</span>
    </body>
</html>
```

a.js

```js
function fun1(){
  alert("it works");
}
fun1();

// 写法2：立即执行函数，使用了块作用域来申明function防止污染全局变量
// (function(){
//     function fun1(){
//       alert("it works");
//     }

//     fun1();
// })()
```

当不使用requirejs时，上述代码会先展示空白页面，即`<span>body</span>`未被渲染，alert点击后才出现正常文本。这就是由**JS阻塞浏览器渲染**导致。

### 使用requirejs

上述案例可以改为：

```html
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="require.js"></script>
        <script type="text/javascript">
            require(["a"]);
        </script>
    </head>
    <body>
      <span>body</span>
    </body>
</html>
```

a.js

```js
define(function(){
    function fun1(){
      alert("it works");
    }

    fun1();
})
```

此时运行发现，alert不会阻塞渲染，文本内容正常展示。这就是上面说的requirejs的好处。
