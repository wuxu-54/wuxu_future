# 正则

正则表达式（英语：Regular Expression，在代码中常简写为regex、regexp或RE）使用单个字符串来描述、匹配一系列符合某个句法规则的字符串搜索模式。

搜索模式可用于文本搜索和文本替换。

## js使用

[菜鸟教程正则](https://www.runoob.com/js/js-regexp.html)
[RegExp对象](https://www.runoob.com/jsref/jsref-obj-regexp.html)

---

## 正则基础

JavaScript中的正则表达式是一种强大的文本处理工具，用于匹配字符串中的字符组合。以下是一些基本的正则表达式用法和相关API：

### 正则表达式基础

1. **创建正则表达式**：
   - 字面量语法：使用斜杠`/`包围正则表达式。

     ```javascript
     let regex = /example/;
     ```

   - 构造函数语法：使用`RegExp`构造函数。

     ```javascript
     let regex = new RegExp('example');
     ```

2. **正则表达式修饰符**：
   - `g`：全局搜索，不限制匹配次数。
   - `i`：不区分大小写。
   - `m`：多行匹配。
   - `u`：Unicode，处理Unicode字符。
   - `y`：粘性匹配，确保匹配从目标字符串的当前位置开始。

   ```javascript
   let regex = /example/gi; // 全局搜索，不区分大小写
   ```

### 正则表达式方法

1. **test()**：
   检查字符串是否匹配正则表达式，返回布尔值。

   ```javascript
   let regex = /hello/;
   console.log(regex.test('hello world')); // true
   console.log(regex.test('world hello')); // false
   ```

2. **exec()**：
   检索字符串中与正则表达式相匹配的部分，返回匹配结果数组或`null`。

   ```javascript
   let regex = /hello/;
   let result = regex.exec('hello world');
   console.log(result); // ["hello", index: 0, input: "hello world", groups: undefined]
   ```

3. **match()**：
   检索字符串中与正则表达式相匹配的所有部分，返回匹配结果数组或`null`。

   ```javascript
   let regex = /hello/g;
   let result = 'hello world hello'.match(regex);
   console.log(result); // ["hello", "hello"]
   ```

4. **replace()**：
   替换字符串中与正则表达式匹配的部分。
   - 使用字符串作为替换值：

     ```javascript
     let str = 'hello world';
     let result = str.replace('world', 'JavaScript');
     console.log(result); // "hello JavaScript"
     ```

   - 使用函数作为替换值：

     ```javascript
     let str = 'hello world';
     let result = str.replace(/world/g, match => 'JavaScript');
     console.log(result); // "hello JavaScript"
     ```

5. **search()**：
   检索字符串中与正则表达式相匹配的位置，返回匹配的索引或`-1`。

   ```javascript
   let regex = /world/;
   let index = 'hello world'.search(regex);
   console.log(index); // 6
   ```

6. **split()**：
   使用正则表达式作为分隔符将字符串分割成数组。

   ```javascript
   let regex = /,/;
   let result = 'apple,banana,orange'.split(regex);
   console.log(result); // ["apple", "banana", "orange"]
   ```

### 正则表达式模式

- **字符类**：
  - `.`：匹配任何字符（除了换行符）。
  - `\d`：匹配数字。
  - `\w`：匹配字母、数字或下划线。
  - `\s`：匹配空白字符（空格、制表符、换行符等）。

- **量词**：
  - `*`：匹配前面的子表达式零次或多次。
  - `+`：匹配前面的子表达式一次或多次。
  - `?`：匹配前面的子表达式零次或一次。
  - `{n}`：匹配确定的n次。
  - `{n,}`：至少匹配n次。
  - `{n,m}`：最少匹配n次且最多匹配m次。

- **分组和捕获**：
  - `()`：创建一个捕获组，可以引用匹配的文本。

- **断言**：
  - `^`：匹配输入字符串的开始位置。
  - `$`：匹配输入字符串的结束位置。
  - `\b`：匹配一个单词边界。
  - `\B`：匹配非单词边界。

- **否定字符类**：
  - `[^...]`：匹配任何不在字符类中的字符。

- **特殊序列**：
  - `\0`：匹配NUL字符。
  - `\n`：匹配换行符。
  - `\t`：匹配制表符。

### 示例

```javascript
// 匹配邮箱地址
let emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
console.log(emailRegex.test('example@example.com')); // true

// 替换字符串中的数字
let str = 'The numbers are 12 and 45';
let result = str.replace(/\d+/g, 'X');
console.log(result); // "The numbers are X and X"

// 提取URL中的协议和域名
let urlRegex = /^(https?:\/\/)?([\w.-]+)(\.[\w.-]+)+([\w.,@?^=%&:/~+#-]*[\w@?^=%&/~+#-])?/;
let url = 'http://www.example.com';
let result = url.match(urlRegex);
console.log(result); // ["http://www.example.com", "http://", undefined, "www", "example.com"]

//也可以直接将字符串变量当做正则表达式匹配
let str = "Hello World";
let h = "Hello"；
let index = str.search(h); 

//使用正则表达式对象
let str = "Hello World";
let index = str.search(new RegExp("World")); // 返回 6
```

---

## 正则对象

在JavaScript中，正则表达式可以通过两种方式创建：字面量表示法和构造函数。

### 字面量表示法

使用斜杠 `/` 包围正则表达式模式，并可选地在后面添加修饰符。

```javascript
let regex1 = /test/; // 基本正则表达式
let regex2 = /test/g; // 全局搜索
let regex3 = /test/i; // 不区分大小写
let regex4 = /test/gim; // 全局搜索，不区分大小写，多行匹配
```

### 构造函数

使用 `RegExp` 对象的构造函数来创建正则表达式。这在需要动态构造正则表达式时非常有用。

```javascript
let regex1 = new RegExp("test"); // 基本正则表达式
let regex2 = new RegExp("test", "g"); // 全局搜索
let regex3 = new RegExp("test", "i"); // 不区分大小写
let regex4 = new RegExp("test", "gim"); // 全局搜索，不区分大小写，多行匹配
```

### 正则表达式对象的属性

正则表达式对象有几个有用的属性：

- `source`：正则表达式的字符串表示形式。
- `global`：布尔值，表示是否设置了 `g` 修饰符。
- `ignoreCase`：布尔值，表示是否设置了 `i` 修饰符。
- `multiline`：布尔值，表示是否设置了 `m` 修饰符。
- `flags`：包含所有修饰符的字符串。

```javascript
let regex = /test/gi;
console.log(regex.source); // "test"
console.log(regex.global); // true
console.log(regex.ignoreCase); // true
console.log(regex.multiline); // false
console.log(regex.flags); // "gi"
```

### 正则表达式对象的方法

正则表达式对象本身没有方法，但字符串对象提供了几个与正则表达式一起使用的方法：

- `String.prototype.match(regexp)`：返回一个数组，其中包含字符串中所有匹配正则表达式的子串。
- `String.prototype.replace(regexp, replacement)`：在字符串中替换与正则表达式匹配的部分。
- `String.prototype.search(regexp)`：返回字符串中第一次出现匹配正则表达式的索引。
- `String.prototype.split(regexp)`：使用正则表达式作为分隔符将字符串分割成数组。

### 正则对象使用示例

```javascript
let regex = /test/gi;

// 使用正则表达式对象
let str = "This is a Test and another test.";
let matches = str.match(regex);
console.log(matches); // ["Test", "test"]

let replaced = str.replace(regex, "example");
console.log(replaced); // "This is a example and another example."

let index = str.search(regex);
console.log(index); // 10

let parts = str.split(regex);
console.log(parts); // ["This is a ", " and another "]
```

通过这些属性和方法，你可以灵活地使用正则表达式对象来处理字符串数据。
