# 函数方法

函数结构：`func` 函数名(参数列表)->返回值类型{方法体}

说明：

- 类中的函数叫方法
- 类结构方法分为类方法（也叫静态方法）和实例方法
- `func`关键字修饰
- swift支持类型推断，返回值可省略，参数类型也可省略。

以下是函数方法的说明：

## 函数（Function）

1. **声明函数**：
   使用`func`关键字声明一个函数。

   ```swift
   func greet(person: String) {
       print("Hello, \(person)!")
   }
   ```

2. **内联函数**：
   对于简短的函数，可以使用内联标记`inline`，以指示编译器尽可能内联这个函数。

   ```swift
   @inline(__always)
   func addTwo(_ a: Int) -> Int {
       return a + 2
   }
   ```

3. **递归函数**：
   函数可以调用自身实现递归。

   ```swift
   func factorial(_ n: Int) -> Int {
       if n == 0 { return 1 }
       return n * factorial(n - 1)
   }
   ```

## 方法（Method）

1. **实例方法**：
   在类或结构体中定义的方法称为实例方法，需要通过实例来调用。

   ```swift
   struct Rectangle {
       var width: Int
       var height: Int
       
       func area() -> Int {
           return width * height
       }
   }
   ```

2. **类方法**（Static Method）：
   类方法属于类本身，而不是类的实例，通常用于不需要实例数据的操作。

   ```swift
   class Counter {
       static func reset() {
           // 重置静态数据
       }
   }
   ```

3. **计算属性**：
   方法可以返回一个值，就像计算属性一样。

   ```swift
   extension String {
       func wordCount() -> Int {
           return self.split(separator: " ").count
       }
   }
   ```

4. **下标方法**：
   通过定义下标方法，可以为类、结构体或枚举提供下标访问。

   ```swift
   class Matrix {
       private var grid: [Int]
       
       init(_ rows: Int, _ columns: Int) {
           grid = Array(repeating: 0, count: rows * columns)
       }
       
       subscript(row: Int, column: Int) -> Int {
           get {
               return grid[(row * columns) + column]
           }
           set {
               grid[(row * columns) + column] = newValue
           }
       }
   }
   ```

5. **构造方法**：
   构造方法用于创建和初始化类的实例。

   ```swift
   class Person {
       var name: String
       
       init(name: String) {
           self.name = name
       }
   }
   ```

6. **析构方法**：
   析构方法在类的实例被销毁前执行，用于执行清理工作。

   ```swift
   class TemporaryResource {
       deinit {
           print("TemporaryResource is being deinitialized.")
       }
   }
   ```

7. **访问控制**：
   可以控制方法的访问级别（public, internal, private, fileprivate）。

## 高级特性

其实使用的是函数类型，将函数类型作为入参、返回值使用

1. **尾随闭包**：
   当函数的最后一个参数是一个闭包时，可以将其写在参数列表的外面。

   ```swift
   func someFunction(with closure: () -> Void) {
       closure()
   }
   
   someFunction {
       print("This is a trailing closure.")
   }
   ```

2. **柯里化**（Currying）：
   在Swift中，可以通过返回一个函数来实现柯里化。

   ```swift
   func add(_ a: Int) -> (Int) -> Int {
       return { b in a + b }
   }
   
   let addFive = add(5)
   print(addFive(10)) // 15
   ```

3. **函数类型**：
   函数本身也是一种类型，可以赋值给变量或常量。

   ```swift
   let sumFunction: (Int, Int) -> Int = sum
   ```

Swift的函数和方法提供了强大的封装和抽象能力，使得代码更加模块化和可重用。通过使用不同的参数模式、返回类型和高级特性，Swift允许开发者编写灵活且功能丰富的代码。

---

## 参数细讲

在Swift中，参数是函数、方法、构造器或初始化器的一部分，用于定义传入的输入值。以下是Swift中参数的详细说明：

1. **参数名和类型标注**：
   每个参数都需要指定类型，并且可以有一个外部名称和一个内部名称。外部名称是调用函数时使用的名称，内部名称是在函数体内部使用的名称。

   ```swift
   func someFunction(firstParameter: Int, secondParameter: String) {
       // 使用 firstParameter 和 secondParameter
   }
   ```

2. **默认参数值**：
   参数可以有默认值。如果在调用时未提供参数值，将使用默认值。

   ```swift
   func someFunction(parameterWithDefault: Int = 10) {
       // 如果没有提供 parameterWithDefault 的值，它将默认为 10
   }
   ```

3. **可变参数**：
   使用三个点（`...`）定义可变参数，表示函数可以接收零个或多个参数值，这些值被存储在一个数组中。

   ```swift
   func sumOf(numbers: Int...) -> Int {
       return numbers.reduce(0, +)
   }
   ```

4. **`inout`参数**：
   `inout`参数允许函数修改传入的变量。调用函数时，需要使用`&`符号来表示参数是可变的。

   ```swift
   func addToValue(inout value: Int, amount: Int) {
       value += amount
   }
   var myValue = 5
   addToValue(&myValue, amount: 3) // myValue 现在是 8
   ```

5. **常量参数**：
   对于非`inout`参数，默认情况下它们是常量参数，即在函数体内部不能被修改。

6. **类型参数（泛型参数）**：
   对于泛型函数或方法，可以使用类型参数来允许函数接受不同类型的输入。

   ```swift
   func identity<T>(value: T) -> T {
       return value
   }
   ```

7. **参数标签和外部参数名**：
   可以为参数指定自定义的参数标签和外部参数名，提高代码的可读性。

   ```swift
   func createPerson(name: String, age: Int) -> String {
       return "Name: \(name), Age: \(age)"
   }
   let person = createPerson(name: "Alice", age: 30)
   ```

8. **_ 丢弃外部参数名**：
   如果不想在调用函数时使用外部参数名，可以定义参数时使用下划线 `_`。

   ```swift
   func printNumbers(_ numbers: [Int]) {
       for number in numbers {
           print(number)
       }
   }
   printNumbers([1, 2, 3, 4, 5]) // 直接传入数组，不使用参数名
   ```

9. **参数的内存管理**：
   对于类类型的参数，需要注意循环引用的问题，尤其是在使用闭包时。

10. **参数模式**：
    Swift支持多种参数模式，包括直接传值、传引用（`inout`）、带默认值的参数等。

11. **参数的类型推断**：
    在某些情况下，Swift可以自动推断参数的类型，尤其是在使用元组或字典作为参数时。

通过这些参数特性，Swift提供了灵活和强大的方式来定义函数和方法，使得代码更加清晰和易于维护。

---

## 返回值细讲

在Swift中，函数或方法的返回值是执行完成后提供的结果。返回值是函数或方法契约的一部分，定义了调用者可以期待的输出。以下是Swift中返回值的详细说明：

1. **指定返回类型**：
   在函数或方法的声明中，使用`->`符号后跟类型来指定返回类型。

   ```swift
   func sumOfTwoNumbers(_ a: Int, _ b: Int) -> Int {
       return a + b
   }
   ```

2. **无返回值**：
   如果函数或方法不需要返回任何值，可以使用`Void`作为返回类型。在这种情况下，实际上不会从函数返回任何内容。

   ```swift
   func printHelloWorld() -> Void {
       print("Hello, World!")
   }
   ```

3. **元组返回类型**：
   函数可以返回包含多个值的元组，允许同时返回多个结果。

   ```swift
   func minAndMax(of array: [Int]) -> (min: Int, max: Int)? {
       guard !array.isEmpty else { return nil }
       return (array.min()!, array.max()!)
   }
   ```

4. **返回可选类型**：
   函数可以返回可选类型（`Optional`），表示函数可能没有值，或者在某些条件下无法返回预期的结果。

   ```swift
   func firstCharacter(of string: String) -> Character? {
       return string.isEmpty ? nil : string.first
   }
   ```

5. **返回闭包**：
   函数可以返回闭包，这在需要返回复杂逻辑或回调函数时非常有用。

   ```swift
   func createClosure() -> (Int, Int) -> Int {
       return { $0 + $1 }
   }
   ```

6. **尾随闭包**：
   当函数的最后一个参数是闭包时，可以将其作为尾随参数，写在参数列表外面，这在处理异步回调时很常见。

   ```swift
   func performOperation(with value: Int, completion: (Int) -> Void) {
       completion(value)
   }

   performOperation(with: 10) {
       print($0) // 10
   }
   ```

7. **返回类型推断**：
   Swift编译器可以根据函数或方法的返回语句自动推断返回类型，这减少了需要显式指定返回类型的需要。

   ```swift
   func sayHello(to person: String) {
       print("Hello, \(person)!")
       // 编译器推断返回类型为 Void
   }
   ```

8. **多重返回点**：
   在Swift中，函数或方法可以有多个返回点。每个返回点都可以根据其位置和上下文返回不同的值。

9. **错误处理**：
   返回值可以用于错误处理，例如，当函数执行失败时返回`nil`或特定的错误代码。

10. **返回值和参数的一致性**：
    返回值的类型应与函数或方法的预期用途一致，以确保调用者能够正确地使用返回的数据。

通过合理使用返回值，Swift中的函数和方法可以提供清晰的输出，使得代码逻辑更加明确和易于理解。返回值是函数式编程和命令式编程中的重要组成部分，它们允许开发者构建模块化和可重用的代码。
