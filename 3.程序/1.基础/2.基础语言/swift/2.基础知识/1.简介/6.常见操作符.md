# 常见操作符符

Swift提供了丰富的运算符，用于执行基本的数学运算、逻辑运算、位运算等。以下是Swift中一些主要的运算符类型及其用法：

1. **基本赋值运算符**：
   - `=`：赋值运算符，用于给变量赋值。

2. **算术运算符**：
   - `+`：加法。
   - `-`：减法。
   - `*`：乘法。
   - `/`：除法。
   - `%`：取余（求两个数相除的余数）。
   - `+=`、`-=`、`*=`、`/=`、`%=`：复合赋值运算符，如`a += b`相当于`a = a + b`。

3. **比较运算符**：
   - `==`：等于，比较值。
   - `!=`：不等于，比较值。
   - `>`、`<`：大于、小于。
   - `>=`、`<=`：大于等于、小于等于。
   - `===`：等于，比较内存地址。（检查两个引用是否引用同一个对象，如类、闭包）
     >哪些是引用类型：闭包、协议类型、类类型
   - `!==`：不等于，比较内存地址。

4. **逻辑运算符**：
   - `&&`：逻辑与。
   - `||`：逻辑或。
   - `!`：逻辑非。

5. **位运算符**：
   - `&`：按位与。
   - `|`：按位或。
   - `^`：按位异或。
   - `~`：按位取反。
   - `<<`：左移位。
   - `>>`：右移位。

6. **范围运算符**：
   - `a...b`：闭范围运算符，表示从`a`到`b`（包括`a`和`b`）。
   - `a..<b`：半开范围运算符，表示从`a`到`b`（不包括`b`）。

7. **三元条件运算符**：
   - `condition ? expression1 : expression2`：如果`condition`为真，则结果为`expression1`，否则为`expression2`。

8. **空合并运算符**：
   - `??`：如果可选类型不是`nil`，则返回其值，否则返回右侧提供的默认值。

9. **可选链运算符**：
   - `?.`：可选链，用于访问可选类型的属性或调用方法，如果可选类型为`nil`，则停止链式调用并返回`nil`。

10. **下标运算符**：
    - `array[index]`：使用下标访问数组或字典的元素。

11. **解包运算符**：
    - `!`：用于隐式解析可选类型，如果可选类型为`nil`，则程序崩溃。

12. **类型转换运算符**：
    - `as`：用于进行显式类型转换。
    - `as?`：向下类型转换，如果转换成功则返回可选类型，失败则返回`nil`。
    - `is`：检查类型。

13. **自增和自减运算符**：Swift5以后的版本已被移除，使用 `+=`或`-=`
    - ~~`++`：自增，例如`var i = 0; i++`~~。
    - ~~`--`：自减，例如`var i = 0; i--`~~。

14. **组合赋值运算符**：
    - 例如`+=`、`-=`、`*=`等，这些运算符结合了赋值和相应的算术运算。

15. **自定义运算符**：
    - 允许开发者定义自己的运算符，包括一元运算符、二元运算符和三元运算符。

16. `$`：表示引用或绑定一个属性或参数，如：闭包使用`$0`绑定第一个参数。

以下是一些运算符使用的例子：

```swift
let a = 10
let b = 5
let sum = a + b // 使用加法运算符
let difference = a - b // 使用减法运算符
let product = a * b // 使用乘法运算符
let quotient = a / b // 使用除法运算符
let remainder = a % b // 使用取余运算符

let isGreater = a > b // 使用比较运算符
let areEqual = a == b // 使用等于运算符

let logicalAnd = true && false // 使用逻辑与运算符
let logicalOr = true || false // 使用逻辑或运算符
let notTrue = !true // 使用逻辑非运算符

let optionalValue: Int? = 10
let defaultValue = optionalValue ?? 0 // 使用空合并运算符

let rangeClosed = 1...5 // 使用闭范围运算符
let rangeHalfOpen = 1..<5 // 使用半开范围运算符

let ternaryResult = a > b ? "Greater" : "Not Greater" // 使用三元条件运算符
```

自定义运算符：

```swift
infix operator ++ {
    associativity right
    precedence 140
}

func ++(left: Int, right: Int) -> Int {
    return left + right
}

let result = 5 ++ 3 // result 的值是 8
```

在这个例子中，我们定义了一个名为 `++` 的自定义二元运算符，并为其提供了实现。

---

## 补充`.`操作符语法糖

在Swift中，点（`.`）操作符用于访问类、结构体、枚举或其他类型的属性、方法和子类。当你看到类似`.continuous`这样的语法时，它表示访问一个名为`continuous`的成员，这个成员是前面指定类型的一部分。

### `.continuous` 的含义

在`.continuous`的上下文中，它通常指的是一个枚举案例或者属性。例如，如果有一个名为`Style`的枚举，并且它有一个案例叫做`continuous`，那么`.continuous`就是访问这个枚举案例的方式。

```swift
enum Style {
    case continuous
    // 其他案例...
}

let myStyle = .continuous //这是一种特殊
```

在这个例子中，`.continuous`是枚举`Style`的一个案例，用于指定某种样式。

---

## 自定义运算符详解

在 Swift 中，你可以创建自定义运算符来表示特定的操作，这可以使你的代码更加直观和易于理解。自定义运算符可以是单字符、多个字符或者甚至包含 Unicode 字符。以下是关于如何在 Swift 中创建和使用自定义运算符的详细说明：

### 定义自定义运算符

1. **声明运算符**:
   使用 `operator` 关键字来声明一个新的运算符。

2. **指定优先级和结合性**:
   使用 `precedencegroup` 关键字来定义运算符的优先级和结合性。

3. **实现运算符**:
   创建一个实现运算符逻辑的全局函数。

4. **自定义运算符关键字分为以下三种**：
   - `prefix` 前缀：运算符在参数左边
   - `infix` 中缀：需要两个参，运算符在中间
   - `postfix` 后缀：运算符在参数右边

### 示例：定义一个中缀运算符

```swift
// 定义一个加法运算符
infix operator +++: AdditionPrecedence

// 定义运算符的优先级和结合性
precedencegroup AdditionPrecedence {
    associativity: left
    higherThan: MultiplicationPrecedence
}

// 实现运算符
func +++ (left: Int, right: Int) -> Int {
    return left + right
}

let result = 3 +++ 5 // result 的值是 8
```

在这个例子中，我们定义了一个名为 `+++` 的中缀运算符，并将其与加法运算符的优先级相关联。然后我们实现了一个函数来定义运算符的行为。

### 示例：定义一个前缀运算符

```swift
// 定义一个前缀运算符
prefix operator !

// 实现运算符
prefix func ! (operand: Bool) -> Bool {
    return !operand
}

let isTrue = true
let isFalse = !isTrue // isFalse 的值是 false
```

在这个例子中，我们定义了一个名为 `!` 的前缀运算符，并实现了一个函数来反转布尔值。

### 示例：定义一个后缀运算符

```swift
// 定义一个后缀运算符
postfix operator ++

// 实现运算符
postfix func ++ (operand: inout Int) -> Int {
    operand += 1
    return operand
}

var number = 10
let incremented = number++ // number 的值现在是 11，incremented 的值是 11
```

在这个例子中，我们定义了一个名为 `++` 的后缀运算符，并实现了一个函数来递增整数的值。

### 注意事项

- 自定义运算符应该具有明确的语义，避免使用容易混淆或与现有运算符冲突的符号。
- 自定义运算符不能与 Swift 标准库中的运算符重名。
- 自定义运算符的实现必须是一个全局函数。
- 运算符的优先级和结合性应该根据实际的运算逻辑来设置，以确保表达式的计算结果符合预期。

通过自定义运算符，你可以为特定的操作提供更直观和清晰的语法，使得代码更加易于理解和维护。
