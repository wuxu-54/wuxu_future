# 协议

在Swift中，协议（Protocol）是一种蓝图，定义了一套方法、属性、下标或关联类型，这些必须由遵循协议的类型实现。协议可以被认为是一种契约，规定了实现它的类型需要遵守的规则。
>等同于java的接口，是一种约束。增加了扩展、默认实现(kotlin也有支持接口默认实现的能力)

以下是Swift中协议的一些关键特性：

1. **定义协议**：
   使用`protocol`关键字来定义协议。

   ```swift
   protocol Printable {
       func printDetails()
   }
   ```

2. **协议的方法和属性**：
   协议可以包含方法和属性，这些需要在遵循协议的类型中实现。

   ```swift
   protocol Measurable {
       var size: Double { get }
   }
   ```

3. **协议的继承**：
   协议可以继承一个或多个其他协议。

   ```swift
   protocol Named {
       var name: String { get }
   }
   
   protocol Aged: Named {
       var age: Int { get }
   }
   ```

4. **协议的默认实现**：
   协议可以提供默认实现，遵循协议的类型可以选择使用默认实现或提供自己的实现。

   ```swift
   protocol HasArea {
       var area: Double { get }
       func calculateArea() -> Double
   }
   
   extension HasArea {
       func calculateArea() -> Double {
           return area * area
       }
   }
   ```

5. **协议的组合**：
   类型可以通过遵循多个协议来组合不同的行为。

   ```swift
   class Circle: Measurable, Drawable {
       // 实现协议要求的方法和属性
   }
   ```

6. **协议作为类型**：
   可以将协议用作类型，例如函数参数或返回类型。

   ```swift
   func doSomething(with object: Measurable) {
       print("The size is \(object.size)")
   }
   ```

7. **协议的扩展**：
   可以使用扩展（Extension）为现有协议添加功能或提供默认实现。

   ```swift
   extension Measurable {
       func doubleSize() -> Double {
           return size * 2
       }
   }
   ```

8. **协议的类型约束**：
   在泛型中，可以使用协议作为类型约束，确保类型遵循特定的协议。

   ```swift
   func printItems<T: Measurable>(items: [T]) {
       for item in items {
           print("Item size: \(item.size)")
       }
   }
   ```

9. **协议的可选实现**：
   协议可以包含可选方法（通过在方法前加`@objc`），这意味着遵循协议的类可以不实现这些方法。

10. **协议的委托模式**：
    协议常用于实现委托模式（Delegation），允许对象之间进行通信。

11. **协议的属性观察器**：
    协议的属性可以有`willSet`和`didSet`观察器，即使属性是通过协议定义的。

12. **协议的构造器要求**：
    协议可以要求遵循它的类型实现特定的构造器。

通过使用协议，Swift允许开发者定义灵活的、可重用的行为集合，这些可以在多种不同的类型之间共享，同时保持代码的解耦和可扩展性。
