# 继承

在Swift中，继承（Inheritance）是一种创建新类（子类）基于现有类（父类或超类）的机制。继承允许新类自动获得现有类的属性、方法和构造器。以下是继承的一些关键概念和用法：

## 基本语法

1. **声明子类**：
   使用冒号（`:`）后跟父类名来声明子类。

   ```swift
   class Superclass {
       var commonProperty = "Common"
   }

   class Subclass: Superclass {
       var subclassProperty = "Subclass"
   }
   ```

2. **继承属性**：
   子类自动继承父类的存储属性、计算属性。

3. **继承方法**：
   子类继承父类的所有实例方法。

4. **继承构造器**：
   子类继承父类的指定构造器和便利构造器。

5. **重写（Overriding）**：
   子类可以使用`override`关键字重写父类的方法、属性观察器、下标脚本等。

   ```swift
   class Animal {
       func speak() {
           print("The animal makes a sound.")
       }
   }

   class Dog: Animal {
       override func speak() {
           print("The dog barks.")
   }
   
   /*-----重写属性观察器------*/

   class Circle {
    var radius = 12.5
    var area: String {
        return "矩形半径为 \(radius) "
    }
    }

    class Rectangle: Circle {
        var print = 7
        /*这是get*/
        override var area: String {
            return super.area + " ，但现在被重写为 \(print)"
        }
    }


    let rect = Rectangle()
    rect.radius = 25.0
    rect.print = 3
    print("半径: \(rect.area)")

    class Square: Rectangle {
        override var radius: Double {
            didSet {
                print = Int(radius/5.0)+1
            }
        }
    }


    let sq = Square()
    sq.radius = 100.0
    print("半径: \(sq.area)")
   ```

6. **防止重写**：
   使用`final`关键字可以防止方法或类被重写。

   ```swift
   final class Cat {
       func speak() {
           print("The cat meows.")
       }
   }
   ```

7. **访问控制**：
   子类可以访问父类的`public`和`internal`成员，但不能直接访问`private`成员。

8. **初始化和反初始化**：
   子类需要调用父类的合适构造器来确保父类被正确初始化。子类的`deinit`可以执行清理工作。

   ```swift
   class Person {
       var name: String
       init(name: String) {
           self.name = name
       }
   }

   class Employee: Person {
       var jobTitle: String
       override init(name: String, jobTitle: String) {
           self.jobTitle = jobTitle
           super.init(name: name)
       }
   }
   ```

9. **使用`super`**：
   在子类中，使用`super`关键字来访问父类的属性、方法和构造器。

10. **多态性**：
    继承允许多态性，即同一个接口可以有多个实现。这使得可以通过父类引用来使用子类对象。

11. **类簇（Class Clusters）**：
    使用继承来实现类簇，这是一种设计模式，用于创建一组相关的子类，这些子类对外隐藏其具体类型。

## 示例

以下是使用继承的一个示例：

```swift
class MediaItem {
    var name: String
    init(name: String) {
        self.name = name
    }
}

class Movie: MediaItem {
    var director: String
    init(name: String, director: String) {
        self.director = director
        super.init(name: name)
    }
}

class Song: MediaItem {
    var artist: String
    init(name: String, artist: String) {
        self.artist = artist
        super.init(name: name)
    }
}

let libraryItem = Movie(name: "Inception", director: "Christopher Nolan")
print(libraryItem.name) // 输出 "Inception"
```

在这个示例中，`Movie`和`Song`都继承自`MediaItem`类，并且能够使用其`name`属性和初始化器。同时，它们各自添加了特定的属性，并重写了初始化器。

继承是面向对象编程中的一个核心概念，它允许代码复用和扩展现有类的功能。通过合理使用继承，可以创建结构清晰、易于维护的代码。
