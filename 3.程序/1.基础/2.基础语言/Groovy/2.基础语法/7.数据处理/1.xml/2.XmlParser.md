# XmlParser

在 Groovy 中，`XmlParser` 类是 `groovy.xml` 包的一部分，用于解析 XML 文档并将其转换为一个 DOM（Document Object Model）结构。这使得你可以以编程方式遍历和操作 XML 数据。以下是 `XmlParser` 的一些关键用法：

## 1. 创建 XmlParser 实例

```groovy
import groovy.xml.XmlParser

def parser = new XmlParser()
```

## 2. 解析 XML 字符串

使用 `parseText` 方法解析 XML 字符串：

```groovy
def xmlText = '''
<books>
    <book>
        <title>Groovy in Action</title>
        <author>Dierk König</author>
    </book>
</books>
'''

def rootNode = parser.parseText(xmlText)
```

## 3. 解析 XML 文件

如果你有一个 XML 文件，可以使用 `parse` 方法来解析它：

```groovy
def file = new File('path/to/your/xmlfile.xml')
def rootNode = parser.parse(file)
```

## 4. 遍历 DOM 树

解析后的 XML 树可以像其他 Groovy 对象一样被遍历：

```groovy
rootNode.book.each { book ->
    println "Title: ${book.title.text()}"
    println "Author: ${book.author.text()}"
}
```

## 5. 访问节点属性

使用 `@` 符号访问节点的属性：

```groovy
if (book.'@id') {
    println "Book ID: ${book.'@id'.text()}"
}
```

## 6. 使用 XPath 表达式

虽然 `XmlParser` 本身不直接支持 XPath 表达式，但你可以通过调用节点的 `find` 方法来使用 XPath：

```groovy
def bookNode = rootNode.find { it.name() == 'book' && it.'@type' == 'reference' }
```

## 7. 处理解析错误

使用 try-catch 块来捕获并处理解析错误：

```groovy
try {
    def rootNode = parser.parseText(malformedXmlText)
} catch (Exception e) {
    println "Error parsing XML: ${e.message}"
}
```

## 8. 自定义解析行为

`XmlParser` 允许你通过设置不同的属性来自定义解析行为，例如忽略空白或注释：

```groovy
def parser = new XmlParser(ignoreWhitespace: true, preserveWhitespace: false)
```

`XmlParser` 是 Groovy 中处理 XML 的强大工具，它提供了一种简单直观的方式来读取、解析和操作 XML 数据。通过 DOM 方法，你可以访问和修改 XML 文档的元素、属性和文本内容。
