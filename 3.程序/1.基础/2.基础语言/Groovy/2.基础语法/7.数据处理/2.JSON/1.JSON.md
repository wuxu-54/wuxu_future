# JSON

Groovy 提供了对 JSON（JavaScript Object Notation）的原生支持，使得处理 JSON 数据变得简单直观。以下是在 Groovy 中处理 JSON 的一些基本方法：

## 1. 解析 JSON

Groovy 可以使用 `groovy.json.JsonSlurper` 类来解析 JSON 字符串。

```groovy
import groovy.json.JsonSlurper

def jsonSlurper = new JsonSlurper()
def result = jsonSlurper.parseText(someJsonString)
```

## 2. 创建 JSON

使用 `groovy.json.JsonBuilder` 类可以方便地构建 JSON 结构。

```groovy
import groovy.json.JsonBuilder

def jsonBuilder = new JsonBuilder()
def result = jsonBuilder {
    name "Groovy"
    version "3.0"
    features [
        "Dynamic typing",
        "Closure support"
    ]
}
println result.toString()
```

## 3. 处理 JSON 对象

解析后的 JSON 对象在 Groovy 中是一个 `Map` 或 `List`，可以直接操作。

```groovy
def jsonMap = jsonSlurper.parseText('{"name": "Groovy", "version": "3.0"}')
println "Name: ${jsonMap.name}"
println "Version: ${jsonMap.version}"
```

## 4. 处理 JSON 数组

JSON 数组在 Groovy 中被解析为 `List`。

```groovy
def jsonArray = jsonSlurper.parseText('["Groovy", "Java", "Scala"]')
jsonArray.each { language ->
    println language
}
```

## 5. 嵌套 JSON

Groovy 可以轻松处理嵌套的 JSON 对象。

```groovy
def nestedJson = jsonSlurper.parseText('''
{
    "project": {
        "name": "Groovy",
        "version": "3.0"
    },
    "features": [
        "Dynamic typing",
        "Closure support"
    ]
}
''')

println "Project Name: ${nestedJson.project.name}"
```

## 6. 构建复杂 JSON

使用 `JsonBuilder` 可以构建包含嵌套对象和数组的复杂 JSON。

```groovy
def complexJson = JsonBuilder.newInstance()
complexJson {
    project {
        name "Groovy"
        version "3.0"
    }
    features(["Dynamic typing", "Closure support"])
}
println complexJson.toString()
```

## 7. 格式化 JSON 输出

Groovy 的 `JsonOutput` 类可以用于格式化 JSON 输出。

```groovy
import groovy.json.JsonOutput

def prettyJson = JsonOutput.prettyPrint(someJsonString)
println prettyJson
```

## 8. 处理 JSON 与 Groovy 对象的转换

Groovy 还提供了 `FromJson` 和 `ToJson` 等类来处理 JSON 与 Groovy 对象之间的转换。

```groovy
import groovy.json.FromJson

class Project {
    String name
    String version
}

def projectJson = jsonSlurper.parseText(someProjectJsonString, Project)
println "Project Name: ${projectJson.name}"
```

Groovy 的 JSON 处理能力非常强大，提供了丰富的 API 来满足不同的需求，从简单的解析和构建到复杂的数据转换和格式化。这些特性使得在 Groovy 中处理 JSON 数据变得非常直观和方便。
