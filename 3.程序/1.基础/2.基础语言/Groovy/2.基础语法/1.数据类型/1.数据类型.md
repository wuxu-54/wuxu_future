# Groovy数据类型

以下是一些主要的 Groovy 数据类型：

1. **数值类型**：
   - `Integer`：整数类型，对应 Java 的 `int`。
   - `Long`：长整数类型，对应 Java 的 `long`。
   - `BigInteger`：任意精度的整数类型。
   - `Float`：单精度浮点数类型，对应 Java 的 `float`。
   - `Double`：双精度浮点数类型，对应 Java 的 `double`。
   - `BigDecimal`：任意精度的浮点数类型。

2. **字符类型**：
   - `Character`：单个字符类型，对应 Java 的 `char`。

3. **布尔类型**：
   - `Boolean`：布尔类型，只有 `true` 和 `false` 两个值。

4. **字符串类型**：
   - `String`：字符串类型，用于表示文本数据。

5. **日期和时间类型**：
   - `Date`：日期和时间类型，对应 Java 的 `java.util.Date`。

6. **集合类型**：
   - `List`：列表，可以包含重复的元素。
   - `Set`：集合，元素唯一，不允许重复。
   - `Map`：映射，键值对集合，键不允许重复。

7. **数组类型**：
   - `Object[]`：对象数组，可以包含任何类型的元素。

8. **范围类型**：
   - `Range`：表示一个范围，如 `1..10` 表示从 1 到 10 的整数范围。

9. **正则表达式类型**：
   - `java.util.regex.Pattern` 和 `java.util.regex.Matcher`：用于处理正则表达式。

10. **类类型**：
    - 任何类都可以作为类型使用，包括 Groovy 类和 Java 类。

11. **枚举类型**：
    - `enum`：枚举类型，用于定义一组固定的常量。

12. **GString**：
    - 一种特殊的字符串类型，可以在字符串中嵌入 Groovy 表达式。

13. **动态类型**：
    - `def`：动态类型，可以表示任何类型的对象。

注意：

Groovy 支持类型推断，这意味着在声明变量时通常不需要显式指定类型，编译器会在运行时根据赋值的值来推断类型。此外，Groovy 也支持 Java 的泛型，但使用方式略有不同。

---

## 定义变量

在 Groovy 中定义变量非常简单，并且由于其动态类型的特性，你可以在不明确指定类型的情况下声明变量。以下是一些定义变量的详解和示例：

### 1. 基本类型变量

在 Groovy 中，你可以使用 `def` 关键字来定义变量，这允许变量在运行时持有任何类型的值。

```groovy
def name = "Alice" // 字符串
def age = 30        // 整数
def isStudent = true // 布尔值
```

### 2. 数组

在 Groovy 中，数组的定义与 Java 类似，但不需要指定类型，因为 Groovy 是动态类型的。

```groovy
def numbers = [1, 2, 3, 4, 5] // 整数数组
def names = ["Alice", "Bob", "Charlie"] // 字符串数组
```

### 3. 列表

Groovy 的列表类似于 Java 的 `ArrayList`，你可以使用方括号来定义列表。

```groovy
def list = [] // 创建一个空列表
list << 1    // 在列表末尾添加元素
list.add("Hello") // 使用 add 方法添加字符串
```

### 4. 映射（Map）

映射在 Groovy 中用于表示键值对集合，类似于 Java 的 `HashMap`。

```groovy
def map = [key1: "value1", key2: "value2"] // 创建一个映射
map["key3"] = "value3" // 添加新的键值对
```

### 5. 范围

Groovy 允许你定义一个范围，这在迭代时非常有用。

```groovy
def range = 1..5 // 从 1 到 5 的范围
for (def i in range) {
    println i
}
```

### 6. 正则表达式

Groovy 允许你直接定义正则表达式。

```groovy
def regex = ~/^[a-zA-Z]+@[a-zA-Z]+\.[a-zA-Z]+/ // 定义一个正则表达式
```

### 7. 引用其他变量

你可以引用其他变量的类型来定义新变量。

```groovy
def anotherVariable = "Some text"
def sameTypeVariable = anotherVariable // 复制 anotherVariable 的类型和值
```

### 8. 强制类型声明

虽然 Groovy 是动态类型的，但你也可以显式地声明变量的类型。

```groovy
String name = "Alice" // 显式声明为 String 类型
int age = 30          // 显式声明为 int 类型
```

### 9. 使用 `as` 进行类型转换

你可以使用 `as` 关键字来显式地转换变量的类型。

```groovy
def value = "123"
int number = value as int // 将字符串转换为整数
```

### 10. 变量作用域

在 Groovy 中，变量的作用域可以通过关键字 `def`（局部变量）、`var`（类变量）等来定义。

```groovy
def localVar = "local" // 局部变量
var classVar = "class" // 类变量，可以在类的其他方法中访问
```

---

## 泛型

Groovy 的泛型系统与 Java 相似，但有一些简化和差异。以下是 Groovy 中泛型的一些关键点：

1. **类型声明**：
   - 泛型可以通过在类名后面添加类型参数来声明，例如 `List<String>` 表示一个只能包含 `String` 对象的列表。

2. **类型推断**：
   - Groovy 支持类型推断，这意味着如果变量的类型可以从赋值中推断出来，就不需要显式声明类型。例如：

     ```groovy
     def list = ['a', 'b', 'c'] // 推断为 List<String>
     ```

3. **通配符**：
   - Groovy 支持使用通配符来指定泛型的上限或下限。例如，`List<? extends Number>` 表示一个列表，它可以包含 `Number` 类或其子类的实例。

4. **泛型方法**：
   - 可以在方法中使用泛型，以使方法能够接受不同类型的参数并返回相应类型的结果。例如：

     ```groovy
     def <T> T identity(T obj) {
         return obj
     }
     ```

5. **泛型类**：
   - 类可以定义泛型类型参数，使得类的实例可以是任何类型。例如：

     ```groovy
     class Box<T> {
         private T content
         T getContent() { content }
         void setContent(T content) { this.content = content }
     }
     ```

6. **协变和逆变**：
   - Groovy 支持协变和逆变，这允许在子类型和超类型之间进行泛型的转换。这在集合操作中特别有用。
   > 协变和逆变：[协变和逆变](./4.%E9%80%86%E5%8F%98%E4%B8%8E%E5%8D%8F%E5%8F%98.md)

7. **原始类型**：
   - 在 Groovy 中，如果泛型没有被指定，它将默认为 `java.lang.Object`。这被称为原始类型，类似于 Java 中的原始类型。

8. **静态编译**：
   - Groovy 支持静态编译，这意味着在编译时可以进行类型检查，从而提高运行时性能并减少运行时错误。

9. **与 Java 的兼容性**：
   - Groovy 的泛型与 Java 兼容，这意味着 Groovy 编写的泛型代码可以与 Java 编写的代码无缝集成。

10. **类型擦除**：
    - 与 Java 类似，Groovy 也使用类型擦除来实现泛型，这意味着在运行时，泛型的类型信息将不会被保留。
