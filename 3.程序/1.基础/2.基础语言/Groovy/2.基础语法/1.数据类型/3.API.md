# API

Groovy可以调用java api，也针对某些api进行了扩展。

## 字符串

以下是一些常用的字符串方法：

### 基本字符串方法

- `length()`: 返回字符串的长度。
- `charAt(int index)`: 返回指定索引处的字符。
- `toUpperCase()`: 将字符串转换为大写。
- `toLowerCase()`: 将字符串转换为小写。
- `substring(int beginIndex)`: 返回一个新的字符串，包含从指定索引开始的子字符串。
- `substring(int beginIndex, int endIndex)`: 返回一个新的字符串，包含从 `beginIndex` 到 `endIndex - 1` 的子字符串。
- `replace(CharSequence target, CharSequence replacement)`: 替换字符串中所有的目标序列。

### Groovy 扩展的字符串方法

- `capitalize()`: 将字符串的首字母大写，其余字母小写。
- `center(int width)`: 使用空格填充字符串，使其居中并达到指定宽度。
- `contains(CharSequence s)`: 检查字符串是否包含特定的序列。
- `count(CharSequence s)`: 计算字符串中出现特定序列的次数。
- `endsWith(CharSequence suffix)`: 检查字符串是否以特定序列结尾。
- `endsWith(Object suffix)`: 检查字符串是否以特定字符结尾。
- `expand()`: 展开字符串中的 GString 表达式。
- `getAt(int index)`: 安全地获取字符串中指定索引的字符。
- `isAllWhitespace()`: 检查字符串是否只包含空白字符。
- `isAlpha()`: 检查字符串是否只包含字母。
- `isAlphanumeric()`: 检查字符串是否只包含字母和数字。
- `isBlank()`: 检查字符串是否为空或只包含空白字符。
- `isCase(String type)`: 检查字符串是否符合指定的大小写类型（`UPPERCASE`, `LOWERCASE`, `TITLE`）。
- `isDigit()`: 检查字符串是否只包含数字。
- `isNumber()`: 检查字符串是否是数值。
- `isWhitespace()`: 检查字符串是否只包含空白字符。
- `leftShift(CharSequence cs)`: 将字符序列连接到字符串末尾。
- `minus(CharSequence cs)`: 从字符串中删除所有出现的指定序列。
- `padLeft(int size)`: 使用空格填充字符串左侧，直到达到指定大小。
- `padRight(int size)`: 使用空格填充字符串右侧，直到达到指定大小。
- `split()`: 按空白字符分割字符串。
- `split(String regex)`: 按正则表达式分割字符串。
- `startsWith(CharSequence prefix)`: 检查字符串是否以特定序列开始。
- `times(int n)`: 将字符串重复 n 次。
- `toList()`: 将字符串转换为字符列表。

### 字符串示例

以下是一些使用 Groovy 字符串方法的示例：

```groovy
def text = "Hello, World!"

// 字符串长度
println "Length: ${text.length()}"

// 大小写转换
println "Uppercase: ${text.toUpperCase()}"
println "Lowercase: ${text.toLowerCase()}"

// 子字符串
println "Substring: ${text.substring(7, 12)}"

// 替换
println "Replace 'World' with 'Groovy': ${text.replace('World', 'Groovy')}"

// 检查是否包含
println "Contains 'Hello': ${text.contains('Hello')}"

// 统计出现次数
println "Count 'o': ${text.count('o')}"

// 两端对齐
println "Centered: ${text.center(20)}"

// 检查是否以特定字符或字符串结尾
println "Ends with '!': ${text.endsWith('!')}"

// 展开 GString
def name = "Alice"
def greeting = "${name} says Hello!"
println "Expanded: ${greeting.expand()}"

// 字符串分割
def words = text.split()
println "Words: ${words}"

// 重复字符串
println "Repeated: ${text * 3}"
```

---

## List

Groovy 的 `List` 接口继承自 Java 的 `List` 接口，并添加了一些 Groovy 特有的方法，使得对列表的操作更加简洁和富有表现力。以下是一些常用的 `List` 方法：

### 基本方法

- `add(Object o)`: 在列表末尾添加一个元素。
- `remove(Object o)`: 从列表中移除一个元素。
- `get(int index)`: 获取列表中指定位置的元素。
- `set(int index, Object element)`: 替换列表中指定位置的元素。
- `size()`: 返回列表中的元素数量。

### Groovy 扩展方法

- `each(Closure c)`: 对列表中的每个元素执行闭包。
- `collect(Closure c)`: 将闭包应用于列表中的每个元素，并返回一个包含结果的新列表。
- `find(Closure c)`: 查找列表中第一个满足闭包条件的元素。
- `findAll(Closure c)`: 查找列表中所有满足闭包条件的元素，并返回一个新的列表。
- `inject(Object initialValue, Closure c)`: 将闭包应用于列表中的元素，并与初始值累积结果。
- `sort()`: 返回列表的排序副本。
- `sort(Closure c)`: 根据闭包定义的比较逻辑返回列表的排序副本。
- `max()`: 返回列表中的最大元素。
- `min()`: 返回列表中的最小元素。
- `sum(Number initialValue)`: 计算列表元素的总和，可以指定初始值。

### List示例

以下是一些使用 Groovy `List` 方法的示例：

```groovy
def numbers = [3, 1, 4, 1, 5, 9, 2, 6, 5]

// 使用 each 方法打印列表中的每个元素
numbers.each {
    println it
}

// 使用 collect 方法创建一个新列表，包含每个元素的平方
def squares = numbers.collect { it * it }
println squares

// 使用 find 方法查找第一个等于 5 的元素
def firstFive = numbers.find { it == 5 }
println firstFive

// 使用 findAll 方法查找所有等于 5 的元素
def allFives = numbers.findAll { it == 5 }
println allFives

// 使用 inject 方法计算列表元素的总和
def sum = numbers.inject(0) { total, num -> total + num }
println sum

// 使用 sort 方法对列表进行排序
def sortedNumbers = numbers.sort()
println sortedNumbers

// 使用 max 和 min 方法找到最大和最小元素
def maxNumber = numbers.max()
def minNumber = numbers.min()
println "Max: $maxNumber, Min: $minNumber"
```

### 俩List合并

在 Groovy 中，合并两个列表（list）的集合是非常简单的。这里有几种方法来实现列表的合并：

#### 1. 使用 `+` 操作符

Groovy 允许你使用 `+` 操作符来合并两个列表。

```groovy
def list1 = [1, 2, 3]
def list2 = [4, 5, 6]
def mergedList = list1 + list2
println(mergedList) // 输出: [1, 2, 3, 4, 5, 6]
```

#### 2. 使用 `addAll` 方法

你可以使用 `addAll` 方法将一个列表中的所有元素添加到另一个列表的末尾。

```groovy
def list1 = [1, 2, 3]
def list2 = [4, 5, 6]
list1.addAll(list2)
println(list1) // 输出: [1, 2, 3, 4, 5, 6]
```

#### 3. 使用 `plus` 方法

`plus` 方法也可以实现列表的合并，它与 `+` 操作符的效果相同。

```groovy
def list1 = [1, 2, 3]
def list2 = [4, 5, 6]
def mergedList = list1.plus(list2)
println(mergedList) // 输出: [1, 2, 3, 4, 5, 6]
```

#### 4. 使用 `Collections.addAll` 静态方法

你可以使用 Java 的 `Collections.addAll` 静态方法来合并列表。

```groovy
def list1 = [1, 2, 3]
def list2 = [4, 5, 6]
Collections.addAll(list1, list2)
println(list1) // 输出: [1, 2, 3, 4, 5, 6]
```

#### 5. 使用扩展方法

Groovy 允许你定义扩展方法来增强现有类的功能。你可以定义一个扩展方法来合并列表。

```groovy
class ListExtensions {
    static <T> List<T> merge(List<T> list1, List<T> list2) {
        list1 + list2
    }
}

// 使用扩展方法
def list1 = [1, 2, 3]
def list2 = [4, 5, 6]
def mergedList = list1.merge(list2)
println(mergedList) // 输出: [1, 2, 3, 4, 5, 6]
```

#### List注意事项

- 使用 `+` 操作符和 `plus` 方法会创建一个新的列表，而 `addAll` 和 `Collections.addAll` 会修改原始列表。
- 确保列表中的元素类型兼容，以避免在合并过程中出现类型不匹配的问题。

---

## Range

在 Groovy 中，`Range` 是一个表示数值范围的类，它可以用于 `for` 循环和其他操作中。以下是一些常用的 `Range` 方法和操作：

1. 范围的创建
    - 使用 `..` 操作符可以创建一个范围。

    ```groovy
    def range = 1..10 // 从 1 到 10 的范围
    ```

2. 包含检查
    - 使用 `in` 或 `contains` 方法检查一个值是否在范围内。

    ```groovy
    boolean isInRange = 5 in range // true
    boolean containsFive = range.contains(5) // true
    ```

3. 范围迭代
    - 直接在 `for` 循环中使用范围。

    ```groovy
    for (int i in range) {
        println i
    }
    ```

4. 获取范围的开始和结束
    - 使用 `from` 和 `to` 属性获取范围的起始和结束值。

    ```groovy
    def start = range.from // 1
    def end = range.to // 10
    ```

5. 范围的步长
    - 使用 `..` 操作符时，可以指定步长。

    ```groovy
    def stepRange = 1..10 step 2 // 从 1 到 10，步长为 2
    ```

6. 反转范围
    - 使用 `reverse()` 方法或 `reverse` 属性反转范围。

    ```groovy
    def reversedRange = (1..10).reverse() // 从 10 到 1 的范围
    def reverseProperty = range.reverse // 也是从 10 到 1 的范围
    ```

7. 范围的比较
    - 可以使用 `==` 操作符比较两个范围是否相等。

    ```groovy
    def anotherRange = 1..10
    boolean areEqual = range == anotherRange // true
    ```

8. 范围的大小
    - 使用 `size()` 方法获取范围中元素的数量。

    ```groovy
    def size = range.size() // 10
    ```

9. 范围的交集和并集
    - 没有直接的方法来获取交集和并集，但可以通过迭代和包含检查来实现。

10. 范围的切片
    - 可以使用 `[ ]` 操作符对范围进行切片。

    ```groovy
    def subRange = range[2..5] // 获取从索引 2 到 5 的子范围，相当于 3..6
    ```

### Range示例

以下是一些使用 Groovy `Range` 的示例：

```groovy
def range = 1..10

// 打印范围中的所有数字
range.each {
    println it
}

// 检查数字是否在范围内
def number = 5
println "$number is ${number in range} in the range."

// 使用步长
def stepRange = 1..10 step 3
stepRange.each {
    println it
}

// 反转范围并打印
def reversed = (10..1) // 等同于 range.reverse()
reversed.each {
    println it
}

// 范围的大小
println "The range has ${range.size()} elements."
```

Groovy 的 `Range` 类提供了一种方便的方式来处理数值序列，使得迭代和数值操作更加简洁。

---

## Map

Groovy 的 `Map` 类似于 Java 的 `Map` 接口，但提供了一些额外的便捷方法和特性，使得处理键值对集合更加容易。以下是一些常用的 `Map` 方法：

### Map基本方法

- `put(key, value)`: 向映射中添加一个新的键值对。
- `get(key)`: 根据指定的键返回对应的值。
- `remove(key)`: 从映射中移除指定的键值对。
- `keySet()`: 返回映射中包含的键的 Set 视图。
- `values()`: 返回映射中包含的值的 Collection 视图。
- `entrySet()`: 返回映射中包含的键值对的 Set 视图。
- `clear()`: 移除映射中的所有键值对。

### Map Groovy 扩展方法

- `each(Closure c)`: 对映射中的每个键值对执行闭包。
- `collect(Closure c)`: 将闭包应用于映射中的每个键值对，并返回一个包含结果的新列表。
- `find(Closure c)`: 查找映射中第一个满足闭包条件的键值对。
- `findAll(Closure c)`: 查找映射中所有满足闭包条件的键值对。
- `inject(initialValue, Closure c)`: 将闭包应用于映射中的键值对，并与初始值累积结果。
- `sort()`: 返回按自然顺序排序的映射的视图。
- `sort(Closure c)`: 根据闭包定义的比较逻辑返回映射的排序视图。

### Map访问和修改映射

- 使用 `[key]` 语法访问或修改映射中的值。
- 使用 `[key] = value` 语法向映射中添加或更新键值对。

### Map示例

以下是一些使用 Groovy `Map` 方法的示例：

```groovy
def map = ['name': 'Alice', 'age': 30, 'isStudent': false]

// 使用 each 方法打印映射中的每个键值对
map.each { key, value ->
    println "$key: $value"
}

// 使用 collect 方法获取所有值
def values = map.collect { it.value }
println values

// 使用 find 方法查找第一个值为 false 的键
def firstFalseKey = map.find { !it.value }?.key
println firstFalseKey

// 使用 inject 方法计算所有值的总和
def sum = map.inject(0) { sum, entry -> sum + entry.value }
println sum

// 打印映射的键
def keys = map.keySet()
println keys

// 打印映射的值
def mapValues = map.values()
println mapValues

// 修改映射中的值
map['age'] = 31
println map

// 添加新的键值对
map['country'] = 'Wonderland'
println map

// 移除映射中的键值对
map.remove('isStudent')
println map

// 清空映射
map.clear()
println map
```

---
