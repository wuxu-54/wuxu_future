# 构建器

在 Groovy 中，构建器（Builder）是一种特殊的对象，用于以声明式的方式生成复杂的数据结构，如 XML、HTML 或自定义的 DSL（领域特定语言）。Groovy 提供了多种构建器，用于不同的目的：

1. **MarkupBuilder**：
   用于生成 XML 或 HTML 标记语言。MarkupBuilder 允许你以编程方式创建和操作 XML/HTML 内容。

2. **StreamingMarkupBuilder**：
   与 MarkupBuilder 类似，但它用于流式处理大型 XML 文档，以减少内存消耗。

3. **NodeBuilder**：
   用于创建 Groovy 的 Node 树结构，可以用于构建 XML 或其他树形数据结构。

4. **JsonBuilder**：
   用于生成 JSON 格式的数据。JsonBuilder 允许你以声明式的方式构建 JSON 对象和数组。

以下是一些使用 Groovy 构建器的示例：

## 使用 MarkupBuilder 生成 XML

```groovy
import groovy.xml.MarkupBuilder

def writer = new StringWriter()
def builder = new MarkupBuilder(writer)
builder.html {
    head {
        title("Groovy XML Example")
    }
    body {
        h1("Hello, Groovy!")
        p("This is an example of generating XML with Groovy.")
    }
}

def xml = writer.toString()
println xml
```

## 使用 StreamingMarkupBuilder 处理大型 XML

```groovy
import groovy.xml.StreamingMarkupBuilder

def builder = new StreamingMarkupBuilder()
def xml = builder.bind {
    people {
        person {
            name("John Doe")
            age(30)
        }
        person {
            name("Jane Smith")
            age(25)
        }
    }
}

println xml.toString()
```

## 使用 NodeBuilder 创建 XML

```groovy
import groovy.xml.NodeBuilder

def node = new NodeBuilder().people {
    person {
        name("John Doe")
        age("30")
    }
    person {
        name("Jane Smith")
        age("25")
    }
}

println node.toString()
```

## 使用 JsonBuilder 生成 JSON

```groovy
import groovy.json.JsonBuilder

def builder = new JsonBuilder()
def json = builder {
    people {
        person {
            name("John Doe")
            age(30)
        }
        person {
            name("Jane Smith")
            age(25)
        }
    }
}

println json.toString()
```

Groovy 构建器提供了一种简洁、易读的方式来生成结构化数据，无论是 XML、HTML 还是 JSON。通过使用构建器，你可以减少样板代码，提高开发效率，并使代码更加易于维护。
