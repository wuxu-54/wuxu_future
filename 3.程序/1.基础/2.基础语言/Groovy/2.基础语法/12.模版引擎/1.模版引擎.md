# 模板引擎

Groovy 模板引擎是一种用于生成文本输出（通常是 HTML，但也可以是任何其他类型的文本）的技术，它允许开发者将逻辑与表示层分离。Groovy 提供了几种模板引擎，其中最著名的是 Groovy Server Pages (GSP) 和 Simple Template Engine (STE)。

## Groovy Server Pages (GSP)

GSP 是 Groovy 的一个强大特性，类似于 Java 的 JSP。GSP 允许在 HTML 页面中嵌入 Groovy 脚本，从而创建动态网页。GSP 页面在运行时被转换成 Java Servlet，然后由服务器执行。

**GSP 的基本用法**：

1. **创建 GSP 文件**：GSP 文件通常以 `.gsp` 扩展名结尾。
2. **编写 GSP 页面**：在 HTML 中嵌入 Groovy 脚本片段。
3. **使用表达式和脚本**：在 GSP 中，可以使用 `${...}` 来输出表达式的结果，使用 `<% ... %>` 来编写脚本。

**示例**：

```html
<!DOCTYPE html>
<html>
<head>
    <title>${title}</title>
</head>
<body>
    <h1>Welcome, ${user.name}!</h1>
    <% 
        def list = [1, 2, 3, 4, 5]
        for (item in list) {
    %>
        <p>Item: ${item}</p>
    <% 
        }
    %>
</body>
</html>
```

## Simple Template Engine (STE)

STE 是 Groovy 的另一个模板引擎，它比 GSP 更简单，更轻量级。STE 使用 `.gstring` 或 `.gtemplate` 文件扩展名，并允许使用占位符来插入变量和表达式。

**STE 的基本用法**：

1. **创建模板文件**：使用 `.gstring` 或 `.gtemplate` 扩展名。
2. **定义模板**：使用 `${variable}` 或 `${expression}` 作为占位符。
3. **渲染模板**：使用 `new groovy.text.SimpleTemplateEngine()` 来渲染模板。

**示例**：

```groovy
// 创建模板引擎实例
def engine = new groovy.text.SimpleTemplateEngine()

// 定义模板
def templateText = """
Hello, ${name}!
This is a simple template.
"""

// 创建模板对象
def template = engine.createTemplate(templateText).make(name: 'World')

// 输出渲染后的模板
println template.toString()
```

在上述示例中，我们创建了一个简单的模板，其中包含了一个变量 `name` 的占位符。然后我们使用模板引擎来渲染这个模板，将 `name` 变量替换为 `'World'`。

这两种模板引擎都是 Groovy 提供的强大工具，可以帮助开发者快速开发动态网页和文本生成应用程序。选择哪一种取决于你的具体需求和偏好。
