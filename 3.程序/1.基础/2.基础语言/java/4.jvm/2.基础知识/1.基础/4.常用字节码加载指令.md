# 常用的字节码加载指令

Java字节码指令集涵盖了Java虚拟机（JVM）能够理解和执行的所有操作。以下是对Java字节码全部指令的一个大致分类和列举：

## 1. 常量入栈指令

* 用于将常量值加载到操作数栈中。
* 例如：iconst_m1、iconst_0、iconst_1、iconst_2、iconst_3、iconst_4、iconst_5、bipush、sipush、ldc、ldc_w、ldc2_w、aconst_null等。
  * `aconst_null`：将 null 引用压入操作栈。
  * `iconst_m1`：将 -1 压入操作栈。
  * `iconst_<n>`：将 0 到 5 的整数常量压入操作栈（即 iconst_0 到 iconst_5）。
  * `lconst_0`、`lconst_1`：将 long 型常量 0 和 1 压入操作栈。
  * `fconst_0`、`fconst_1`、fconst_2：将 float 型常量 0、1 和 2 压入操作栈。
  * `dconst_0`、`dconst_1`：将 double 型常量 0 和 1 压入操作栈。
  * `bipush <byte>`：将一个 byte 型整数（范围为 -128 到 127）压入操作栈。
  * `sipush <short>`：将一个 short 型整数（范围为 -32768 到 32767）压入操作栈。
  * `ldc <index>`：将常量池中的常量（可以是 int、float、long、double、String 或 Class 对象的引用）压入操作栈。
  * `ldc_w <index>`：与 ldc 类似，但使用两个字节表示索引，能处理更大的常量池索引。
  * `ldc2_w <index>`：将 long 或 double 类型的常量从常量池压入操作栈，使用两个字节表示索引。

## 2. 局部变量值转载到栈中指令

* 用于将局部变量表中的值加载到操作数栈中。
* 例如：iload、`iload_<n>`、lload、`lload_<n>`、fload、`fload_<n>`、dload、`dload_<n>`、aload、`aload_<n>`等。

  * `iload_<n>`、`lload_<n>`、`fload_<n>`、`dload_<n>`、`aload_<n>`：将局部变量表中索引为 `<n>` 的变量压入操作栈，通常 `<n>` 是 0 到 3，对于不同的数据类型（int、long、float、double、对象引用）。
  * `iload <index>`、`lload <index>`、`fload <index>`、`dload <index>`、`aload <index>`：将局部变量表中索引为 `<index>` 的变量压入操作栈，可处理任意索引，适用于不同的数据类型。
  * `aload_0` 等：虽然主要作为局部变量加载，但在方法调用中，也用于加载 this 引用或方法参数。

## 3. 将栈顶值保存到局部变量中指令

* 用于将操作数栈顶的值存储到局部变量表中。
* 例如：istore、`istore_<n>`、lstore、`lstore_<n>`、fstore、`fstore_<n>`、dstore、`dstore_<n>`、astore、`astore_<n>`等。

## 4. wide指令

* 用于处理超过常规范围的局部变量表索引和操作数栈索引。
* 例如：iwide、lwide、fwide、dwide、awide等（注意：这些指令在标准的Java字节码指令集中可能并不直接存在，但wide前缀用于表示需要扩展索引范围的指令）。

## 5. 通用（无类型）栈操作指令

* 用于对操作数栈进行通用操作。
* 例如：pop、pop2、dup、dup_x1、dup_x2、dup2、dup2_x1、dup2_x2、swap等。

## 6. 类型转换指令

* 用于在数据类型之间进行转换。
* 例如：i2l、i2f、i2d、l2i、l2f、l2d、f2i、f2l、f2d、d2i、d2l、d2f、i2b、i2c、i2s等。

## 7. 整数运算指令

* 用于执行整数类型的算术运算。
* 例如：iadd、isub、imul、idiv、irem、ineg、ishl、ishr、iushr、iand、ior、ixor等。

## 8. 浮点运算指令

* 用于执行浮点类型的算术运算。
* 例如：fadd、fsub、fmul、fdiv、frem、fneg、dadd、dsub、dmul、ddiv、drem、dneg等。

## 9. 逻辑运算指令

* 包括移位运算和按位布尔运算。
* 移位运算指令：ishl、ishr、iushr、lshl、lshr、lushr等。
* 按位布尔运算指令：iand、ior、ixor、land、lor、lxor等。

## 10. 控制流指令

* 用于控制程序的执行流程。
* 条件跳转指令：ifeq、ifne、iflt、ifge、ifgt、ifle、if_icmpeq、if_icmpne、if_icmplt、if_icmpge、if_icmpgt、if_icmple、if_acmpeq、if_acmpne等。
* 比较指令：dcmpg、dcmpl、fcmpg、fcmpl、lcmp等。
* 无条件跳转指令：goto、goto_w等。
* 表跳转指令：tableswitch、lookupswitch等。

## 11. 对象操作指令

* 用于对象的创建、字段访问和实例方法调用。
* 例如：new、anewarray、checkcast、instanceof、getfield、putfield、getstatic、putstatic等。

    1. 这些指令在类加载和反射操作中发挥作用，涉及从运行时常量池中加载类信息。
        * `anewarray <index>`：创建一个新的引用数组，其元素类型由常量池中的类索引`<index>`决定。
        * `newarray <type>`：创建一个新的基本类型数组，`<type>` 表示数组元素类型（如 T_INT、T_CHAR 等）。
        * `multianewarray <index> <dimensions>`：创建一个多维数组，`<index>` 是数组类在常量池中的索引，`<dimensions>` 是数组的维度。
    2. 这些指令用于加载对象的属性和字段的值。

        * `getfield <index>`：从对象实例中获取字段的值，`<index>` 是字段在常量池中的引用。
        * `getstatic <index>`：获取静态字段的值，`<index>` 是静态字段在常量池中的引用。
    3. 涉及异常处理中异常对象(即Exception对象)的加载。

        * athrow：抛出异常，通常会先将异常对象加载到操作栈上，然后执行该指令。

## 12. 数组操作指令

* 用于数组元素的访问和数组长度的获取。
* 例如：iaload、laload、faload、daload、aaload、iastore、lastore、fastore、dastore、aastore、arraylength等。

  * `iaload`：将 int 数组中指定索引位置的元素压入操作栈。
  * `laload`：将 long 数组中指定索引位置的元素压入操作栈。
  * `faload`：将 float 数组中指定索引位置的元素压入操作栈。
  * `daload`：将 double 数组中指定索引位置的元素压入操作栈。
  * `aaload`：将对象数组中指定索引位置的元素（对象引用）压入操作栈。
  * `baload`：将 byte 数组中指定索引位置的元素压入操作栈。
  * `caload`：将 char 数组中指定索引位置的元素压入操作栈。
  * `saload`：将 short 数组中指定索引位置的元素压入操作栈。

## 13. 方法调用指令

* 用于调用实例方法、静态方法和接口方法。
* 例如：invokevirtual、invokespecial、invokestatic、invokeinterface等。

## 14. 方法返回指令

* 用于从方法中返回结果。
* 例如：ireturn、lreturn、freturn、dreturn、areturn、return等。

## 15. 线程同步指令

* 用于实现线程同步功能。
* 例如：monitorenter、monitorexit等。

请注意，以上列举的指令并非详尽无遗，Java字节码指令集可能随着Java版本的更新而有所扩展或变化。此外，某些指令可能具有特定的使用场景和限制条件。为了获得最准确和最新的信息，建议参考Oracle官方提供的Java虚拟机规范文档。
