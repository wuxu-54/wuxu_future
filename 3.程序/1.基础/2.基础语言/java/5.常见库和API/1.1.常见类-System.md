# System 类

在 Java 中，`System` 类是 `java.lang` 包下的一个 final 类，它提供了与系统相关的属性和方法，这些属性和方法都是静态的，因此无需创建 `System` 类的实例，可以直接通过类名调用。下面将详细介绍 `System` 类及其常用的 API。

## 常用属性

### 1. `System.in`

- **类型**：`InputStream`
- **说明**：标准输入流，通常与键盘输入关联。程序可以通过该流从控制台读取用户输入的数据。
- **示例**：

```java
import java.io.IOException;
import java.io.InputStream;

public class SystemInExample {
    public static void main(String[] args) {
        InputStream inputStream = System.in;
        try {
            int data;
            while ((data = inputStream.read()) != -1) {
                System.out.print((char) data);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

### 2. `System.out`

- **类型**：`PrintStream`
- **说明**：标准输出流，通常与控制台输出关联。程序可以使用该流将数据输出到控制台。
- **示例**：

```java
public class SystemOutExample {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}
```

### 3. `System.err`

- **类型**：`PrintStream`
- **说明**：标准错误输出流，通常也与控制台输出关联，但用于输出错误信息，与 `System.out` 分开，方便区分普通输出和错误信息。
- **示例**：

```java
public class SystemErrExample {
    public static void main(String[] args) {
        try {
            int result = 1 / 0;
        } catch (ArithmeticException e) {
            System.err.println("Error: " + e.getMessage());
        }
    }
}
```

## 常用方法

### 1. `System.currentTimeMillis()`

- **功能**：返回当前时间（以毫秒为单位），从 1970 年 1 月 1 日 00:00:00 UTC 开始计算。常用于测量代码执行时间。
- **示例**：

```java
public class CurrentTimeMillisExample {
    public static void main(String[] args) {
        long startTime = System.currentTimeMillis();
        for (int i = 0; i < 1000000; i++) {
            // 模拟一些操作
        }
        long endTime = System.currentTimeMillis();
        System.out.println("代码执行时间: " + (endTime - startTime) + " 毫秒");
    }
}
```

### 2. `System.arraycopy(Object src, int srcPos, Object dest, int destPos, int length)`

- **功能**：将一个数组的指定部分复制到另一个数组中。
- **参数**：
  - `src`：源数组。
  - `srcPos`：源数组的起始位置。
  - `dest`：目标数组。
  - `destPos`：目标数组的起始位置。
  - `length`：要复制的元素个数。
- **示例**：

```java
public class ArrayCopyExample {
    public static void main(String[] args) {
        int[] srcArray = {1, 2, 3, 4, 5};
        int[] destArray = new int[5];
        System.arraycopy(srcArray, 0, destArray, 0, 3);
        for (int num : destArray) {
            System.out.print(num + " ");
        }
    }
}
```

### 3. `System.getProperty(String key)`

- **功能**：获取指定键的系统属性值。
- **示例**：

```java
public class GetPropertyExample {
    public static void main(String[] args) {
        String osName = System.getProperty("os.name");
        String userHome = System.getProperty("user.home");
        System.out.println("操作系统名称: " + osName);
        System.out.println("用户主目录: " + userHome);
    }
}
```

### 4. `System.gc()`

- **功能**：建议 Java 虚拟机启动垃圾回收器，回收不再使用的对象所占用的内存。但这只是一个建议，虚拟机可能会忽略该请求。
- **示例**：

```java
public class GarbageCollectionExample {
    public static void main(String[] args) {
        // 创建一些对象
        for (int i = 0; i < 1000; i++) {
            new Object();
        }
        // 建议进行垃圾回收
        System.gc();
    }
}
```

### 5. `System.exit(int status)`

- **功能**：终止当前正在运行的 Java 虚拟机。参数 `status` 为 0 表示正常退出，非 0 表示异常退出。
- **示例**：

```java
public class ExitExample {
    public static void main(String[] args) {
        System.out.println("程序开始");
        // 正常退出
        System.exit(0);
        System.out.println("这行代码不会执行");
    }
}
```

### 6. `System.identityHashCode(Object x)`

- **功能**：返回给定对象的原始哈希码，无论该对象的类是否重写了 `hashCode()` 方法。此方法返回的值与使用 `Object` 类的 `hashCode()` 方法得到的值相同，可用于唯一标识对象。
- **示例**：

```java
public class IdentityHashCodeExample {
    public static void main(String[] args) {
        String str = "Hello";
        int identityHashCode = System.identityHashCode(str);
        System.out.println("对象的原始哈希码: " + identityHashCode);
    }
}
```

### 7. `System.getenv()` 和 `System.getenv(String name)`

- **功能**：
  - `System.getenv()`：返回一个不可修改的 `Map`，包含当前系统环境变量的名称和值。
  - `System.getenv(String name)`：根据指定的环境变量名称返回其对应的值，如果该环境变量不存在，则返回 `null`。
- **示例**：

```java
import java.util.Map;

public class GetEnvExample {
    public static void main(String[] args) {
        // 获取所有环境变量
        Map<String, String> envMap = System.getenv();
        for (Map.Entry<String, String> entry : envMap.entrySet()) {
            System.out.println(entry.getKey() + " = " + entry.getValue());
        }

        // 获取指定环境变量
        String javaHome = System.getenv("JAVA_HOME");
        System.out.println("JAVA_HOME: " + javaHome);
    }
}
```

### 8. `System.setIn(InputStream in)`、`System.setOut(PrintStream out)` 和 `System.setErr(PrintStream err)`

- **功能**：
  - `System.setIn(InputStream in)`：重新分配“标准”输入流。可以将输入流重定向到文件或其他数据源。
  - `System.setOut(PrintStream out)`：重新分配“标准”输出流。可以将输出流重定向到文件或其他目标。
  - `System.setErr(PrintStream err)`：重新分配“标准”错误输出流。可以将错误输出流重定向到文件或其他目标。
- **示例**：将标准输出重定向到文件

```java
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.PrintStream;

public class RedirectOutputExample {
    public static void main(String[] args) {
        try {
            PrintStream fileOut = new PrintStream(new FileOutputStream("output.txt"));
            System.setOut(fileOut);
            System.out.println("这行输出将被写入到 output.txt 文件中");
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
    }
}
```

### 9. `System.nanoTime()`

- **功能**：返回当前时间的纳秒数，通常用于更精确地测量代码执行时间，尤其是在需要高精度计时的场景中。与 `System.currentTimeMillis()` 不同，`nanoTime()` 返回的是相对时间，没有固定的起始点，只能用于计算时间间隔。
- **示例**：

```java
public class NanoTimeExample {
    public static void main(String[] args) {
        long startTime = System.nanoTime();
        for (int i = 0; i < 1000000; i++) {
            // 模拟一些操作
        }
        long endTime = System.nanoTime();
        System.out.println("代码执行时间: " + (endTime - startTime) + " 纳秒");
    }
}
```

### 10. `System.lineSeparator()`

- **功能**：返回当前系统的行分隔符，不同的操作系统使用不同的行分隔符，如 Windows 使用 `\r\n`，Unix/Linux 和 macOS 使用 `\n`。使用 `System.lineSeparator()` 可以编写跨平台的代码。
- **示例**：

```java
public class LineSeparatorExample {
    public static void main(String[] args) {
        String lineSeparator = System.lineSeparator();
        System.out.println("当前系统的行分隔符: " + lineSeparator);
    }
}
```

以上就是 `System` 类的一些常用属性和方法，它们在 Java 编程中非常实用，可以帮助我们完成输入输出、时间测量、数组操作、系统属性获取等多种任务。
