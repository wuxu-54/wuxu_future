# 文件流简介

以下是对 Java 文件流及其 API 的详细解释：

## 一、文件流的基本概念

- **流（Stream）**：
  - 在 Java 中，流是一种数据的抽象序列，可以是字节序列或字符序列。
  - 流提供了一种统一的方式来处理输入和输出，无论数据的来源或目的地是什么，例如文件、网络连接、内存中的数组等。

## 二、字节流

- **InputStream（输入字节流）**：
  - 这是一个抽象类，是所有输入字节流的超类，它提供了读取字节的基本方法。
  - 常用方法：
    - `int read()`：从输入流中读取一个字节的数据，如果到达流的末尾，返回 `-1`。
    - `int read(byte[] b)`：从输入流中读取多个字节的数据到字节数组 `b` 中，返回实际读取的字节数，如果到达末尾，返回 `-1`。
    - `int read(byte[] b, int off, int len)`：从输入流中读取最多 `len` 个字节的数据到字节数组 `b` 中，从 `off` 位置开始存储，返回实际读取的字节数，如果到达末尾，返回 `-1`。
    - `void close()`：关闭输入流，释放相关资源。
  - 具体实现类：
    - `FileInputStream`：从文件中读取字节。

        ```java
        import java.io.FileInputStream;
        import java.io.IOException;

        public class FileInputStreamExample {
            public static void main(String[] args) {
                try (FileInputStream fis = new FileInputStream("example.txt")) {
                    int byteRead;
                    while ((byteRead = fis.read())!= -1) {
                        System.out.print((char) byteRead);
                    }
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
        ```

        **代码解释**：
    - `FileInputStream fis = new FileInputStream("example.txt")`：创建一个文件输入流，从 `example.txt` 文件读取字节。
    - `while ((byteRead = fis.read())!= -1)`：不断读取字节，直到文件末尾（`read()` 返回 `-1`）。
    - `System.out.print((char) byteRead)`：将读取的字节转换为字符并输出。

- **OutputStream（输出字节流）**：
  - 这是一个抽象类，是所有输出字节流的超类，提供了写入字节的基本方法。
  - 常用方法：
    - `void write(int b)`：将一个字节写入输出流。
    - `void write(byte[] b)`：将字节数组 `b` 中的所有字节写入输出流。
    - `void write(byte[] b, int off, int len)`：将字节数组 `b` 中从 `off` 开始的 `len` 个字节写入输出流。
    - `void close()`：关闭输出流，释放相关资源。
  - 具体实现类：
    - `FileOutputStream`：向文件中写入字节。

        ```java
        import java.io.FileOutputStream;
        import java.io.IOException;

        public class FileOutputStreamExample {
            public static void main(String[] args) {
                try (FileOutputStream fos = new FileOutputStream("output.txt")) {
                    String str = "Hello, World!";
                    fos.write(str.getBytes());
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
        ```

        **代码解释**：
    - `FileOutputStream fos = new FileOutputStream("output.txt")`：创建一个文件输出流，向 `output.txt` 文件写入字节。
    - `fos.write(str.getBytes())`：将字符串转换为字节数组并写入文件。

## 三、字符流

- **Reader（输入字符流）**：
  - 是一个抽象类，用于读取字符，适合处理文本数据。
  - 常用方法：
    - `int read()`：从输入流中读取一个字符，如果到达流的末尾，返回 `-1`。
    - `int read(char[] cbuf)`：从输入流中读取多个字符到字符数组 `cbuf` 中，返回实际读取的字符数，如果到达末尾，返回 `-1`。
    - `int read(char[] cbuf, int off, int len)`：从输入流中读取最多 `len` 个字符到字符数组 `cbuf` 中，从 `off` 开始存储，返回实际读取的字符数，如果到达末尾，返回 `-1`。
    - `void close()`：关闭输入流，释放相关资源。
  - 具体实现类：
    - `FileReader`：从文件中读取字符。

        ```java
        import java.io.FileReader;
        import java.io.IOException;

        public class FileReaderExample {
            public static void main(String[] args) {
                try (FileReader fr = new FileReader("example.txt")) {
                    int charRead;
                    char[] buffer = new char[1024];
                    while ((charRead = fr.read(buffer))!= -1) {
                        System.out.print(new String(buffer, 0, charRead));
                    }
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
        ```

        **代码解释**：
    - `FileReader fr = new FileReader("example.txt")`：创建一个文件读取器，从 `example.txt` 文件读取字符。
    - `while ((charRead = fr.read(buffer))!= -1)`：使用字符数组作为缓冲区读取字符，直到文件末尾。

- **Writer（输出字符流）**：
  - 是一个抽象类，用于写入字符。
  - 常用方法：
    - `void write(int c)`：将一个字符写入输出流。
    - `void write(char[] cbuf)`：将字符数组 `cbuf` 中的所有字符写入输出流。
    - `void write(char[] cbuf, int off, int len)`：将字符数组 `cbuf` 中从 `off` 开始的 `len` 个字符写入输出流。
    - `void write(String str)`：将字符串 `str` 写入输出流。
    - `void close()`：关闭输出流，释放相关资源。
  - 具体实现类：
    - `FileWriter`：向文件中写入字符。

        ```java
        import java.io.FileWriter;
        import java.io.IOException;

        public class FileWriterExample {
            public static void main(String[] args) {
                try (FileWriter fw = new FileWriter("output.txt")) {
                    fw.write("Hello, World!");
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
        ```

        **代码解释**：
    - `FileWriter fw = new FileWriter("output.txt")`：创建一个文件写入器，向 `output.txt` 文件写入字符。
    - `fw.write("Hello, World!")`：将字符串写入文件。

## 四、缓冲流

- **BufferedInputStream 和 BufferedOutputStream**：
  - 它们是字节流的缓冲版本，提供了缓冲功能，提高了读写效率。

    ```java
    import java.io.BufferedInputStream;
    import java.io.BufferedOutputStream;
    import java.io.FileInputStream;
    import java.io.FileOutputStream;
    import java.io.IOException;

    public class BufferedStreamExample {
        public static void main(String[] args) {
            try (FileInputStream fis = new FileInputStream("example.txt");
                 BufferedInputStream bis = new BufferedInputStream(fis);
                 FileOutputStream fos = new FileOutputStream("output.txt");
                 BufferedOutputStream bos = new BufferedOutputStream(fos)) {
                int byteRead;
                while ((byteRead = bis.read())!= -1) {
                    bos.write(byteRead);
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
    ```

    **代码解释**：
  - `BufferedInputStream bis = new BufferedInputStream(fis)`：创建一个缓冲输入流，提高读取效率。
  - `BufferedOutputStream bos = new BufferedOutputStream(fos)`：创建一个缓冲输出流，提高写入效率。

- **BufferedReader 和 BufferedWriter**：
  - 它们是字符流的缓冲版本，提供了缓冲功能，提高了读写效率。

    ```java
    import java.io.BufferedReader;
    import java.io.BufferedWriter;
    import java.io.FileReader;
    import java.io.FileWriter;
    import java.io.IOException;

    public class BufferedCharStreamExample {
        public static void main(String[] args) {
            try (FileReader fr = new FileReader("example.txt");
                 BufferedReader br = new BufferedReader(fr);
                 FileWriter fw = new FileWriter("output.txt");
                 BufferedWriter bw = new BufferedWriter(fw)) {
                String line;
                while ((line = br.readLine())!= null) {
                    bw.write(line);
                    bw.newLine();
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
    ```

    **代码解释**：
  - `BufferedReader br = new BufferedReader(fr)`：创建一个缓冲字符读取器，可以使用 `readLine()` 方法按行读取。
  - `BufferedWriter bw = new BufferedWriter(fw)`：创建一个缓冲字符写入器，可以使用 `newLine()` 方法添加新行。

## 五、其他文件操作 API

- **File 类**：
  - 用于表示文件或目录的抽象表示，可用于创建、删除、重命名文件和目录等操作。

    ```java
    import java.io.File;
    import java.io.IOException;

    public class FileExample {
        public static void main(String[] args) {
            File file = new File("example.txt");
            if (!file.exists()) {
                try {
                    file.createNewFile();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            if (file.isFile()) {
                System.out.println("It's a file");
            }
            if (file.canRead()) {
                System.out.println("The file is readable");
            }
        }
    }
    ```

    **代码解释**：
  - `File file = new File("example.txt")`：创建一个文件对象。
  - `file.createNewFile()`：如果文件不存在，创建文件。
  - `file.isFile()`：检查是否为文件。
  - `file.canRead()`：检查文件是否可读。

Java 文件流和相关 API 提供了丰富的功能，可用于文件的读写操作。字节流适合处理二进制数据，字符流适合处理文本数据，而缓冲流通过缓冲提高了读写效率。同时，`File` 类提供了对文件和目录的操作功能，可用于文件的创建、检查和属性查询等。根据具体需求选择合适的流和 API 可以帮助你更高效地处理文件操作，在使用流时，注意正确处理异常和资源的关闭，以避免资源泄漏。

以上是 Java 文件流及其 API 的基本内容，它们是 Java 输入输出操作的基础，通过合理使用这些 API，可以实现各种文件操作和数据处理任务。
