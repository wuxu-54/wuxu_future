# 包装类

在Java中，包装类（Wrapper Classes）是指将基本数据类型（如int、char、double等）封装成对象（Object）的类。Java提供了8种基本数据类型的包装类，它们分别是：

1. `Integer` - 包装 `int` 类型
2. `Long` - 包装 `long` 类型
3. `Float` - 包装 `float` 类型
4. `Double` - 包装 `double` 类型
5. `Short` - 包装 `short` 类型
6. `Byte` - 包装 `byte` 类型
7. `Character` - 包装 `char` 类型
8. `Boolean` - 包装 `boolean` 类型

## 使用包装类的原因

1. **对象特性**：包装类允许基本数据类型以对象的形式存在，这样就可以使用对象相关的功能，比如将值存储在集合（如`ArrayList`、`HashMap`）中。
2. **提供额外方法**：包装类提供了一些实用的方法，例如`Integer.parseInt(String)`可以将字符串转换为整数。
3. **自动装箱和拆箱**：Java 5及以后版本引入了自动装箱和拆箱机制，使得基本数据类型和包装类之间的转换更加方便。

## 自动装箱和拆箱

- **自动装箱**：Java编译器会自动将基本数据类型转换为对应的包装类对象。

  ```java
  int a = 5;
  Integer b = a; // 自动装箱
  ```

- **自动拆箱**：Java编译器会自动将包装类对象转换为对应的基本数据类型。

  ```java
  Integer b = 5;
  int a = b; // 自动拆箱
  ```

## 注意事项

1. **缓存机制**：Java对`Integer`、`Short`、`Byte`、`Character`和`Boolean`提供了缓存机制。对于`Integer`，范围在-128到127之间的值会被缓存，直接返回内存中的缓存对象，而不是创建新对象。
    >这个要重点注意！缓存机制导致 == 判断是有问题的，需要使用equals方法

    ```java
    Integer x = 100;
    Integer y = 100;
    System.out.println(x == y); // true，因为使用了缓存

    Integer m = 130;
    Integer n = 130;
    System.out.println(m == n); // false，因为超出了缓存范围
    ```

2. **比较**：使用`==`比较包装类对象时，比较的是引用而非值。如果需要比较值，应使用`equals()`方法。

    ```java
    Integer a = 100;
    Integer b = 100;
    System.out.println(a == b); // true，因为使用了缓存
    System.out.println(a.equals(b)); // true，比较值

    Integer c = new Integer(100);
    Integer d = new Integer(100);
    System.out.println(c == d); // false，比较引用
    System.out.println(c.equals(d)); // true，比较值
    ```

3. **空指针异常**：自动拆箱时，如果包装类对象为`null`，会导致`NullPointerException`。

    ```java
    Integer e = null;
    int f = e; // 会抛出NullPointerException
    ```

4. **性能**：频繁地进行装箱和拆箱操作可能会影响性能，特别是在性能敏感的应用中。

## 示例代码

```java
public class WrapperClassExample {
    public static void main(String[] args) {
        // 自动装箱
        Integer i = 10;
        // 自动拆箱
        int j = i;

        // 使用包装类的方法
        int num = Integer.parseInt("123");

        // 缓存机制
        Integer a = 100;
        Integer b = 100;
        System.out.println(a == b); // true

        Integer c = 130;
        Integer d = 130;
        System.out.println(c == d); // false

        // 使用equals比较值
        System.out.println(c.equals(d)); // true

        // 空指针异常
        Integer e = null;
        // int f = e; // Uncommenting this will throw NullPointerException

        // 使用包装类存储到集合中
        java.util.List<Integer> list = new java.util.ArrayList<>();
        list.add(1);
        list.add(2);
        list.add(3);

        for (Integer num : list) {
            System.out.println(num);
        }
    }
}
```

通过了解这些包装类的特性和注意事项，您可以更有效地使用它们来编写健壮和高效的Java代码。
