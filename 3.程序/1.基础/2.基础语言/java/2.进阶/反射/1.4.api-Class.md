# Class常见属性和api

在 Java 反射机制里，`java.lang.Class` 类是核心，它代表着 Java 中的类或接口。下面为你详细列举 `Class` 类的属性和常用 API。

## 属性

`Class` 类本身并没有公开的实例属性。不过它有一些静态常量，例如：

- **`public static final Class<?>[] EMPTY_CLASS_ARRAY`**：表示一个空的 `Class` 对象数组，用于方法返回值或者参数传递，避免每次都创建新的空数组。

## 常用 API

### 1. 获取 `Class` 对象

- **`static Class<?> forName(String className)`**
  - **作用**：根据类的全限定名（包含包名）返回对应的 `Class` 对象。若类不存在则抛出 `ClassNotFoundException`。
  - **示例**：

```java
try {
    Class<?> clazz = Class.forName("java.util.ArrayList");
    System.out.println(clazz.getName());
} catch (ClassNotFoundException e) {
    e.printStackTrace();
}
```

- **`类名.class`**
  - **作用**：直接通过类名获取对应的 `Class` 对象，编译时就可确定。
  - **示例**：

```java
Class<?> clazz = String.class;
System.out.println(clazz.getName());
```

- **`对象实例.getClass()`**
  - **作用**：通过对象实例获取其运行时对应的 `Class` 对象。
  - **示例**：

```java
String str = "hello";
Class<?> clazz = str.getClass();
System.out.println(clazz.getName());
```

### 2. 类的基本信息获取

- **`String getName()`**
  - **作用**：返回类的全限定名（包含包名）。
  - **示例**：

```java
Class<?> clazz = String.class;
System.out.println(clazz.getName()); // 输出: java.lang.String
```

- **`String getSimpleName()`**
  - **作用**：返回类的简单名称，不包含包名。
  - **示例**：

```java
Class<?> clazz = String.class;
System.out.println(clazz.getSimpleName()); // 输出: String
```

- **`Package getPackage()`**
  - **作用**：返回该类所在的包的 `Package` 对象。
  - **示例**：

```java
Class<?> clazz = String.class;
Package pkg = clazz.getPackage();
System.out.println(pkg.getName()); // 输出: java.lang
```

- **`Class<? super T> getSuperclass()`**
  - **作用**：返回该类的直接父类的 `Class` 对象。
  - **示例**：

```java
Class<?> clazz = ArrayList.class;
Class<?> superClazz = clazz.getSuperclass();
System.out.println(superClazz.getName()); // 输出: java.util.AbstractList
```

- **`Class<?>[] getInterfaces()`**
  - **作用**：返回该类实现的所有接口的 `Class` 对象数组。
  - **示例**：

```java
Class<?> clazz = ArrayList.class;
Class<?>[] interfaces = clazz.getInterfaces();
for (Class<?> inter : interfaces) {
    System.out.println(inter.getName());
}
```

### 3. 类的修饰符相关

- **`int getModifiers()`**
  - **作用**：返回该类的 Java 语言修饰符，修饰符由 `java.lang.reflect.Modifier` 类中的静态常量表示。
  - **示例**：

```java
Class<?> clazz = String.class;
int modifiers = clazz.getModifiers();
System.out.println(Modifier.isFinal(modifiers)); // 输出: true
```

### 4. 类的成员获取

- **`Constructor<?>[] getConstructors()`**
  - **作用**：返回该类的所有公共构造函数的 `Constructor` 对象数组。
  - **示例**：

```java
Class<?> clazz = String.class;
Constructor<?>[] constructors = clazz.getConstructors();
for (Constructor<?> constructor : constructors) {
    System.out.println(constructor.getName());
}
```

- **`Constructor<T> getConstructor(Class<?>... parameterTypes)`**
  - **作用**：返回指定参数类型的公共构造函数的 `Constructor` 对象。
  - **示例**：

```java
try {
    Class<?> clazz = String.class;
    Constructor<?> constructor = clazz.getConstructor(String.class);
    System.out.println(constructor.getName());
} catch (NoSuchMethodException e) {
    e.printStackTrace();
}
```

- **`Method[] getMethods()`**
  - **作用**：返回该类的所有公共方法的 `Method` 对象数组，包括继承的方法。
  - **示例**：

```java
Class<?> clazz = String.class;
Method[] methods = clazz.getMethods();
for (Method method : methods) {
    System.out.println(method.getName());
}
```

- **`Method getMethod(String name, Class<?>... parameterTypes)`**
  - **作用**：返回指定名称和参数类型的公共方法的 `Method` 对象。
  - **示例**：

```java
try {
    Class<?> clazz = String.class;
    Method method = clazz.getMethod("substring", int.class);
    System.out.println(method.getName());
} catch (NoSuchMethodException e) {
    e.printStackTrace();
}
```

- **`Field[] getFields()`**
  - **作用**：返回该类的所有公共字段的 `Field` 对象数组，包括继承的字段。
  - **示例**：

```java
Class<?> clazz = System.class;
Field[] fields = clazz.getFields();
for (Field field : fields) {
    System.out.println(field.getName());
}
```

- **`Field getField(String name)`**
  - **作用**：返回指定名称的公共字段的 `Field` 对象。
  - **示例**：

```java
try {
    Class<?> clazz = System.class;
    Field field = clazz.getField("out");
    System.out.println(field.getName());
} catch (NoSuchFieldException e) {
    e.printStackTrace();
}
```

- **`Constructor<?>[] getDeclaredConstructors()`**
  - **作用**：返回该类的所有构造函数的 `Constructor` 对象数组，包括私有构造函数。
- **`Constructor<T> getDeclaredConstructor(Class<?>... parameterTypes)`**
  - **作用**：返回指定参数类型的构造函数的 `Constructor` 对象，包括私有构造函数。
- **`Method[] getDeclaredMethods()`**
  - **作用**：返回该类的所有方法的 `Method` 对象数组，不包括继承的方法。
- **`Method getDeclaredMethod(String name, Class<?>... parameterTypes)`**
  - **作用**：返回指定名称和参数类型的方法的 `Method` 对象，包括私有方法。
- **`Field[] getDeclaredFields()`**
  - **作用**：返回该类的所有字段的 `Field` 对象数组，不包括继承的字段。
- **`Field getDeclaredField(String name)`**
  - **作用**：返回指定名称的字段的 `Field` 对象，包括私有字段。

### 5. 类的实例化

- **`T newInstance()`（已弃用，Java 9 及以后版本不推荐使用）**
  - **作用**：创建该类的一个新实例，调用的是无参构造函数。若类没有无参构造函数或构造函数不可访问，则抛出异常。
  - **示例**：

```java
try {
    Class<?> clazz = String.class;
    String str = (String) clazz.newInstance();
    System.out.println(str);
} catch (InstantiationException | IllegalAccessException e) {
    e.printStackTrace();
}
```

- **使用 `Constructor` 对象的 `newInstance` 方法进行实例化**
  - **示例**：

```java
try {
    Class<?> clazz = String.class;
    Constructor<?> constructor = clazz.getConstructor(String.class);
    String str = (String) constructor.newInstance("hello");
    System.out.println(str);
} catch (Exception e) {
    e.printStackTrace();
}
```

### 6. 注解相关

- **`<A extends Annotation> A getAnnotation(Class<A> annotationClass)`**
  - **作用**：如果该类上存在指定类型的注解，则返回该注解，否则返回 `null`。
  - **示例**：

```java
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
@interface MyAnnotation {
    String value();
}

@MyAnnotation("test")
class MyClass {}

public class Main {
    public static void main(String[] args) {
        Class<?> clazz = MyClass.class;
        MyAnnotation annotation = clazz.getAnnotation(MyAnnotation.class);
        if (annotation != null) {
            System.out.println(annotation.value());
        }
    }
}
```

- **`Annotation[] getAnnotations()`**
  - **作用**：返回该类上存在的所有注解。

### 7. 其他

- **`boolean isPrimitive()`**
  - **作用**：判断该 `Class` 对象是否表示一个基本数据类型。
  - **示例**：

```java
Class<?> clazz = int.class;
System.out.println(clazz.isPrimitive()); // 输出: true
```

- **`boolean isArray()`**
  - **作用**：判断该 `Class` 对象是否表示一个数组类型。
  - **示例**：

```java
Class<?> clazz = int[].class;
System.out.println(clazz.isArray()); // 输出: true
```

- **`boolean isInterface()`**
  - **作用**：判断该 `Class` 对象是否表示一个接口。
  - **示例**：

```java
Class<?> clazz = List.class;
System.out.println(clazz.isInterface()); // 输出: true
```

- **`boolean isEnum()`**
  - **作用**：判断该 `Class` 对象是否表示一个枚举类型。
  - **示例**：

```java
Class<?> clazz = DayOfWeek.class;
System.out.println(clazz.isEnum()); // 输出: true
```

以上便是 `Class` 类的常见属性和 API，借助这些方法能够在运行时动态获取类的各种信息并进行操作。
