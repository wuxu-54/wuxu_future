# Field常见属性和api

在 Java 反射机制里，`java.lang.reflect.Field` 类用于表示类或接口中的字段（成员变量）。下面为你详细列举 `Field` 类的属性与 API。

## 属性

`Field` 类本身没有公开的实例属性，但它继承自 `AccessibleObject` 类，`AccessibleObject` 有一个受保护的属性 `override`，用于指示该对象的可访问性是否被重写，一般不会直接访问这个属性。

## 常用 API

### 1. 基本信息获取

- **`String getName()`**
  - **作用**：返回该 `Field` 对象所表示字段的名称。
  - **示例**：

```java
import java.lang.reflect.Field;

class MyClass {
    private int myField;
}

public class Main {
    public static void main(String[] args) throws NoSuchFieldException {
        Field field = MyClass.class.getDeclaredField("myField");
        System.out.println(field.getName()); // 输出: myField
    }
}
```

- **`Class<?> getDeclaringClass()`**
  - **作用**：返回声明该 `Field` 对象所表示字段的类或接口的 `Class` 对象。
  - **示例**：

```java
import java.lang.reflect.Field;

class MyClass {
    private int myField;
}

public class Main {
    public static void main(String[] args) throws NoSuchFieldException {
        Field field = MyClass.class.getDeclaredField("myField");
        System.out.println(field.getDeclaringClass().getName()); // 输出: MyClass
    }
}
```

- **`Class<?> getType()`**
  - **作用**：返回该 `Field` 对象所表示字段的声明类型的 `Class` 对象。
  - **示例**：

```java
import java.lang.reflect.Field;

class MyClass {
    private String myField;
}

public class Main {
    public static void main(String[] args) throws NoSuchFieldException {
        Field field = MyClass.class.getDeclaredField("myField");
        System.out.println(field.getType().getName()); // 输出: java.lang.String
    }
}
```

- **`Type getGenericType()`**
  - **作用**：返回该 `Field` 对象所表示字段的声明类型的 `Type` 对象，支持泛型类型。
  - **示例**：

```java
import java.lang.reflect.Field;
import java.lang.reflect.Type;
import java.util.List;

class MyClass {
    private List<String> myField;
}

public class Main {
    public static void main(String[] args) throws NoSuchFieldException {
        Field field = MyClass.class.getDeclaredField("myField");
        Type genericType = field.getGenericType();
        System.out.println(genericType.getTypeName()); // 输出: java.util.List<java.lang.String>
    }
}
```

### 2. 修饰符相关

- **`int getModifiers()`**
  - **作用**：返回该 `Field` 对象所表示字段的 Java 语言修饰符，修饰符由 `java.lang.reflect.Modifier` 类中的静态常量表示。
  - **示例**：

```java
import java.lang.reflect.Field;
import java.lang.reflect.Modifier;

class MyClass {
    public static final int MY_FIELD = 1;
}

public class Main {
    public static void main(String[] args) throws NoSuchFieldException {
        Field field = MyClass.class.getField("MY_FIELD");
        int modifiers = field.getModifiers();
        System.out.println(Modifier.isPublic(modifiers));    // 输出: true
        System.out.println(Modifier.isStatic(modifiers));    // 输出: true
        System.out.println(Modifier.isFinal(modifiers));     // 输出: true
    }
}
```

### 3. 字段值的访问与修改

- **`Object get(Object obj)`**
  - **作用**：返回指定对象上此 `Field` 所表示字段的值。如果该字段是静态字段，`obj` 参数可以为 `null`。
  - **示例**：

```java
import java.lang.reflect.Field;

class MyClass {
    public int myField = 10;
}

public class Main {
    public static void main(String[] args) throws Exception {
        MyClass obj = new MyClass();
        Field field = MyClass.class.getField("myField");
        int value = (int) field.get(obj);
        System.out.println(value); // 输出: 10
    }
}
```

- **`void set(Object obj, Object value)`**
  - **作用**：将指定对象上此 `Field` 所表示字段设置为指定的新值。如果该字段是静态字段，`obj` 参数可以为 `null`。
  - **示例**：

```java
import java.lang.reflect.Field;

class MyClass {
    public int myField = 10;
}

public class Main {
    public static void main(String[] args) throws Exception {
        MyClass obj = new MyClass();
        Field field = MyClass.class.getField("myField");
        field.set(obj, 20);
        System.out.println(obj.myField); // 输出: 20
    }
}
```

- **`getXxx(Object obj)` 系列方法**
  - 包括 `getBoolean`、`getByte`、`getShort`、`getInt`、`getLong`、`getFloat`、`getDouble` 等方法，用于获取基本数据类型字段的值。
  - **示例**：

```java
import java.lang.reflect.Field;

class MyClass {
    public int myField = 10;
}

public class Main {
    public static void main(String[] args) throws Exception {
        MyClass obj = new MyClass();
        Field field = MyClass.class.getField("myField");
        int value = field.getInt(obj);
        System.out.println(value); // 输出: 10
    }
}
```

- **`setXxx(Object obj, xxx value)` 系列方法**
  - 包括 `setBoolean`、`setByte`、`setShort`、`setInt`、`setLong`、`setFloat`、`setDouble` 等方法，用于设置基本数据类型字段的值。
  - **示例**：

```java
import java.lang.reflect.Field;

class MyClass {
    public int myField = 10;
}

public class Main {
    public static void main(String[] args) throws Exception {
        MyClass obj = new MyClass();
        Field field = MyClass.class.getField("myField");
        field.setInt(obj, 20);
        System.out.println(obj.myField); // 输出: 20
    }
}
```

### 4. 注解相关

- **`<T extends Annotation> T getAnnotation(Class<T> annotationClass)`**
  - **作用**：如果该元素上存在指定类型的注解，则返回这些注解，否则返回 `null`。
  - **示例**：

```java
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;
import java.lang.reflect.Field;

@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
@interface MyAnnotation {
    String value();
}

class MyClass {
    @MyAnnotation("Hello")
    public int myField;
}

public class Main {
    public static void main(String[] args) throws NoSuchFieldException {
        Field field = MyClass.class.getField("myField");
        MyAnnotation annotation = field.getAnnotation(MyAnnotation.class);
        if (annotation != null) {
            System.out.println(annotation.value()); // 输出: Hello
        }
    }
}
```

- **`Annotation[] getAnnotations()`**
  - **作用**：返回此元素上存在的所有注解。

### 5. 可访问性控制

- **`void setAccessible(boolean flag)`**
  - **作用**：设置此 `Field` 对象的可访问标志。如果 `flag` 为 `true`，则可以访问私有字段；如果 `flag` 为 `false`，则恢复默认的访问规则。
  - **示例**：

```java
import java.lang.reflect.Field;

class MyClass {
    private int myField = 10;
}

public class Main {
    public static void main(String[] args) throws Exception {
        MyClass obj = new MyClass();
        Field field = MyClass.class.getDeclaredField("myField");
        field.setAccessible(true);
        int value = field.getInt(obj);
        System.out.println(value); // 输出: 10
    }
}
```

以上就是 `Field` 类的主要属性和 API，借助这些方法能够在运行时动态获取和修改类的字段信息。
