# dart编码规范

Dart 有一套官方推荐的编码规范，遵循这些规范可以提高代码的可读性、可维护性，并且方便团队协作。以下是 Dart 编码规范的一些主要方面：

## 命名规范

### 变量和参数

- **使用小驼峰命名法**：变量和参数名应以小写字母开头，后续单词首字母大写。

```dart
int studentAge = 20;
String studentName = 'John';
```

### 常量

- **使用全大写字母，单词之间用下划线分隔**：对于编译时常量（`const`）和运行时常量（`final`）都适用。

```dart
const MAX_COUNT = 100;
final APP_VERSION = '1.0.0';
```

### 类和枚举

- **使用大驼峰命名法**：类名和枚举名的每个单词首字母都大写。

```dart
class Student {
  String name;
  int age;

  Student(this.name, this.age);
}

enum Color {
  red,
  green,
  blue
}
```

### 方法和函数

- **使用小驼峰命名法**：方法和函数名应以小写字母开头，后续单词首字母大写。

```dart
void printStudentInfo(Student student) {
  print('Name: ${student.name}, Age: ${student.age}');
}
```

### 库和源文件

- **使用小写字母，单词之间用下划线分隔**：库名和源文件名应简洁且具有描述性。

```dart
// 文件名：student_utils.dart
library student_utils;

// 其他代码...
```

## 代码格式

### 缩进

- **使用 2 个空格进行缩进**：避免使用制表符，保持代码风格一致。

### 行长度

- **每行代码尽量不超过 80 个字符**：如果超过，可以适当换行。

```dart
// 长表达式换行示例
final longString = 'This is a very long string that '
    'needs to be split into multiple lines '
    'for better readability.';
```

### 括号和空格

- **在关键字和括号之间留一个空格**：例如 `if`, `for`, `while` 等。

```dart
if (condition) {
  // 代码块
}

for (int i = 0; i < 10; i++) {
  // 代码块
}
```

- **在逗号、分号后留一个空格**：

```dart
void printNumbers(int a, int b) {
  print('$a, $b');
}
```

## 注释规范

### 单行注释

- **使用 `//` 进行单行注释**：用于解释代码的功能、意图或提供临时说明。

```dart
// 计算两个数的和
int add(int a, int b) {
  return a + b;
}
```

### 多行注释

- **使用 `/* ... */` 进行多行注释**：用于注释掉一段代码或提供较长的说明。

```dart
/*
  这个函数用于计算两个数的乘积。
  参数:
  - a: 第一个数
  - b: 第二个数
  返回值:
  两个数的乘积
*/
int multiply(int a, int b) {
  return a * b;
}
```

### 文档注释

- **使用 `///` 进行文档注释**：用于为类、方法、函数等生成文档。

```dart
/// 表示一个学生类。
class Student {
  /// 学生的姓名。
  String name;

  /// 学生的年龄。
  int age;

  /// 构造函数，初始化学生的姓名和年龄。
  ///
  /// [name] 学生的姓名。
  /// [age] 学生的年龄。
  Student(this.name, this.age);
}
```

## 其他规范

### 避免使用 `var` 时类型不明确

- 当变量类型很明显时，可以使用 `var` 简化代码；但如果类型不明确，建议显式指定类型。

```dart
// 类型明确，使用 var
var numbers = [1, 2, 3];

// 类型不明确，显式指定类型
Map<String, dynamic> studentData = {'name': 'John', 'age': 20};
```

### 避免使用 `new` 关键字

- 在 Dart 2 中，`new` 关键字是可选的，建议省略。

```dart
// 省略 new 关键字
var student = Student('John', 20);
```

### 遵循单一职责原则

- 每个类、方法和函数应该只负责一个明确的功能，提高代码的可维护性和可测试性。

你可以通过 `dartfmt` 工具自动格式化代码，使其符合 Dart 编码规范。在终端中运行以下命令可以格式化当前目录下的所有 Dart 文件：

```sh
dartfmt -w .
```

此外，Dart 官方还提供了 `linter` 工具，可以帮助你检查代码是否符合规范。可以在 `pubspec.yaml` 文件中添加 `lints` 依赖，然后在代码中使用：

```yaml
dev_dependencies:
  lints: ^2.0.0
```

运行以下命令进行代码检查：

```sh
dart analyze
```

---

## 编码规范问题记录

### 1. final运行时常量为啥要小写

Android Studio 建议小写的原因，Android Studio 遵循 Dart 的命名约定，建议对 final 变量使用小写命名，主要基于以下几点：

- 语义区分（主要是这条）：使用不同的大小写风格可以帮助开发者从命名上快速区分常量和普通的不可变变量。const 常量使用大写命名，而 final 变量使用小写命名，这样在代码阅读和维护时能更清晰地理解变量的性质。
- 行业共识：遵循统一的命名约定是软件开发行业的良好实践，有助于提高代码的可读性和可维护性。当多个开发者合作开发一个项目时，统一的命名风格可以减少沟通成本，让代码更易于理解。
