# 注解

在 Dart 中，注解（Annotations）是一种特殊的声明，可以附加到类、函数、构造函数、方法、变量或参数上。注解通常用于以下目的：

1. **元数据**：为代码提供额外的元数据信息，这些信息可以在运行时被读取和使用。
2. **框架集成**：许多 Dart 框架使用注解来定义框架特定的行为，例如路由、依赖注入等。
3. **代码生成**：注解可以触发代码生成，例如使用 `build_runner` 工具自动生成样板代码。

Dart 中的注解语法使用 `@` 符号，后面跟着注解的名称，如果有参数，则在圆括号内指定。

## dart注解含义

含义同java、kotlin 等语言的语法类似，但注解的定义及声明有些差异。
>请注意：如同Java、Kotlin，注解与TS、Python语言的装饰器是有本质区别的!
>Java、Kotlin、dart 注解并不会影响和改变原有功能，而TS、Python装饰器的会扩展原有功能。（这是我个人理解）

```dart
//定义注解
class Todo{
    final String who;
    final String what;
    const Todo(this.who,this.what);
}

//使用注解
@Todo('aaa','do hhh.')
void doSomething(){}
```

## 基本注解示例

```dart
@Deprecated('Use newMethod instead')
void oldMethod() {
  print('This method is deprecated');
}

@override
String toString() {
  return 'This is a custom toString method';
}

class MyClass {
  @visibleForTesting
  int _secretValue;

  MyClass([this._secretValue = 42]);

  @Deprecated("Use the 'newMethod' instead")
  void oldMethod() {
    print('This method is deprecated');
  }
}
```

## 自定义注解

Dart 允许你创建自定义注解。自定义注解通常用于框架或库的内部使用，以提供特定的行为或元数据。

```dart
// 定义一个注解
class TestAnnotation {
  final String value;
  const TestAnnotation(this.value);
}

// 使用注解
@TestAnnotation('Test Value')
void myFunction() {
  print('This function is annotated with TestAnnotation');
}
```

## 访问注解

要访问注解，可以使用 Dart 的反射 API。这通常涉及到 `reflect` 库中的 `instanceMirror` 和 `declaredMembers`。

```dart
import 'dart:mirrors';

void main() {
  myFunction();
  var mirror = reflect(myFunction);
  var metadata = mirror.metadata;

  for (var meta in metadata) {
    print('${meta.runtimeType}: ${meta.value}');
  }
}
```

## 注意事项

- 注解不会改变代码的行为，它们只是提供额外的信息。
- 注解可以被框架或工具读取，以改变代码的行为或生成代码。
- 注解是可选的，Dart 代码的功能不依赖于注解。

在使用注解时，应该遵循框架或库的文档，因为不同的框架可能有不同的注解约定和用法。
