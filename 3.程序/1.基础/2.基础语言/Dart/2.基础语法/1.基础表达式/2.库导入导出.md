# 库导入导出

在Dart中，导入（`import`）和导出（`export`）是管理代码模块化和重用的重要机制。它们允许你将代码组织成多个文件，并在需要时将特定的代码暴露给其他库或应用程序。

## 导入（`import`）

导入语句用于将其他库的代码引入到当前文件中。Dart支持以下几种导入方式：

1. **导入内置库**：使用`dart:`前缀，如`import 'dart:math';`。

2. **导入Pub包**：使用`package:`前缀，如`import 'package:flutter/material.dart';`。

3. **导入本地文件**：使用相对路径，如`import 'utils.dart';`。

4. **导入别名**：使用`as`关键字为库指定别名，如`import 'some_library.dart' as my_lib;`。

5. **导入部分库内容**：使用`show`和`hide`关键字控制导入的内容。`show`只导入指定的标识符，`hide`则排除某些标识符，如`import 'some_library.dart' show MyClass;`。

6. **条件导入**：使用`if`语句进行条件导入，如`import 'dart:io' if (dart.library.io) 'file_io.dart';`。

7. **延迟加载**：使用`deferred as`进行导入，如`import 'library.dart' deferred as lib;`。

## 导出（`export`）

导出语句用于从一个库中导出特定的文件，使得其他库可以更方便地使用这些文件中的内容。

1. **直接导出**：使用`export`关键字导出文件中的全部或部分内容，如`export 'file1.dart';`。

2. **导出别名**：为导出的库指定别名，如`export 'file1.dart' as my_file;`。

3. **组合导出**：将多个文件的内容组合到一个文件中导出，如在一个`main.dart`文件中使用多个`export`语句导出其他文件。

4. **条件导出**：类似于条件导入，使用`if`语句进行条件导出。

5. **导出时控制可见性**：同样可以使用`show`和`hide`关键字控制导出的内容。

## 导入与导出的区别

- **作用域**：导入（`import`）不会完全共享作用域，而`part`之间是完全共享的。
- **可见性**：在A库中`import`了B库，A库对B库是不可见的。而`part`的作用是将一个库拆分成较小的组件，它们彼此之间是知道互相的存在的。

## 使用场景

- 当你需要重用代码时，可以将代码分割到不同的文件中，并使用导入将它们包含在主文件中。
- 当你希望将库的一部分而不是全部暴露给其他开发者时，可以使用导出来控制可见性。

## 实际示例

假设你有一个项目结构如下：

```txt
lib/
├── my_library.dart
├── utils.dart
└── models/
   └── user.dart
```

在`my_library.dart`中，你可能想要导出`user.dart`和`utils.dart`中的内容：

```dart
// my_library.dart
library my_library;

export 'package:flutter/material.dart' hide runApp; // 导入并隐藏runApp
export 'models/user.dart'; // 直接导出user.dart
export 'utils.dart' show calculate; // 仅导出utils.dart中的calculate函数
```

在`main.dart`中，你可以这样导入`my_library.dart`：

```dart
// main.dart
import 'lib/my_library.dart';

void main() {
  final user = User();
  user.greet();
  calculate(10);
  // runApp不会被导入，因为它被隐藏了
}
```
