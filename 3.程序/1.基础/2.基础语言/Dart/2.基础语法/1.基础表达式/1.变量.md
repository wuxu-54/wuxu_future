# 变量

dart很多语法跟kotlin相同，可能有格式上的差异，但设计思想是相通的。

## 定义变量

```dart
var name = 'A'; // 可变变量
const name2 = 'B'; //不可修改变量，编译时常量
final name3 = 'C'; // 不可修改，运行时常量，只能设置一次

//上述声明没有指定类型，dart编译器可以推断数据类型。也可以直接声明类型
String name4 = 'D';
const String name5 = 'E';
final String name6 = 'F';
```

const与final区别？

答：

1. const是编译时常量，编译时就确定了值。final 是运行时常量，只能设置一次值，设置后就无法再更改。
2. 使用 const 的对象不能被重写或重载，因为它们在编译时就已经确定。
3. 对象或数组类型变量被const标记，因为是编译时就确定了，所以其内容也不能修改，但final可以，final只关注变量本身不关注其内容。比如对象里面的属性可以变，但这个对象变量不能被重新赋值。

## 空安全

使用`？`字符做标记，表示变量是否可空
>kotlin 也有相同的设计，可空：`var name :String?`

```dart
String? name //可空 默认值可以为 `null`
String name1 // 不可空 不能有 `null` 值
```

### `??`运算符

空值合并运算符，。它用于处理变量可能为 null 的情况。如果左侧的操作数不是 null，它将返回左侧操作数的值；如果左侧操作数是 null，它将返回右侧操作数的值。
>kotlin中的`?:`

格式：variable ?? defaultValue

与 `?.` 运算符的区别：

- `??` 是空值合并运算符，用于提供当变量为 null 时的默认值。
- `?.` 是条件成员访问运算符，用于安全地访问对象的成员，如果对象为 null，则不执行成员访问，而是返回 null。

```dart
String? first = null;
String? second = 'World';
String? third = '!';

String result = first ?? second ?? third; // "World"
```

## 默认值

可空变量：值可以为 `null` 或 具体值
不可空变量：值在使用前必须初始化

```dart
int lineCount;//不可空变量，不必声明时就初始化，但必须在使用前初始化

if (weLikeToCount) {
  lineCount = countLines();
} else {
  lineCount = 0;
}

print(lineCount);// 这是真正使用的地方，lineCount已经初始化了，所以这段语句合法
```

## 延迟初始化

延迟初始化：在使用时才对变量进行初始化赋值，可以避免内存开销，更加灵活。

使用关键字：`late`。
> 等同于kotlin 中的lazy。

```dart
late String name = initName();//这里 initName 不会直接被调用

Function initName():String = "a";

print(name);// 在真正使用时才进行初始化，也就是调用initName(),然后再执行打印函数。
```
