# part与library区别

在Dart语言中，`library`和`part`是两种用于代码组织和模块化的关键字，它们在构建大型应用或库时非常有用。尽管它们都有助于代码的分割和管理，但它们的作用和用途有所不同。

## `library`

1. **定义**：`library`关键字用于声明一个Dart库的根文件。一个库是一组可以被其他Dart代码导入的代码集合。
2. **唯一性**：在一个库中，只有一个文件可以声明`library`，这个文件通常包含库的公共API和入口点。
3. **作用域**：`library`定义了一个作用域，该作用域内的代码默认对外是不可见的，除非通过`export`或`show`/`hide`关键字明确指定。
4. **可见性控制**：通过`export`可以控制哪些文件或库成员对外部可见。
5. **条件成员导出**：可以使用条件语句来根据平台或其他条件导出不同的成员。

## `part`

1. **定义**：`part`关键字用于将一个库分割成多个文件，这些文件称为“parts”。
2. **关联性**：`part`文件必须与一个已经声明的库关联，通过`part of <library_name>;`来实现。
3. **共享作用域**：所有`part`文件共享同一个作用域，它们彼此之间是可见的，不需要额外的导入或导出。
4. **组织代码**：`part`用于将相关的类或方法分割到不同的文件中，以提高代码的可读性和可维护性。
5. **无需重复导入**：在`part`文件中定义的代码自动成为库的一部分，无需显式导入。

## 主要区别

- **声明**：`library`用于声明库的根文件，而`part`用于将库分割成多个文件。
- **作用域**：`library`定义了一个作用域，而`part`文件共享同一个作用域。
- **可见性**：`library`中的代码默认不可见，需要通过`export`或`show`/`hide`来控制可见性；`part`文件中定义的代码对整个库是可见的。
- **文件数量**：一个库只有一个`library`声明，但可以有多个`part`声明。

## 使用场景

- **大型应用**：当构建大型应用时，可以使用`library`和`part`来分割代码，提高模块化和可维护性。
- **代码重用**：通过`library`和`export`，可以将代码组织成可重用的模块。
- **条件编译**：使用`library`的条件成员导出，可以根据不同的平台或条件编译不同的代码。

## 示例

假设有一个名为`my_app`的库：

**lib/my_app.dart** - 库的根文件

```dart
library my_app;

export 'button.dart';
export 'input_field.dart' show InputField;
hide InputFieldValidator;

part 'button.dart';
part 'input_field.dart';
```

**lib/button.dart** - 库的一部分

```dart
part of my_app;

class MyButton {
  // ...
}
```

**lib/input_field.dart** - 库的另一部分

```dart
part of my_app;

class MyInputField {
  // ...
}
```

在这个示例中，`my_app.dart`是库的根文件，它使用`library`关键字声明了库的名称，并使用`export`和`part`关键字来管理库的可见性和组织。`button.dart`和`input_field.dart`是`my_app`库的一部分，它们通过`part of my_app;`与库关联，并共享同一个作用域。

通过合理使用`library`和`part`，你可以构建结构清晰、易于维护的大型Dart项目。
