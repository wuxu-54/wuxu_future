# 计时器

在 Dart 中，可以使用 `Timer` 类来创建计时器。Dart 提供了几种不同的计时器，包括周期性执行的计时器和一次性执行的计时器。以下是一些基本的使用示例：

## 一次性计时器

使用 `Timer` 类的 `run` 方法可以创建一个一次性的计时器，该计时器在指定的延迟后执行一个函数：

```dart
import 'dart:async';

void main() {
  const duration = Duration(seconds: 5);
  Timer.run(() {
    print('一次性计时器执行，延迟了 $duration');
  });
}
```

## 重复性计时器

如果你需要周期性地执行某个函数，可以使用 `Timer.periodic` 方法创建一个重复性计时器：

```dart
import 'dart:async';

void main() {
  const duration = Duration(seconds: 1);
  Timer.periodic(duration, (Timer timer) {
    print('重复性计时器执行，当前时间： ${DateTime.now()}');
    // 如果需要取消计时器，可以调用 timer.cancel() 
    // 例如，5秒后自动取消
    if (timer.tick >= 5) {
      timer.cancel();
      print('计时器已取消');
    }
  });
}
```

## 取消计时器

使用 `Timer` 的 `cancel` 方法可以停止计时器：

```dart
Timer timer = Timer.periodic(Duration(seconds: 1), (Timer t) {
  print("计时器还在运行...");
  // 执行某些操作...
});

// 取消计时器
timer.cancel();
print("计时器已取消");
```

## 使用 `Future.delayed`

除了 `Timer` 类，Dart 还提供了 `Future.delayed` 方法，它返回一个在给定延迟后解析的 `Future` 对象：

```dart
import 'dart:async';

void main() {
  Future.delayed(Duration(seconds: 2), () {
    print('Future.delayed 执行');
  });
}
```

`Future.delayed` 通常用于异步操作中的延迟执行，而 `Timer` 更适合需要周期性执行的场景。

使用计时器时，要确保在不再需要时取消它们，以避免内存泄漏和其他潜在问题。
