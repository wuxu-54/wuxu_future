# async 与 async*

在 Dart 语言中，`async` 和 `async*` 是两种不同的异步语法，它们用于处理异步操作，但用途和行为有所不同。

## async

- `async` 关键字用于声明一个异步函数，这种函数通常用于执行异步操作，如 I/O 操作、网络请求等。
- 使用 `async` 声明的函数会返回一个 `Future` 对象。
- 异步函数可以使用 `await` 关键字来等待其他异步操作完成，而不会阻塞程序的执行。

**示例**:

```dart
Future<void> fetchData() async {
  var data = await someAsyncOperation(); // 使用 await 等待异步操作完成
  print(data);
}
```

## async*

- `async*` 关键字用于声明一个异步生成器函数，这种函数可以逐个产生一系列的值。
- 使用 `async*` 声明的函数返回一个 `Stream` 对象。
- 异步生成器函数可以使用 `yield` 或 `yield*` 关键字来产生值。

**示例**:

```dart
Stream<String> asyncStreamGenerator() async* {
  for (var i = 0; i < 5; i++) {
    yield 'Value $i';
    await Future.delayed(Duration(seconds: 1)); // 模拟异步操作
  }
}
```

## 主要区别

1. **返回类型**:
   - `async` 函数返回 `Future`。
   - `async*` 函数返回 `Stream`。

2. **用途**:
   - `async` 用于执行单个异步操作。
   - `async*` 用于生成一系列值，可能是基于异步操作的结果。

3. **控制流**:
   - `async` 函数通常用于等待异步操作完成。
   - `async*` 函数可以多次产生值，并且可以在每次产生值后暂停和恢复。

4. **使用场景**:
   - 使用 `async` 当你需要执行一个或多个异步操作并处理结果。
   - 使用 `async*` 当你需要创建一个可以逐个产生值的流，这些值可能是基于异步事件的。

5. **错误处理**:
   - `async` 函数可以通过 `try-catch` 来捕获错误。
   - `async*` 函数同样可以通过 `try-catch` 来捕获错误，并且可以使用 `yield*` 来委托给其他流。

6. **性能**:
   - `async*` 可以更有效地处理大量的异步事件，因为它不需要一次性创建所有值。

理解 `async` 和 `async*` 的区别对于编写高效的异步代码非常重要，尤其是在处理复杂的异步逻辑和数据流时。
