# 函数方法

## 定义函数

结构：返回值类型 函数名(参数列表){ return 返回值; }

```dart
bool isNoble(int atomicNumber) {
  return _nobleGases[atomicNumber] != null;
}

//可省略返回值类型，编译器会推断类型
isNoble(int atomicNumber) {
  return _nobleGases[atomicNumber] != null;
}

//函数体中 只有一行语句，那么可以简写。 `=>` 
bool isNoble(int atomicNumber) => _nobleGases[atomicNumber] != null;
```

## 函数参数

注意！dart不支持参数解构

### 1.命名参数

指定参数名

```dart
//采用 {param1,param2} 指定命名参数。 
void enableFlags({bool bold, bool? hidden}) {} //命名参数定义：  {变量类型:指定名}. `?`表示此参数可空

//使用
enableFlags(bold: true, hidden: false);
```

### 2.参数默认值

```dart
void enableFlags({bool bold = false, bool hidden = false}) {}// {变量类型:指定名=默认值}

enableFlags(bold: true);
```

### 3.必传参数

dart中，函数设置参数列表后，调用时类似js可以不传值，但如果需要强制传入，使用`required`标记

```dart
const Scrollbar({super.key, required Widget child});

//使用时
Scrollbar(child:Widget());//这里child 就是必传参数
```

## 补充

dart中的函数同java、kotlin一样，也有匿名函数、局部函数等概念，这里不再多讲了。

---

## 函数类型

[函数类型](../2.%E7%B1%BB%E5%9E%8B/1.4.%E7%B1%BB%E5%9E%8B-%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B.md)

---

## 调用函数

```dart
// 定义一个可空的函数类型变量
void Function()? nullableFunction;

void main() {
  // 1.调用之前检查是否为 null
  if (nullableFunction != null) {
    nullableFunction();
  }

  // 2.使用空安全调用操作符 ?.
  nullableFunction?.call();

  // 3.1 给可空函数变量赋值
  nullableFunction = () {
    print('Function is called.');
  };

  // 3.2 再次调用
  nullableFunction?.call();
}
```

---

## 立即执行函数

dart拥有同js一样的功能：立即执行函数。写法如下：

```dart
() {
    print('执行逻辑');
    return 20;
  }();
```

解析:

- `(){}` 这个前一部分是个匿名函数
- `()` 后一部分是对函数的执行。
- 把这两部分结合起来，就构成了一个**立即调用函数表达式（Immediately Invoked Function Expression，IIFE）**。其作用是在代码执行到此处时，马上定义并调用这个匿名函数，获取函数的返回值。
