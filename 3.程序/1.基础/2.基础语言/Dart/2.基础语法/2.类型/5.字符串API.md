# 字符串API

Dart 提供了一系列字符串操作的 API，这些 API 允许你对字符串进行各种操作，包括查询、修改、遍历等。以下是一些常用的 Dart 字符串 API 及其详解：

## 通用

字符串可以使用单引号或双引号标注，二者完全一样，不过实际开发中要与团队统一，推荐使用单引号，更简洁。

### 1. 字符串连接（Concatenation）

使用 `+` 运算符或 `""`（空字符串）来连接字符串：

```dart
String str1 = "Hello";
String str2 = "World";
String result = str1 + ", " + str2; // "Hello, World"
```

（推荐）使用`$`或`${}`拼接

```dart
String str1 = "Hello";
String str2 = "World";
String result = '$str1,${str2}'; // "Hello, World"
```

### 2. 字符串长度（Length）

使用 `length` 属性获取字符串的长度：

```dart
String str = "Hello";
int length = str.length; // 5
```

### 3. 子字符串（Substring）

使用 `substring` 方法获取字符串的一部分：

```dart
String str = "Hello, World!";
String sub = str.substring(0, 5); // "Hello"
```

### 4. 字符串查找（Finding）

使用 `indexOf`、`lastIndexOf` 方法查找子字符串的位置：

```dart
String str = "Hello, World!";
int index = str.indexOf("World"); // 7
int lastIndex = str.lastIndexOf("l"); // 8
```

### 5. 字符串比较（Comparison）

使用 `compareTo` 方法比较两个字符串：

```dart
String str1 = "apple";
String str2 = "banana";
int comparison = str1.compareTo(str2); // -1 (str1 < str2)
```

### 6. 字符串分割（Splitting）

使用 `split` 方法按指定分隔符分割字符串：

```dart
String str = "a,b,c";
List<String> parts = str.split(","); // ["a", "b", "c"]
```

### 7. 字符串替换（Replacement）

使用 `replace` 和 `replaceAll` 方法替换字符串中的字符或子字符串：

```dart
String str = "Hello, World!";
String replaced = str.replaceRange(7, 12, "there"); // "Hello, there!"
String replacedAll = str.replaceAll("World", "everyone"); // "Hello, everyone!"
```

### 8. 字符串去除空白（Trimming）

使用 `trim` 方法去除字符串两端的空白字符：

```dart
String str = "  Hello, World!  ";
String trimmed = str.trim(); // "Hello, World!"
```

### 9. 字符串大小写转换（Case Conversion）

使用 `toLowerCase` 和 `toUpperCase` 方法转换字符串的大小写：

```dart
String str = "Hello, World!";
String lower = str.toLowerCase(); // "hello, world!"
String upper = str.toUpperCase(); // "HELLO, WORLD!"
```

### 10. 字符串格式化（Formatting）

使用 `sprintf` 风格的方法进行字符串格式化：

```dart
String formatted = '%s says %s'.printf(["Alice", "Hello"]); // "Alice says Hello"
```

### 11. 字符串包含检查（Containment Check）

使用 `contains` 方法检查字符串是否包含另一个子字符串：

```dart
String str = "Hello, World!";
bool containsWorld = str.contains("World"); // true
```

### 12. 字符串字符访问（Character Access）

使用索引访问字符串中的特定字符：

```dart
String str = "Hello";
String firstChar = str[0]; // "H"
```

### 13. 字符串编码（Encoding）

使用 `encodeUtf8` 将字符串编码为 UTF-8：

```dart
String str = "Hello, World!";
List<int> encoded = str.encodeUtf8(); // [72, 101, 108, 108, 111, 44, 32, 87, 111, 114, 108, 100, 33]
```

### 14. 字符串解码（Decoding）

使用 `decodeUtf8` 将 UTF-8 编码的字节解码为字符串：

```dart
List<int> encoded = [72, 101, 108, 108, 111, 44, 32, 87, 111, 114, 108, 100, 33];
String decoded = String.fromCharCodes(encoded); // "Hello, World!"
```

---

## 遍历

在 Dart 中，字符串遍历可以通过几种不同的方式实现。以下是一些用于遍历字符串的 API：

### 1. 使用 `for` 循环

直接通过索引访问每个字符：

```dart
String str = "Hello";
for (int i = 0; i < str.length; i++) {
  print(str[i]);
}
```

### 2. 使用 `forEach` 方法

使用字符串的 `forEach` 方法对每个字符执行操作：

```dart
str.forEach((char) => print(char));
```

### 3. 使用 `for-in` 循环

直接遍历字符串中的每个字符：

```dart
for (var char in str) {
  print(char);
}
```

### 4. 使用 `map` 方法

使用 `map` 方法将字符串中的每个字符转换为新的形式：

```dart
var transformed = str.map((char) => char.toUpperCase()).toList();
print(transformed); // 输出转换为大写的字符列表
```

### 5. 使用 `where` 方法

使用 `where` 方法根据条件过滤字符串中的字符：

```dart
var vowels = str.where((char) => 'AEIOUaeiou'.contains(char)).toList();
print(vowels); // 输出所有元音字母
```

>where 方法是 Iterable 类的一个扩展方法，这意味着它可以被任何实现了 Iterable 接口的对象使用，包括 String 类型
>如果没有where方法，那么可能是：1.开发环境或 Flutter 版本过旧，不支持 Iterable 的扩展方法。2.你可能没有正确地导入包含 where 方法的库。

### 6. 使用 `expand` 方法

使用 `expand` 方法将每个字符扩展为多个元素：

```dart
var expanded = str.expand((char) => [char, char.codeUnitAt(0)]).toList();
print(expanded); // 输出字符及其 ASCII 码的列表
```

### 7. 使用 `windowed` 方法

使用 `windowed` 方法遍历字符串的滑动窗口：

```dart
var windows = str.windowed(2);
print(windows); // 输出字符串的滑动窗口视图
```

### 8. 使用 `take` 和 `takeWhile` 方法

使用 `take` 方法获取字符串的前 n 个字符，或使用 `takeWhile` 方法根据条件获取字符：

```dart
var firstChars = str.take(3);
print(firstChars); // 输出字符串的前 3 个字符

var firstLowerCase = str.takeWhile((char) => char.isLowerCase());
print(firstLowerCase); // 输出直到第一个非小写字母之前的所有字符
```

### 9. 字符串迭代器

Dart 字符串是可迭代的，可以直接用于 `for-in` 循环或 `Iterable` 构造函数：

```dart
Iterable<String> characters = str;
print(characters); // 使用 Iterable 构造函数
```

这些 API 提供了灵活的方法来遍历和操作 Dart 字符串中的字符。根据你的具体需求，你可以选择最合适的方法来进行字符串遍历。
