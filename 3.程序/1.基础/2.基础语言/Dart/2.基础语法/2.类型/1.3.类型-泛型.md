# 泛型

在 Dart 中，泛型是一种强大的编程特性，它允许你在定义类、接口、方法等时使用类型参数，使得代码具有更好的复用性和类型安全性。
>跟java一样

以下是关于 Dart 泛型的详细介绍：

## 1. 泛型的基本概念和作用

泛型的主要作用是在代码中创建可重用的组件，同时保持类型安全。通过使用泛型，可以编写不依赖于特定数据类型的代码，从而提高代码的灵活性和可维护性。

## 2. 泛型类

泛型类是使用泛型类型参数定义的类。以下是一个简单的泛型类示例：

```dart
class Box<T> {
  T value;
  Box(this.value);
}

void main() {
  // 创建一个存储整数的 Box 实例
  Box<int> intBox = Box(10);
  print(intBox.value); // 输出: 10

  // 创建一个存储字符串的 Box 实例
  Box<String> stringBox = Box('Hello');
  print(stringBox.value); // 输出: Hello
}
```

在上述代码中，`Box` 类是一个泛型类，`T` 是类型参数。在创建 `Box` 类的实例时，可以指定具体的类型，如 `int` 或 `String`。

## 3. 泛型方法

泛型方法是在方法定义中使用泛型类型参数的方法。以下是一个泛型方法的示例：

```dart
T getFirstElement<T>(List<T> list) {
  if (list.isEmpty) {
    throw ArgumentError('List is empty');
  }
  return list[0];
}

void main() {
  List<int> intList = [1, 2, 3];
  int firstInt = getFirstElement(intList);
  print(firstInt); // 输出: 1

  List<String> stringList = ['apple', 'banana', 'cherry'];
  String firstString = getFirstElement(stringList);
  print(firstString); // 输出: apple
}
```

在上述代码中，`getFirstElement` 是一个泛型方法，`T` 是类型参数。该方法接受一个泛型列表，并返回列表的第一个元素。

## 4. 泛型接口

泛型接口是使用泛型类型参数定义的接口。以下是一个泛型接口的示例：

```dart
abstract class Container<T> {
  T getValue();
  void setValue(T value);
}

class MyContainer<T> implements Container<T> {
  T _value;
  MyContainer(this._value);

  @override
  T getValue() {
    return _value;
  }

  @override
  void setValue(T value) {
    _value = value;
  }
}

void main() {
  MyContainer<int> intContainer = MyContainer(20);
  print(intContainer.getValue()); // 输出: 20

  intContainer.setValue(30);
  print(intContainer.getValue()); // 输出: 30
}
```

在上述代码中，`Container` 是一个泛型接口，`MyContainer` 类实现了该接口，并指定了具体的类型参数。

## 5. 泛型类型约束

在 Dart 中，可以使用 `extends` 关键字为泛型类型参数添加约束，限制泛型类型必须是某个类或其子类。以下是一个带有类型约束的泛型类示例：

```dart
class Shape {
  void draw() {
    print('Drawing a shape');
  }
}

class Circle extends Shape {
  @override
  void draw() {
    print('Drawing a circle');
  }
}

class ShapeDrawer<T extends Shape> {
  T shape;
  ShapeDrawer(this.shape);

  void drawShape() {
    shape.draw();
  }
}

void main() {
  Circle circle = Circle();
  ShapeDrawer<Circle> circleDrawer = ShapeDrawer(circle);
  circleDrawer.drawShape(); // 输出: Drawing a circle
}
```

在上述代码中，`ShapeDrawer` 类的泛型类型参数 `T` 被约束为 `Shape` 类或其子类。这样，`ShapeDrawer` 类只能接受 `Shape` 类型或其子类型的对象。

## 6. 泛型集合

Dart 中的许多集合类都是泛型的，如 `List`、`Set` 和 `Map`。以下是一些泛型集合的示例：

```dart
void main() {
  // 泛型列表
  List<int> numbers = [1, 2, 3];
  print(numbers); // 输出: [1, 2, 3]

  // 泛型集合
  Set<String> fruits = {'apple', 'banana', 'cherry'};
  print(fruits); // 输出: {apple, banana, cherry}

  // 泛型映射
  Map<String, int> scores = {'Alice': 80, 'Bob': 90};
  print(scores); // 输出: {Alice: 80, Bob: 90}
}
```

## 7. 注意事项

- **类型擦除**：在 Dart 中，泛型是在编译时进行类型检查的，运行时会进行类型擦除，即泛型类型信息在运行时不可用。
- **泛型参数的命名**：通常使用单个大写字母（如 `T`、`E`、`K`、`V` 等）来命名泛型类型参数，`T` 通常表示“类型（Type）”，`E` 表示“元素（Element）”，`K` 和 `V` 分别表示“键（Key）”和“值（Value）”。

通过使用泛型，Dart 允许你编写更灵活、可复用且类型安全的代码。
