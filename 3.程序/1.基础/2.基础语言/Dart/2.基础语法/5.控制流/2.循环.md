# 循环

在 Dart 中，循环是重复执行代码块的核心机制。以下是 Dart 支持的循环结构及其详细说明，配合示例帮助你理解：

---

## 一、`for` 循环

用于已知循环次数的场景，语法灵活。

### 1. 基础 `for` 循环

```dart
for (初始化; 条件; 递增/递减) {
  // 循环体
}
```

**示例**：

```dart
for (int i = 1; i <= 5; i++) {
  print(i); // 输出 1, 2, 3, 4, 5
}
```

### 2. `for-in` 循环

遍历可迭代对象（如 `List`、`Set`、`String`）。

```dart
for (var element in iterable) {
  // 操作 element
}
```

**示例**：

```dart
List<String> fruits = ['apple', 'banana', 'orange'];
for (var fruit in fruits) {
  print(fruit); // 依次输出每个水果
}
```

---

## 二、`while` 循环

当循环次数未知，但需满足条件时执行。

```dart
while (条件) {
  // 循环体（条件为 true 时执行）
}
```

**示例**：

```dart
int count = 0;
while (count < 5) {
  print(count); // 输出 0, 1, 2, 3, 4
  count++;
}
```

---

## 三、`do-while` 循环

至少执行一次循环体，再检查条件。

```dart
do {
  // 循环体
} while (条件);
```

**示例**：

```dart
int num = 10;
do {
  print(num); // 输出 10（即使条件不满足也会执行一次）
} while (num < 5);
```

---

## 四、循环控制语句

### 1. `break`

立即终止当前循环。

```dart
for (int i = 0; i < 10; i++) {
  if (i == 5) break;
  print(i); // 输出 0,1,2,3,4
}
```

### 2. `continue`

跳过当前迭代，进入下一次循环。

```dart
for (int i = 0; i < 5; i++) {
  if (i == 2) continue;
  print(i); // 输出 0,1,3,4（跳过2）
}
```

---

## 五、`forEach` 方法

针对集合的高阶函数，简洁但无法使用 `break`/`continue`，同时由于forEach是个闭包，所以`reture`是结束这个闭包函数，这点同java不一样。

```dart
List<int> numbers = [1, 2, 3];
numbers.forEach((number) {
  print(number); // 依次输出 1,2,3
});
```

```dart
bool test(){
  <int>[1,2,3].forEach((int i){
       return true;//这是错的，因为forEach是闭包，返回值是void类型
    }); 
}
```

---

## 六、循环使用场景对比

| 循环类型       | 适用场景                               |
|----------------|---------------------------------------|
| `for`          | 已知循环次数，或需要精确控制循环变量   |
| `for-in`       | 遍历可迭代对象（如列表、集合）         |
| `while`        | 循环次数未知，条件可能随时变化         |
| `do-while`     | 至少执行一次，再检查条件（如输入验证） |

---

## 七、注意事项

1. **避免无限循环**：确保循环条件最终会变为 `false`。
2. **变量作用域**：循环内声明的变量仅在循环体内有效。
3. **异步循环**：在异步操作中注意变量捕获问题（如使用 `forEach` 结合异步函数时可能需要额外处理）。

---

通过合理选择循环结构，可以高效处理重复任务。结合 `break` 和 `continue` 能更灵活控制流程。
