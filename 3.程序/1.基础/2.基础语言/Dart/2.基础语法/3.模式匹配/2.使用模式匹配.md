# 使用模式匹配

## 1. 模式匹配在 switch 语句中的使用

在 Dart 中，switch 语句现在支持使用模式匹配来处理更复杂的条件逻辑。

```dart
var value = ...;

switch (value) {
  case 1:
    // 处理 value 为 1 的情况
    break;
  case 'string':
    // 处理 value 为字符串 'string' 的情况
    break;
  case int i where i > 10:
    // 使用 where 子句处理 value 是大于 10 的整数的情况
    break;
   case var s?:
   //使用模式绑定以及 `?`进行空检查。 非空会进入这里。
    break;
  default:
    // 默认情况
    break;
}
```

## 2. 模式匹配在 for-in 循环中的使用

在迭代键值对集合时，模式匹配允许你直接解构每个键值对。

```dart
var map = {'key1': 'value1', 'key2': 'value2'};

for (var (key, value) in map.entries) {
  print('$key: $value');
}
```

## 3. 使用构造函数调用模式

在 switch 语句中，你可以匹配对象的构造函数调用。

```dart
var object = ...;

switch (object) {
  case const Point(0, 0):
    // 处理特定构造函数调用的情况
    break;
  case Point(a, b) where a == b:
    // 处理 Point 对象且 a 等于 b 的情况
    break;
  default:
    // 默认情况
    break;
}
```

## 4. 模式守卫 (Pattern Guards)

模式守卫允许你在模式匹配的同时加入额外的条件判断。

```dart
var value = ...;

switch (value) {
  case int i when i > 0:
    // 处理 value 是大于 0 的整数的情况
    break;
  case String s when s.isEmpty:
    // 处理 value 是空字符串的情况
    break;
  default:
    // 默认情况
    break;
}
```

## 5. 模式绑定 (Pattern Bindings)

模式绑定允许你在匹配时为变量赋予新的名称。

```dart
var pair = (1, 2);

switch (pair) {
  case (var a, var b) where a < b:
    // 处理第一个元素小于第二个元素的元组
    break;
  default:
    // 默认情况
    break;
}
```

---

## 总结

模式匹配是 Dart 语言的一个强大特性，它提供了一种更简洁、更表达性的方式来处理条件逻辑，并且使得代码更加易于阅读和维护。随着 Dart 语言的不断发展，模式匹配的特性也在不断扩展和完善。
