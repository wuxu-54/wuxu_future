# 循环控制

Kotlin提供了几种循环控制结构，允许你根据不同的条件执行重复的代码块。以下是Kotlin中循环控制的详细说明：

## for 循环

`for` 循环用于遍历已知次数的迭代，例如数组、列表、范围或者其他可迭代对象。

```kotlin
// 使用范围进行for循环
for (i in 1..5) {
    println(i)
}

// 遍历数组或列表
val items = arrayOf("a", "b", "c")
for (item in items) {
    println(item)
}

// 使用索引遍历
for (index in items.indices) {
    println(items[index])
}
```

## while 循环

`while` 循环会在给定的条件为 `true` 时不断执行代码块。

```kotlin
var i = 1
while (i <= 5) {
    println(i)
    i++
}
```

## do-while 循环

`do-while` 循环至少执行一次代码块，然后在给定的条件为 `true` 时继续执行。

```kotlin
var i = 1
do {
    println(i)
    i++
} while (i <= 5)
```

## 循环控制语句

### break 语句

`break` 语句用于立即退出循环，无论是 `for` 循环、`while` 循环还是 `do-while` 循环。

```kotlin
for (i in 1..10) {
    if (i == 5) {
        break // 当 i 等于 5 时退出循环
    }
    println(i)
}
```

### continue 语句

`continue` 语句用于跳过当前迭代的剩余部分，并立即开始下一次迭代。

```kotlin
for (i in 1..10) {
    if (i % 2 == 0) {
        continue // 跳过偶数，不打印
    }
    println(i)
}
```

### return 语句

在循环内的函数或 lambda 表达式中，`return` 语句可以用于退出当前的函数或表达式，并返回一个值。

```kotlin
fun findFirstEven(numbers: List<Int>): Int? {
    for (num in numbers) {
        if (num % 2 == 0) {
            return num // 找到第一个偶数并返回
        }
    }
    return null
}
```

### 标签循环（Labeled Loops）

Kotlin 允许你给循环添加标签，这样你可以使用 `break` 或 `continue` 语句跳转到特定的循环。还可以使用`return`结束某个作用域。

```kotlin
loop@ for (i in 1..10) {
    for (j in 1..10) {
        if (i * j > 50) {
            break@loop // 退出外层循环
        }
    }
}
```

**return:**

```kotlin
//sampleStart
fun foo() {
    listOf(1, 2, 3, 4, 5).forEach lit@{
        if (it == 3) return@lit // 局部返回到该 lambda 表达式的调用者——forEach 循环
        print(it)
    }
    print(" done with explicit label")
}
//sampleEnd

fun main() {
    foo()
}

/**

    现在，它只会从 lambda 表达式中返回。通常情况下使用隐式标签更方便，因为该标签与接受该 lambda 的函数同名。

 */

//sampleStart
fun foo() {
    listOf(1, 2, 3, 4, 5).forEach {
        if (it == 3) return@forEach // 局部返回到该 lambda 表达式的调用者——forEach 循环
        print(it)
    }
    print(" done with implicit label")
}
//sampleEnd

fun main() {
    foo()
}

/**

   或者，我们用一个匿名函数替代 lambda 表达式。 匿名函数内部的 return 语句将从该匿名函数自身返回

 */

//sampleStart
fun foo() {
    listOf(1, 2, 3, 4, 5).forEach(fun(value: Int) {
        if (value == 3) return  // 局部返回到匿名函数的调用者——forEach 循环
        print(value)
    })
    print(" done with anonymous function")
}
//sampleEnd
fun main() {
    foo()
}
```

---

## 循环变量的作用域

在 Kotlin 中，`for` 循环的变量在循环外部是不可见的，因为它们是在循环内部声明的。这有助于避免作用域相关的错误。

```kotlin
for (i in 1..5) {
    // i 在这里可见
}
// i 在这里不可见
```

## 使用迭代器

Kotlin 的 `for` 循环可以自动处理迭代器，但你也可以手动使用它们。

```kotlin
val list = listOf("a", "b", "c")
val iterator = list.iterator()
while (iterator.hasNext()) {
    val item = iterator.next()
    println(item)
}
```

Kotlin的循环控制结构提供了灵活的方式来处理迭代和条件执行，使得代码更加清晰和易于管理。使用这些结构时，应注意保持代码的可读性和逻辑的简洁性。
