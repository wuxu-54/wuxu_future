
# 集合

## 集合类型

在 Kotlin 中，集合是用于存储和操作多个元素的数据结构。Kotlin 提供了多种集合类型，每种类型都有其特定的用途和行为。以下是 Kotlin 中的主要集合类型：

### 1. 列表（List）

- **不可变列表**：`List<T>`，通过 `listOf()` 创建。
- **可变列表**：`MutableList<T>`，通过 `mutableListOf()` 创建。

### 2. 集合（Set）

- **不可变集合**：`Set<T>`，通过 `setOf()` 创建。
- **可变集合**：`MutableSet<T>`，通过 `mutableSetOf()` 创建。

### 3. 映射（Map）

- **不可变映射**：`Map<K, V>`，通过 `mapOf()` 创建。
- **可变映射**：`MutableMap<K, V>`，通过 `mutableMapOf()` 创建。

### 4. 其他集合类型

- **数组**：基本数据类型的集合，如 `IntArray`, `DoubleArray`, `CharArray` 等。
- **序列**：`Sequence<T>`，用于延迟计算的集合，通过 `sequenceOf()` 或 `generateSequence()` 创建。

### 5. 特定用途的集合

- **双端队列**：`LinkedList<T>`，支持在两端添加和移除元素。
- **队列**：`Queue<T>`，通常由 `LinkedList<T>` 实现，支持先进先出（FIFO）的数据结构。
- **栈**：`Stack<T>`，支持后进先出（LIFO）的数据结构，可以通过 `Stack<T>` 类实现。

### 6. 集合操作

Kotlin 还提供了一些用于创建和操作集合的函数和扩展函数，例如：

- `sorted()`, `sortedBy()`, `sortedDescending()`
- `filter()`, `filterNot()`, `filterIsInstance()`
- `map()`, `flatMap()`, `mapNotNull()`
- `associateBy()`, `associateWith()`
- `groupingBy()`, `partition()`
- `reduce()`, `reduceRight()`, `fold()`, `foldRight()`
- `min()`, `max()`, `sum()`, `average()`, `count()`
- `any()`, `all()`, `none()`

### 7. 集合的不可变性

- **不可变集合**：一旦创建，其内容不能被修改。
- **可变集合**：可以添加、删除或修改其元素。

### 8. 集合的序列化

- Kotlin 集合支持序列化，这意味着它们可以被转换为字节流，以便存储或网络传输。

### 9. 集合的比较

- 集合可以通过 `==` 操作符进行比较，这会比较它们的元素是否相等。

### 10. 集合的迭代

- 集合可以通过 `for` 循环或迭代器进行迭代。

---

## 集合常用操作

在 Kotlin 中，集合提供了丰富的操作和方法来处理集合数据。以下是一些常用的集合操作方法：

### 1. 创建集合

- `listOf()`：创建不可变列表。
- `mutableListOf()`：创建可变列表。
- `setOf()`：创建不可变集合。
- `mutableSetOf()`：创建可变集合。
- `mapOf()`：创建不可变映射。
- `mutableMapOf()`：创建可变映射。

### 2. 遍历集合

- `for` 循环：使用 `for` 循环遍历集合中的每个元素。

### 3. 添加和删除元素

- `add()`：向集合中添加元素（仅适用于可变集合）。
- `remove()`：从集合中移除元素（仅适用于可变集合）。
- `clear()`：清空集合（仅适用于可变集合）。

### 4. 检查元素

- `contains()`：检查集合是否包含某个元素。
- `isEmpty()`：检查集合是否为空。
- `isNotEmpty()`：检查集合是否非空。

### 5. 获取集合信息

- `size`：获取集合的大小。
- `firstOrNull()`：获取集合中的第一个元素，如果集合为空则返回 `null`。
- `lastOrNull()`：获取集合中的最后一个元素，如果集合为空则返回 `null`。

### 6. 转换集合

- `map()`：将集合中的每个元素映射到另一个对象。
- `flatMap()`：将集合中的每个元素映射到一个集合，然后将所有集合合并成一个集合。
- `filter()`：根据条件过滤集合中的元素。
- `filterNot()`：根据条件过滤集合中的元素，返回不满足条件的元素。

### 7. 聚合操作

- `all()`：检查集合中的所有元素是否都满足某个条件。
- `any()`：检查集合中是否至少有一个元素满足某个条件。
- `none()`：检查集合中的所有元素是否都不满足某个条件。
- `count()`：计算满足条件的元素数量。
- `sum()`：计算集合中所有数字元素的总和。
- `average()`：计算集合中所有数字元素的平均值。

### 8. 集合的分组

- `groupBy()`：根据某个条件将集合中的元素分组。

### 9. 集合的排序

- `sorted()`：对集合进行排序。
- `sortedBy()`：根据某个属性对集合进行排序。
- `sortedDescending()`：对集合进行降序排序。

### 10. 集合的比较

- `union()`：返回两个集合的并集。
- `intersect()`：返回两个集合的交集。
- `subtract()`：返回两个集合的差集。

### 11. 集合的转换

- `toList()`：将集合转换为列表。
- `toSet()`：将集合转换为集合。
- `toMap()`：将集合转换为映射。

### 12. 集合的分片和窗口

- `slice()`：根据索引范围获取集合的一部分。
- `windowed()`：获取集合的滑动窗口视图。

### 13. 集合的关联

- `associateBy()`：根据集合中的元素创建一个新的映射。
- `associateWith()`：根据集合中的元素创建一个新的映射，每个元素都映射到相同的值。

---

## List常用API

在 Kotlin 中，`List` 是一个提供丰富操作的集合类，它继承自 `Collection` 接口。以下是一些常用的 `List` API：

1. **添加元素**
   - `add(element: E)`：向列表末尾添加一个元素。
   - `add(index: Int, element: E)`：在指定位置插入一个元素。

2. **移除元素**
   - `remove(element: E)`：移除列表中的一个元素。
   - `removeAt(index: Int)`：移除指定位置的元素。

3. **获取元素**
   - `get(index: Int)`：获取指定位置的元素。

4. **修改元素**
   - `set(index: Int, element: E)`：替换指定位置的元素。

5. **列表遍历**
   - `forEach(action: (E) -> Unit)`：对列表中的每个元素执行给定的操作。

6. **列表大小**
   - `size`：返回列表中的元素数量。

7. **判断操作**
   - `isEmpty()`：检查列表是否为空。
   - `isNotEmpty()`：检查列表是否非空。

8. **转换操作**
   - `map(transform: (E) -> R)`：将列表中的每个元素转换成另一种类型，返回一个新的列表。
   - `flatMap(transform: (E) -> Iterable<R>)`：将列表中的每个元素转换成一个可迭代对象，并将它们扁平化为一个新列表。

9. **过滤操作**
   - `filter(predicate: (E) -> Boolean)`：返回一个包含所有满足给定条件的元素的新列表。
   - `filterNot(predicate: (E) -> Boolean)`：返回一个包含所有不满足给定条件的元素的新列表。

10. **查找操作**
    - `find(predicate: (E) -> Boolean)`：返回列表中第一个满足给定条件的元素。
    - `findLast(predicate: (E) -> Boolean)`：返回列表中最后一个满足给定条件的元素。

11. **聚合操作**
    - `all(predicate: (E) -> Boolean)`：检查所有元素是否都满足给定条件。
    - `any(predicate: (E) -> Boolean)`：检查是否有元素满足给定条件。
    - `none(predicate: (E) -> Boolean)`：检查是否没有元素满足给定条件。
    - `count(predicate: (E) -> Boolean)`：返回满足给定条件的元素数量。

12. **排序操作**
    - `sort()`：将列表按自然顺序排序。
    - `sortBy(selector: (E) -> T)`：根据选择器函数选择的键对列表进行排序。
    - `sortedWith(comparator: Comparator<E>)`：根据给定的比较器对列表进行排序。

13. **子列表操作**
    - `subList(fromIndex: Int, toIndex: Int)`：返回列表的一部分视图。

14. **其他操作**
    - `joinToString(separator: CharSequence = ", ", prefix: CharSequence = "", postfix: CharSequence = "")`：将列表元素连接成一个字符串。
    - `sumOf(selector: (E) -> Int)`：返回列表中所有元素的总和。
    - `average()`：返回列表中所有数字的平均值。

---

## Map常用API

在 Kotlin 中，`Map` 是一个存储键值对的集合，它提供了丰富的 API 来管理和操作键值对。以下是一些常用的 `Map` API：

1. **创建 Map**
   - `mapOf(vararg pairs: Pair<K, V>)`：创建一个不可变的 Map。
   - `mutableMapOf(vararg pairs: Pair<K, V>)`：创建一个可变的 Map。

2. **添加和修改元素**
   - `put(key: K, value: V)`：向 Map 中添加或修改一个键值对。
   - `putAll(from: Map<out K, V>)`：将另一个 Map 的所有键值对添加到当前 Map 中。

3. **获取元素**
   - `get(key: K)`：根据键获取值。
   - `getOrElse(key: K, defaultValue: () -> V)`：根据键获取值，如果键不存在，则返回默认值。

4. **删除元素**
   - `remove(key: K)`：根据键删除键值对。

5. **检查元素**
   - `containsKey(key: K)`：检查 Map 是否包含指定的键。
   - `containsValue(value: V)`：检查 Map 是否包含指定的值。

6. **获取所有键和值**
   - `keys`：返回 Map 中所有键的集合。
   - `values`：返回 Map 中所有值的集合。

7. **Map 遍历**
   - `forEach(action: (key: K, value: V) -> Unit)`：对 Map 中的每个键值对执行给定的操作。

8. **转换 Map**
   - `mapValues(transform: (Map.Entry<K, V>) -> R)`：将 Map 中的每个值转换为新值，返回一个新的 Map。
   - `mapKeys(transform: (Map.Entry<K, V>) -> K)`：将 Map 中的每个键转换为新键，返回一个新的 Map。

9. **过滤 Map**
   - `filterKeys(predicate: (K) -> Boolean)`：根据键的过滤条件返回一个新的 Map。
   - `filterValues(predicate: (V) -> Boolean)`：根据值的过滤条件返回一个新的 Map。

10. **合并 Map**
    - `plus(other: Map<K, V>)`：将两个 Map 合并，如果有重复的键，则后面的 Map 中的值会被加入。
    - `plusAssign(pair: Pair<K, V>)`：将一个键值对添加到 Map 中。

11. **计算 Map**
    - `size`：返回 Map 中键值对的数量。
    - `isEmpty()`：检查 Map 是否为空。

12. **查找 Map**
    - `maxByOrNull(selector: (Map.Entry<K, V>) -> Comparable<*>)`：返回 Map 中具有最大键的条目。
    - `minByOrNull(selector: (Map.Entry<K, V>) -> Comparable<*>)`：返回 Map 中具有最小键的条目。

13. **转换为 List 或 Set**
    - `entries`：返回 Map 中所有键值对的集合。
    - `keys`：返回 Map 中所有键的集合。
    - `values`：返回 Map 中所有值的集合。

14. **创建关联数组**
    - `associateBy(keySelector: (T) -> K, valueSelector: (T) -> V)`：根据给定的选择器函数从集合中创建一个新的 Map。
    - `associateByTo(destination: MutableMap<K, V>, keySelector: (T) -> K, valueSelector: (T) -> V)`：将集合转换为 Map 并存储在指定的 Map 对象中。

15. **其他操作**
    - `keys`：返回 Map 的键集合。
    - `values`：返回 Map 的值集合。
    - `entries`：返回 Map 的键值对集合。
