# 字符串

## 常用API

Kotlin是一种现代的、类型安全的编程语言，它运行在Java虚拟机上，并且与Java完全兼容。Kotlin的`String`类提供了许多有用的API，使得字符串的操作变得更加简洁和富有表现力。以下是一些常用的Kotlin字符串API：

1. **长度获取**：

   ```kotlin
   val length = str.length
   ```

2. **获取特定索引的字符**：

   ```kotlin
   val char = str[0]
   ```

3. **字符串拼接**：

   ```kotlin
   val combined = str1 + str2
   ```

4. **字符串比较**：

   ```kotlin
   val isSame = str1 == str2
   ```

5. **查找子串**：

   ```kotlin
   val index = str.indexOf("sub")
   ```

6. **大小写转换**：

   ```kotlin
   val upper = str.uppercase()
   val lower = str.lowercase()
   ```

7. **字符串替换**：

   ```kotlin
   val replaced = str.replace("old", "new")
   ```

8. **字符串分割**：

   ```kotlin
   val parts = str.split(",") // 默认空白符分割
   val regexParts = str.split("-".toRegex())
   ```

   补充:

   ```kotlin
    val s:String = "1 2 3"
    s.split(" ", ignoreCase = false, limit = 2).forEach {// limit 可以限制生成的数组，ignoreCase忽略大小写
        println(it)
    }

    /*
    打印：
        1
        2 3   
    */
    ```

9. **字符串去除空白**：

   ```kotlin
   val trimmed = str.trim()
   val noLeading = str.trimStart()
   val noTrailing = str.trimEnd()
   ```

10. **字符串连接**：

    ```kotlin
    val joined = str1 + " " + str2
    // 或者使用joinToString
    val list = listOf("item1", "item2")
    val concatenated = list.joinToString(separator = ", ")
    ```

11. **字符串格式**：

    ```kotlin
    val formatted = "$variable"
    // 或者使用字符串模板
    val name = "Kotlin"
    val message = "Hello, $name!"
    ```

12. **检查字符串**：

    ```kotlin
    val isEmpty = str.isEmpty()
    val isNotEmpty = str.isNotEmpty()
    val isBlank = str.isBlank() // 检查字符串是否为空或只包含空白字符
    ```

13. **字符串子序列**：

    ```kotlin
    val sub = str.substring(startIndex, endIndex)
    ```

14. **字符串操作符**：

    ```kotlin
    val repeated = str.repeat(3) // 重复字符串
    val decapitalized = str.decapitalize() // 首字母小写
    val capitalizeFirst = str.capitalize() // 首字母大写
    ```

15. **字符串编码和解码**：

    ```kotlin
    val bytes = str.toByteArray(Charsets.UTF_8)
    val decoded = String(bytes, Charsets.UTF_8)
    ```

16. **正则表达式**：

    ```kotlin
    val regex = "a+".toRegex()
    val matchResult = regex.find(str)
    ```

17. **字符串过滤**：

    ```kotlin
    val filtered = str.filter { it.isDigit() }
    ```

18. **字符串映射**：

    ```kotlin
    val mapped = str.map { it.toUpperCase() }
    ```

19. **字符串转换为集合**：

    ```kotlin
    val chars = str.toCharArray()
    val list = str.toList()
    ```

20. **字符串反转**：

    ```kotlin
    val reversed = str.reversed()
    ```

Kotlin的字符串API提供了一种非常直观和富有表现力的方式来处理字符串，使得代码更加简洁和易于理解。这些API在Kotlin标准库中都有提供，并且与Java的字符串操作有着良好的互操作性。

---

## 按字母顺序比较大小

在Kotlin中，字符串的比较默认就是按照字典顺序（字母顺序）进行的。这意味着当你使用比较运算符（如 `==`、`!=`、`<`、`>` 等）比较两个字符串时，它们会按照字符的Unicode值进行比较。

以下是一些示例：

1. **字符串相等性比较**：

   ```kotlin
   val isEqual = str1 == str2
   ```

2. **字符串不等性比较**：

   ```kotlin
   val isNotEqual = str1 != str2
   ```

3. **字符串比较大小**：

   ```kotlin
   if (str1 > str2) {
       // str1 在字典顺序上大于 str2
   } else if (str1 < str2) {
       // str1 在字典顺序上小于 str2
   }
   ```

4. **使用 `compareTo` 方法**：
   Kotlin中的`String`类重写了`compareTo`方法，它按照字典顺序比较两个字符串。如果调用者（`this`）字符串在字典上大于参数字符串，则返回正数；如果等于，则返回0；如果小于，则返回负数。

   ```kotlin
   val comparisonResult = str1.compareTo(str2)
   if (comparisonResult > 0) {
       // str1 在字典顺序上大于 str2
   } else if (comparisonResult == 0) {
       // 两个字符串相等
   } else {
       // str1 在字典顺序上小于 str2
   }
   ```

5. **忽略大小写的比较**：
   如果你需要进行不区分大小写的比较，可以使用`equals`方法的忽略大小写版本`equalsIgnoreCase`：

   ```kotlin
   val isEqualToIgnoreCase = str1.equalsIgnoreCase(str2)
   ```

6. **自然顺序比较**：
   对于自然顺序的比较（例如，按照数字顺序比较包含数字的字符串），可以使用`naturalOrder`：

   ```kotlin
   val naturalOrder = str1.compareTo(str2, ignoreCase = true)
   ```

请注意，当字符串包含不同语言的字符时，比较的结果可能与预期不同，因为字典顺序可能受到语言环境的影响。在这种情况下，可能需要使用特定的排序规则或库来实现正确的比较。

### Kotlin 中的字符串比较和 Java 中有什么不同？

Kotlin 和 Java 在字符串比较方面有一些不同之处，这些差异主要体现在语法和一些默认行为上。以下是 Kotlin 和 Java 字符串比较的主要差异：

1. **语法简洁性**：
   - Kotlin：使用 `==` 进行字符串的相等性比较，这与 Java 中使用 `equals()` 方法相比，语法更加简洁。
   - Java：通常使用 `equals()` 方法来比较字符串的内容是否相等，例如 `str1.equals(str2)`。

2. **相等性比较**：
   - Kotlin：`==` 运算符会调用 `equals()` 方法来检查两个字符串是否相等。
   - Java：使用 `equals()` 方法来比较字符串内容的相等性，而 `==` 运算符检查的是引用是否相同。

3. **不等性比较**：
   - Kotlin：使用 `!=` 运算符来检查两个字符串是否不相等。
   - Java：使用 `!=` 运算符或 `!str1.equals(str2)` 来检查字符串是否不相等。

4. **空值安全**：
   - Kotlin：在进行字符串比较时，如果至少有一个字符串为 `null`，会使用 `?.equals` 来安全地调用 `equals` 方法，这避免了空指针异常。
   - Java：在比较前需要显式检查字符串是否为 `null`，以避免空指针异常。

5. **忽略大小写的比较**：
   - Kotlin：使用 `equalsIgnoreCase` 方法来比较两个字符串是否相等，不考虑大小写。
   - Java：同样使用 `equalsIgnoreCase` 方法来进行不区分大小写的比较。

6. **字典顺序比较**：
   - Kotlin：使用 `<` 和 `>` 运算符或 `compareTo` 方法来比较字符串的字典顺序。
   - Java：也使用 `<` 和 `>` 运算符或 `compareTo` 方法来进行字典顺序的比较。

7. **字符串拼接**：
   - Kotlin：可以使用加号 `+` 来拼接字符串，或者使用 `plusAssign` 方法。
   - Java：通常使用 `StringBuilder` 或 `StringBuffer` 来拼接字符串，或者使用加号 `+`。

8. **字符串模板**：
   - Kotlin：提供了字符串模板功能，允许直接在字符串中嵌入表达式，例如 `"$variable"`。
   - Java：在 Java 13 之前，需要使用 `String.format` 或其他方式来实现类似的功能。

9. **扩展函数**：
   - Kotlin：可以使用扩展函数来增加字符串的新功能，这些函数表现得像是字符串类的一部分。
   - Java：需要使用工具类或匿名内部类来实现类似的功能。

10. **API 差异**：
    - Kotlin：提供了一些 Java 中没有的字符串操作函数，如 `trim`、`takeIf`、`decapitalize` 等。
    - Java：提供了一些 Kotlin 中没有的字符串操作方法，如 `substring` 的重载版本。

尽管 Kotlin 和 Java 在字符串比较方面存在一些差异，但核心概念是相似的。Kotlin 的设计目标是提供更简洁和更安全的语法，同时保持与 Java 的互操作性。
