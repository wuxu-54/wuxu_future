# 函数

在 Kotlin 中，函数是执行特定任务的代码块，它们可以返回值或不返回值。Kotlin 提供了丰富的函数特性，使得函数的定义和使用非常灵活和强大。以下是 Kotlin 函数的一些关键点和详细说明：

## 函数定义

在 Kotlin 中，使用 `fun` 关键字来定义函数。

```kotlin
fun functionName(parameters): ReturnType {
    // 函数体
    return value // 对于返回类型非 Unit 的函数，返回值
}
```

## 函数参数

函数可以有零个或多个参数。参数类型需要在参数名之后指定。

```kotlin
fun greet(name: String, age: Int) {
    println("Hello, $name! You are $age years old.")
}
```

## 返回类型

函数可以指定返回类型，如果函数没有返回值，则使用 `Unit` 类型，它是 Kotlin 中的空类型，类似于 Java 中的 `void`。

```kotlin
fun sum(a: Int, b: Int): Int {
    return a + b
}
```

## 无返回值函数

如果函数不返回任何值，可以省略返回类型或指定为 `Unit`。

```kotlin
fun printSum(a: Int, b: Int): Unit {
    println(a + b)
}
```

## 可变参数

函数可以接收可变数量的参数，使用 `vararg` 关键字声明。

```kotlin
fun sum(vararg numbers: Int): Int {
    var total = 0
    for (number in numbers) {
        total += number
    }
    return total
}
```

## 默认参数值

函数参数可以有默认值，如果在调用函数时未提供参数值，则使用默认值。

```kotlin
fun createPerson(name: String, age: Int = 25) {
    println("$name is $age years old.")
}
```

## 命名参数

调用函数时，可以按名称指定参数值，这使得参数顺序变得不重要。

```kotlin
fun describe(obj: Any, prefix: String = "This is") {
    println("$prefix an object of type ${obj.javaClass.simpleName}")
}
```

## 内联函数

使用 `inline` 关键字定义内联函数，它们在编译时会被插入到调用它们的地方，有助于减少函数调用的开销。

```kotlin
inline fun repeatAction(times: Int, action: () -> Unit) {
    for (i in 1..times) {
        action()
    }
}
```

## 高阶函数

Kotlin 支持将函数作为参数传递给其他函数，或从其他函数返回函数。（其实就是函数类型）

```kotlin
fun higherOrderFunction(action: () -> Unit) {
    action()
}

fun main() {
    higherOrderFunction {
        println("Hello, Kotlin!")
    }
}
```

## 扩展函数

Kotlin 允许为现有类添加新函数，而不需要继承或修改原有类。

```kotlin
fun String.lastChar(): Char {
    return this.get(this.length - 1)
}

val result = "Hello".lastChar()
```

## 尾递归优化

Kotlin 支持尾递归，这是一种特殊的递归形式，编译器可以将其优化为循环，避免栈溢出。

```kotlin
tailrec fun findFixPoint(x: Double, epsilon: Double): Double {
    val next = 1.0 / (1.0 - x)
    if (abs(next - x) < epsilon) return next
    return findFixPoint(next, epsilon)
}
```

## 函数类型

Kotlin 中的函数可以有类型，例如 `(Int) -> Int` 表示接受一个 `Int` 参数并返回一个 `Int` 的函数类型。

```kotlin
val sum: (Int, Int) -> Int = { a, b -> a + b }
```

Kotlin 的函数特性使得它们非常灵活和强大，可以用于各种编程场景。通过这些特性，Kotlin 允许开发者写出更简洁、更可读的代码。
