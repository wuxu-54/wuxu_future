# 属性引用简介

在Kotlin编程语言中，属性引用（Property Reference）与属性访问（Property Access）是两项关键特性，它们在代码编写中发挥着至关重要的作用。

## 属性访问

属性访问，简而言之，就是获取或设置对象的属性值。在Kotlin中，你可以通过简单的点操作符（`.`）来访问对象的属性。例如：

```kotlin
val person = Person()
person.name = "Alice"  // 设置属性
val name = person.name  // 获取属性
```

在上述代码中，`person`是一个`Person`类型的对象，我们通过`.`操作符设置了它的`name`属性，并随后获取了该属性的值。

## 属性引用

属性引用，则是指向类或对象属性的引用。Kotlin提供了两种形式的属性引用：
>个人理解，获取属性对应的类型，类似JS中对象的key()操作。

1. **对实例属性的引用**：
   当你需要引用某个对象的属性时，可以使用`::`操作符。这种引用通常与高阶函数（接受函数作为参数或返回函数的函数）结合使用。例如：

   ```kotlin
   val person = Person()
   val nameReference: KProperty0<String> = person::name  // 引用person对象的name属性
   ```

   但请注意，直接这样引用实例属性并不常见，因为`KProperty0`等类型主要用于Kotlin的反射API。在大多数情况下，你更可能会将属性引用传递给如`byLazy`或某些自定义的委托（delegate）中。

2. **对类属性的引用**（针对伴生对象或静态属性）：
   对于类的静态属性（在Kotlin中通常是通过伴生对象定义的），你也可以使用`::`来引用它们。但请注意，由于Kotlin的伴生对象实际上是单例对象的一个实例，因此对其属性的引用会稍微复杂一些：

   ```kotlin
   class MyClass {
       companion object {
           @JvmStatic val staticProperty = "I'm static"
       }
   }

   val staticPropertyReference = MyClass::class.java.getDeclaredField("staticProperty")
       .get(MyClass.Companion) as String  // 这不是Kotlin惯用的方式，仅用于说明

   // 更Kotlin的方式是通过伴生对象的引用
   val companion = MyClass.Companion
   val moreKotlinWay = companion::class.java.getDeclaredField("staticProperty")
       .get(companion) as String  // 仍然不是最直接的方式，但展示了如何通过反射访问

   // 最直接的方式是直接访问，无需属性引用
   val directAccess = MyClass.staticProperty
   ```

   然而，在Kotlin中，通常你会直接访问伴生对象的属性，而不会去创建对其的属性引用，因为Kotlin的语法已经提供了简洁的直接访问方式。

在Kotlin的实践中，属性引用更多地与函数式编程和高阶函数结合使用，例如，在`map`、`filter`等集合操作函数中，你可以通过属性引用来指定要操作的属性。但在大多数情况下，直接访问属性或使用Kotlin提供的集合操作函数（如`let`、`apply`、`run`等）会更加常见和简洁。
