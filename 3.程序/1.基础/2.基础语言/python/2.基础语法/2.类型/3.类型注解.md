# 类型注解

Python 类型注解（Type Annotations）是一种用于指定变量、函数参数以及返回值类型的语法。它们在 Python 3.5 中引入，旨在帮助开发者指定期望的数据类型，从而提高代码的可读性和可维护性。类型注解不会对 Python 运行时的行为产生影响，因为 Python 是一种动态类型语言，但它们可以被第三方工具如类型检查器（例如 `mypy`）用来进行静态类型检查。
>简单理解：明确类型，达到像如Java等强类型语言效果。

## 基本语法

```python
def greet(name: str, age: int) -> str:
    return f"Hello, {name}! You are {age} years old."
```

在这个例子中：

- `name: str` 表示 `name` 参数应该是一个字符串。
- `age: int` 表示 `age` 参数应该是一个整数。
- `-> str` 表示这个函数应该返回一个字符串。

## 类型注解的使用

### 变量注解

```python
age: int = 25
name: str = "Alice"
```

### 函数注解

基本语法：

```python
def function_name(param1: Type1, param2: Type2) -> ReturnType:
    pass
```

- param1, param2, ...：函数的参数名称。
- Type1, Type2, ...：参数的注解类型。
- ReturnType：函数返回值的注解类型。

示例：

```python
def add_numbers(a: int, b: int) -> int:
    return a + b
```

### 类注解

```python
class BankAccount:
    balance: float

    def __init__(self, initial_balance: float):
        self.balance = initial_balance
```

### 使用 `typing` 模块

Python 的 `typing` 模块提供了更复杂的类型注解，如 `List`、`Dict`、`Optional`、`Union` 等。

```python
from typing import List, Dict, Union, Optional

# 列表注解
def process_items(items: List[str]) -> Dict[str, int]:
    result = {item: len(item) for item in items}
    return result

# 可选类型注解
def get_score(student: Dict[str, Union[str, float]], subject: str) -> Optional[float]:
    return student.get(subject)

# 可变参数注解
def make_greeting(*args: str, greeting: str = 'Hello') -> str:
    return f"{greeting} {' '.join(args)}"
```

## 类型注解的好处

1. **提高代码可读性**：类型注解提供了清晰的信息，表明了函数和变量应该具有的类型。
2. **静态类型检查**：可以使用 `mypy` 等工具在代码运行之前检查类型错误。
3. **IDE 支持**：现代 IDE 可以利用类型注解提供更好的自动完成、代码导航和错误检测。
4. **文档目的**：类型注解作为文档的一部分，有助于其他开发者或维护者理解代码的预期行为。

## 注意事项

- 类型注解不会强制类型检查，它们仅作为提示存在。
- 你可以为任何变量、参数或返回值添加注解。
- 可以使用 `typing` 模块中的类型来注解更复杂的数据结构。

类型注解是一种有用的工具，可以帮助你编写更清晰、更可维护的代码，尤其是在大型项目或团队协作中。虽然它们不改变 Python 的动态类型特性，但它们为代码的静态分析提供了基础。
