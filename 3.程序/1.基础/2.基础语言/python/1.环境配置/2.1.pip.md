
# pip

- python2是`pip`
- python3是`pip3`

## python3的pip3

以下是 **`pip3` 命令大全**，适用于 Python 3 的包管理。所有命令均可替换为 `python3 -m pip`（如 `pip3 install` → `python3 -m pip install`）。

### **一、基础命令**

#### 1. 安装包

```bash
pip3 install package_name                # 安装最新版本
pip3 install package_name==2.2.0         # 安装指定版本
pip3 install "package_name>=2.0"         # 安装最小版本
pip3 install --upgrade package_name      # 升级包
pip3 install -U package_name             # 同上（简写）
```

#### 2. 卸载包

```bash
pip3 uninstall package_name              # 卸载包
```

#### 3. 查看已安装的包

```bash
pip3 list                               # 列出所有包
pip3 list --outdated                    # 列出可升级的包
pip3 freeze                             # 列出所有包（格式化为 requirements.txt）
pip3 show package_name                  # 显示包的详细信息
```

#### 4. 搜索包

```bash
pip3 search package_name                # 在 PyPI 中搜索包
```

### **二、依赖管理**

#### 1. 从文件安装依赖

```bash
pip3 install -r requirements.txt        # 安装依赖文件中的所有包
pip3 install -r requirements.txt --no-deps  # 不安装依赖的依赖
```

#### 2. 生成依赖文件

```bash
pip3 freeze > requirements.txt          # 生成当前环境的依赖文件
pip3 list --format=freeze > requirements.txt  # 同上（显式指定格式）
```

### **三、高级安装选项**

#### 1. 指定安装位置

```bash
pip3 install --user package_name        # 安装到用户目录（非系统目录）
pip3 install --target=/path/to/dir package_name  # 安装到指定目录
```

#### 2. 加速下载（使用镜像源）

```bash
# 临时使用国内镜像
pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple package_name

# 永久配置镜像源
pip3 config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
```

#### 3. 离线安装

```bash
# 下载包到本地（包含依赖）
pip3 download -d ./packages -r requirements.txt

# 从本地安装
pip3 install --no-index --find-links=./packages package_name
```

### **四、环境与版本控制**

#### 1. 查看 pip3 版本和配置

```bash
pip3 --version                          # 查看 pip3 版本
pip3 config list                        # 查看 pip3 配置
```

#### 2. 升级 pip3 自身

```bash
pip3 install --upgrade pip              # 升级 pip3
python3 -m ensurepip --upgrade          # 强制升级 pip
```

#### 3. 检查依赖兼容性

```bash
pip3 check                              # 验证已安装包的依赖是否兼容
```

### **五、其他实用命令**

#### 1. 创建 wheel 包（用于离线分发）

```bash
pip3 wheel package_name                 # 创建 wheel 包到当前目录
```

#### 2. 显示历史命令

```bash
pip3 history                            # 显示 pip3 历史操作
```

#### 3. 忽略已安装的包，强制重新安装

```bash
pip3 install --force-reinstall package_name
```

#### 4. 只安装依赖，不安装主包

```bash
pip3 install --no-deps package_name     # 不安装依赖
```

### **六、示例场景**

#### 1. 升级所有可升级的包

```bash
pip3 list --outdated --format=freeze | grep -v '^\-e' | cut -d = -f 1  | xargs -n1 pip3 install -U
```

#### 2. 为特定 Python 版本安装包

```bash
python3.9 -m pip install package_name   # 仅安装到 Python 3.9 环境
```

#### 3. 验证安装结果

```bash
pip3 show package_name                  # 查看包信息
pip3 list | grep package_name           # 检查是否已安装
```

### **七、注意事项**

1. **权限问题**：  
   - 避免使用 `sudo pip3`（可能污染系统环境），优先使用 `--user` 或虚拟环境。
   - 使用虚拟环境（如 `venv`、`virtualenv`）隔离项目依赖。

2. **镜像源选择**：  
   - 国内常用镜像：清华、阿里云、豆瓣等。
   - 示例：`https://mirrors.aliyun.com/pypi/simple/`

3. **故障排除**：  

   ```bash
   pip3 cache purge                      # 清除 pip3 缓存
   pip3 install --no-cache-dir package_name  # 不使用缓存安装
   ```

如果需要更详细的帮助，可以运行 `pip3 --help` 或 `pip3 <command> --help`。

---

## python2的pip

`pip` 是 Python2 的包管理工具，以下是常用的 `pip` 命令及示例：

### **1. 安装包**

```bash
pip install package_name          # 安装最新版本
pip install package_name==2.2.0   # 安装指定版本
pip install "package_name>=2.0"   # 安装最小版本
pip install -U package_name       # 升级包
```

### **2. 卸载包**

```bash
pip uninstall package_name        # 卸载包
```

### **3. 查看已安装的包**

```bash
pip list                          # 列出所有包
pip freeze                        # 列出所有包（格式化为 requirements.txt）
pip show package_name             # 显示包的详细信息
```

### **4. 搜索包**

```bash
pip search package_name           # 在 PyPI 中搜索包
```

### **5. 依赖管理**

```bash
pip install -r requirements.txt   # 安装依赖文件中的所有包
pip freeze > requirements.txt     # 生成依赖文件
```

### **6. 环境相关**

```bash
pip install --user package_name   # 安装到用户目录（非系统目录）
pip install --upgrade pip         # 升级 pip 自身
```

### **7. 其他实用命令**

```bash
pip check                         # 验证依赖是否兼容
pip wheel package_name            # 创建 wheel 包（离线安装用）
pip install --no-deps package     # 安装时不安装依赖
```

### **高级用法**

```bash
# 指定镜像源（加速国内下载）
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple package_name

# 从 GitHub 安装
pip install git+https://github.com/user/repo.git

# 查看历史命令
pip history
```

### **示例场景**

1. **升级所有包**（需配合第三方工具）：

   ```bash
   pip list --outdated | cut -d " " -f 1 | xargs -n1 pip install -U
   ```

2. **创建项目依赖文件**：

   ```bash
   pip freeze > requirements.txt
   ```

3. **离线安装包**：

   ```bash
   # 下载包到本地
   pip download -d ./packages -r requirements.txt
   # 从本地安装
   pip install --no-index --find-links=./packages -r requirements.txt
   ```

### **注意事项**

- 使用 `sudo` 前缀在系统环境中安装包（不推荐，建议使用虚拟环境）。
- 使用 `venv` 或 `virtualenv` 创建隔离的 Python 环境。
- 遇到权限问题时，尝试 `--user` 选项或使用管理员权限。

如果需要更详细的帮助，可以运行 `pip --help` 或 `pip <command> --help`。
