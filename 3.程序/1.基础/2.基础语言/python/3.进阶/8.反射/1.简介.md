# 反射简介

在 Python 中，反射是一种允许程序在运行时检查和修改其自身的结构和行为的能力。它包括获取类型信息、获取对象信息、调用对象方法等。Python 提供了多种机制来实现反射，主要包括内置函数和 `inspect` 模块。

## 基本概念

- **获取类型信息**：使用 `type()` 函数可以获取对象的类型。
- **获取对象信息**：使用 `dir()` 函数可以列出对象的属性和方法。
- **调用对象方法**：使用 `getattr()` 函数可以根据字符串名称获取对象的方法并调用。

## 内置函数

- `hasattr(object, name)`：检查对象是否有名为 `name` 的属性或方法。
- `getattr(object, name)`：获取对象名为 `name` 的属性或方法。
- `setattr(object, name, value)`：设置对象名为 `name` 的属性的值为 `value`。
- `delattr(object, name)`：删除对象名为 `name` 的属性。

## `inspect` 模块

Python 的 `inspect` 模块提供了更多的反射功能，例如获取源码、堆栈跟踪等。

## 动态导入

Python 支持动态导入模块，`importlib` 模块提供了动态导入的功能。使用 `importlib.import_module(name)` 可以导入名为 `name` 的模块。

## 使用场景

反射在 Python 中有多种应用场景，例如：

- 动态调用对象的方法。
- 动态导入模块和包。
- 实现依赖注入。
- 创建灵活的框架和库。

## 示例

以下是一个简单的反射示例，展示了如何使用内置函数进行反射操作：

```python
class Person:
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def greet(self):
        print(f"Hello, my name is {self.name} and I am {self.age} years old.")

person = Person("John", 30)
print(hasattr(person, 'name'))  # True
print(getattr(person, 'name', 'No Name'))  # John
setattr(person, 'age', 31)
person.greet()  # Hello, my name is John and I am 31 years old.
delattr(person, 'name')
print(hasattr(person, 'name'))  # False
```

在这个示例中，我们使用 `hasattr` 检查属性是否存在，使用 `getattr` 获取属性值，使用 `setattr` 设置属性值，以及使用 `delattr` 删除属性。

反射是 Python 动态性的一个重要体现，它为编写灵活和可扩展的代码提供了强大的工具。
