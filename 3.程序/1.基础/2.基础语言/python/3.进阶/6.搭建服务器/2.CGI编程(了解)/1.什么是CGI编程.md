# 什么是CGI

CGI(Common Gateway Interface),通用网关接口，**一段运行在服务器上的程序**。通过CGI，web服务器可以调用外部脚本，这些程序可以生成动态响应，通常用于处理 Web 表单提交、执行数据库查询、生成动态页面等。
>通俗讲，就是服务器程序，可以处理get、post请求，返回处理后的数据、动态html页面等。

CGI文件的扩展名为`.cgi`，python也可以使用`.py`扩展名。

>建议[菜鸟教程-CGI](https://www.runoob.com/python3/python3-cgi-programming.html)

## CGI 的主要特点

- 动态内容生成：CGI 允许服务器执行程序来动态生成 HTML 页面或其他响应内容。
- 标准化：CGI 是一种广泛支持的标准，几乎所有的 Web 服务器都支持 CGI。
- 语言无关性：CGI 可以使用任何编程语言编写，只要它可以输出标准的 HTTP 响应。
- 表单处理：CGI 脚本常用于处理 HTML 表单提交的数据。
- 数据库交互：CGI 脚本可以与数据库交互，用于数据检索和更新。

## CGI 脚本的工作流程

- 用户在 Web 浏览器中输入 URL 或提交表单。
- Web 服务器接收到请求，并识别出这是一个 CGI 请求。
- Web 服务器执行 CGI 脚本，并将请求的参数（如查询字符串或表单数据）传递给脚本。
- CGI 脚本处理请求，生成响应内容（通常是 HTML 页面）。
- CGI 脚本将响应发送回 Web 服务器。
- Web 服务器将响应发送给用户的浏览器。

## 简单示例

```python
#!/usr/bin/env python3
import os
import sys

# 获取环境变量中的查询字符串
query_string = os.environ.get('QUERY_STRING', '')

# 输出 HTTP 头部
print('Content-Type: text/html\n')

# 输出 HTML 内容
print('<html>')
print('<head><title>CGI Example</title></head>')
print('<body>')
print('<h1>Query String:</h1>')
print(f'<p>{query_string}</p>')
print('</body>')
print('</html>')
```
