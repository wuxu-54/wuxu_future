# 条件控制

Objective-C中，条件控制语句用于基于特定条件执行不同的代码分支，主要包括以下几种：

1. **if 语句**：
   - 用于在满足特定条件时执行一段代码。

   ```objc
   if (condition) {
       // 条件为真时执行的代码
   }
   ```

2. **if-else 语句**：
   - 当条件不满足时，提供另一种执行路径。

   ```objc
   if (condition) {
       // 条件为真时执行的代码
   } else {
       // 条件为假时执行的代码
   }
   ```

3. **if-else if-else 语句**：
   - 用于多个条件的分支选择。

   ```objc
   if (condition1) {
       // 条件1为真时执行的代码
   } else if (condition2) {
       // 条件2为真时执行的代码
   } else {
       // 所有条件都不为真时执行的代码
   }
   ```

4. **switch 语句**：
   - 用于基于不同的情况执行不同的代码块。与C语言不同，Objective-C的`switch`语句可以匹配许多不同的数据类型。

   ```objc
   switch (value) {
       case constant1:
           // 当value等于constant1时执行的代码
           break;
       case constant2:
           // 当value等于constant2时执行的代码
           break;
       default:
           // 如果没有匹配的case，执行的代码
   }
   ```

5. **三元运算符**：
   - 一个简洁的条件表达式，用于基于条件选择两个值中的一个。

   ```objc
   result = (condition) ? valueIfTrue : valueIfFalse;
   ```

6. **逻辑运算符**：
   - 用于组合多个条件表达式。
   - `&&`：逻辑与
   - `||`：逻辑或
   - `!`：逻辑非

   ```objc
   if (condition1 && condition2) {
       // 两个条件都为真时执行的代码
   }
   ```

7. **条件运算符**：
   - 用于基于条件执行赋值操作。

   ```objc
   value = (condition) ? expression1 : expression2;
   ```

8. **守卫语句（Guard Statements）**：
   - 虽然不是传统意义上的条件控制语句，但`NSAssert`和`NSCAssert`宏用于在调试时检查条件是否满足。（其实就是assert检查）

   ```objc
   NSAssert(condition, @"Message when condition fails");
   ```

Objective-C的条件控制语句在语法上与C语言类似，但Objective-C提供了更丰富的数据类型和对象，使得条件控制更加灵活和强大。使用条件控制语句时，应确保条件表达式清晰、准确，以避免潜在的逻辑错误。

---

在Objective-C中，守卫语句（Guard Statements）主要用于调试目的，确保程序在开发过程中满足某些条件。如果条件不满足，程序将中断执行，并提供错误信息。以下是Objective-C中守卫语句的两种主要形式：

1. **NSAssert**：
   - `NSAssert`是Foundation框架中的一个宏，用于在开发过程中检查条件是否为真。如果条件为假，则程序将抛出断言失败的异常，并显示错误信息。

   ```objc
   BOOL condition = NO;
   NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
   NSAutoreleasePool *subpool = [[NSAutoreleasePool alloc] init];

   NSAutorelease(subpool); // 减少内存使用

   NSAutAssert(condition, @"Condition is false");

   [pool release];
   ```

2. **NSCAssert**：
   - `NSCAssert`与`NSAssert`类似，但它用于非交互式环境（如命令行工具或后台服务）。即使在发布版本中，`NSCAssert`也会检查条件。

   ```objc
   void function() {
       int value = 0;
       NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
       NSCAssert(value != 0, @"Value should not be zero");
       [pool release];
   }
   ```

## 使用守卫语句的最佳实践

- **调试辅助**：守卫语句主要用于调试，确保代码的正确性。在发布版本中，可以通过预处理器指令`NDEBUG`来禁用`NSAssert`的检查，以避免性能损失。

- **条件表达式**：守卫语句中的条件表达式应该是简单的，不涉及复杂的计算或副作用。

- **错误信息**：在`NSAssert`和`NSCAssert`的第二个参数中提供明确的错误信息，这有助于快速定位问题。

- **线程安全**：由于`NSAssert`和`NSCAssert`可能在多线程环境中触发，确保它们使用的变量和资源是线程安全的。

- **替代方案**：在某些情况下，可以使用异常处理或返回错误码来代替守卫语句，特别是在可能影响程序正常运行的情况下。

守卫语句是Objective-C中确保程序稳定性和可靠性的重要工具。正确使用守卫语句可以帮助开发者在开发过程中及早发现和解决问题。
