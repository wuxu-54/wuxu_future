# 字符串

在Objective-C中，字符串处理是编程中的一个重要方面。Objective-C提供了几种不同的方式处理字符串：

## 1. NSString类

`NSString`是Objective-C中用于表示不可变字符串的类。由于它是不可变的，任何修改操作都会返回一个新的字符串实例。

- **创建NSString实例**：

  ```objc
  NSString *str = @"Hello, World!";
  NSString *anotherStr = [NSString stringWithString:@"Hello, again!"];
  ```

- **连接字符串**：

  ```objc
  NSString *concatenatedString = [str stringByAppendingString:@" And welcome back!"];
  ```

- **比较字符串**：

  ```objc
  BOOL areEqual = [str isEqualToString:@"Hello, World!"];
  ```

- **检索和替换**：

  ```objc
  NSString *replacedString = [str stringByReplacingOccurrencesOfString:@"World" withString:@"Everyone"];
  ```

- **长度和子字符串**：

  ```objc
  NSUInteger length = [str length];
  NSString *substring = [str substringWithRange:NSMakeRange(7, 5)]; // "World"
  ```

## 2. NSMutableString类

`NSMutableString`是Objective-C中用于表示可变字符串的类。与`NSString`不同，`NSMutableString`允许对字符串进行修改。

- **修改字符串**：

  ```objc
  NSMutableString *mutableStr = [str mutableCopy];
  [mutableStr appendString:@" And welcome back!"];
  [mutableStr replaceCharactersInRange:NSMakeRange(7, 5) withString:@"Everyone"];
  ```

## 3. 字面量创建字符串

在Objective-C中，可以使用双引号`""`来创建字符串字面量，这实际上会创建一个`NSString`实例。

## 4. 字符串的编码

字符串可以有不同的编码方式，如UTF-8、UTF-16等。`NSString`默认使用UTF-16编码。

- **转换编码**：

  ```objc
  NSString *utf8String = [str stringByEncoding:NSUTF8StringEncoding];
  ```

## 5. 字符串和C字符串

Objective-C的`NSString`可以与C语言的字符数组相互转换。

- **从C字符串创建NSString**：

  ```objc
  const char *cString = "Hello, World!";
  NSString *nsString = [NSString stringWithUTF8String:cString];
  ```

- **获取C字符串**：

  ```objc
  const char *cString = [nsString UTF8String];
  ```

## 6. 字符串的查找和分割

可以使用`rangeOfString:`方法查找子字符串，使用`componentsSeparatedByString:`方法分割字符串。

## 7. 字符串的本地化

`NSString`支持本地化，可以根据不同地区的语言习惯显示字符串。

## 示例代码

```objc
#import <Foundation/Foundation.h>

int main() {
    NSString *greeting = @"Hello, World!";
    NSString *welcome = [NSString stringWithFormat:@"Welcome to %@", greeting];

    NSMutableString *mutableGreeting = [greeting mutableCopy];
    [mutableGreeting appendString:@" How are you doing?"];

    NSString *reversed = [[mutableGreeting reverseObject] autorelease];

    NSLog(@"Greeting: %@", greeting);
    NSLog(@"Welcome: %@", welcome);
    NSLog(@"Mutable Greeting: %@", mutableGreeting);
    NSLog(@"Reversed: %@", reversed);

    return 0;
}
```

在Objective-C中，字符串是不可变的，任何修改操作都会返回一个新的字符串实例。如果需要修改字符串，可以使用`NSMutableString`类。字符串处理是Objective-C编程中的基础，掌握字符串的各种操作对于开发iOS和macOS应用非常重要。

---

## 字符串API

Objective-C中的字符串处理主要通过`NSString`类进行，它提供了一系列丰富的API来操作字符串。以下是一些常用的`NSString` API：

### 基础创建和初始化

- `+ (instancetype)stringWithCharacters:(const unichar *)chars length:(NSUInteger)length;`
  - 从字符数组和长度创建字符串。

- `+ (instancetype)stringWithString:(NSString *)string;`
  - 从一个已有的字符串创建一个新的字符串实例。

- `+ (instancetype)string;`
  - 创建一个空字符串。

### 文本拼接

- `+ (instancetype)stringWithFormat:(NSString *)format, ...;`
  - 使用格式化字符串创建新的字符串。

- `- (NSString *)stringByAppendingString:(NSString *)aString;`
  - 将一个字符串追加到当前字符串末尾。

### 比较字符串

- `- (BOOL)isEqualToString:(NSString *)aString;`
  - 比较两个字符串是否相等。

- `- (NSComparisonResult)compare:(NSString *)string;`
  - 比较当前字符串和另一个字符串。

- `- (BOOL)hasPrefix:(NSString *)aString;`
  - 检查字符串是否以指定的前缀开头。

- `- (BOOL)hasSuffix:(NSString *)aString;`
  - 检查字符串是否以指定的后缀结束。

### 字符串大小写转换

- `- (NSString *)uppercaseString;`
  - 将字符串转换为大写。

- `- (NSString *)lowercaseString;`
  - 将字符串转换为小写。

- `- (NSString *)capitalizedString;`
  - 将字符串的首字母转换为大写。

### 字符串截取和子串

- `- (NSString *)substringWithRange:(NSRange)range;`
  - 根据指定范围截取子串。

### 查找和替换

- `- (NSRange)rangeOfString:(NSString *)searchString;`
  - 查找子字符串的位置。

- `- (NSString *)stringByReplacingOccurrencesOfString:(NSString *)target withString:(NSString *)replacement;`
  - 替换字符串中所有匹配的子串。

### 字符串长度和范围

- `- (NSUInteger)length;`
  - 获取字符串的长度。

- `- (NSRange)rangeOfCharacterFromSet:(NSCharacterSet *)searchSet;`
  - 查找字符集中的字符范围。

### 字符串编码

- `- (NSData *)dataUsingEncoding:(NSStringEncoding)encoding;`
  - 将字符串编码为指定的格式。

### 字符串本地化

- `- (NSString *)localizedString;`
  - 获取字符串的本地化版本。

### 字符串路径操作

- `- (NSString *)stringByAppendingPathExtension:(NSString *)ext;`
  - 为字符串添加文件扩展名。

### 字符串API示例代码

```objc
NSString *originalString = @"Hello, World!";
NSString *newString = [originalString stringByAppendingString:@" This is Objective-C"];

NSString *lowercased = [originalString lowercaseString];
NSString *uppercased = [originalString uppercaseString];

NSRange range = [originalString rangeOfString:@"World"];
NSString *substring = [originalString substringWithRange:NSMakeRange(7, 5)];

NSString *replaced = [originalString stringByReplacingOccurrencesOfString:@"World" withString:@"Everyone"];

NSString *localized = ["Hello" localizedString];
```

`NSString`类提供了非常全面的API来处理字符串的各种操作，包括创建、拼接、比较、转换、查找、替换、编码等。掌握这些API对于在Objective-C中进行字符串操作至关重要。
