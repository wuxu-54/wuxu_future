# ARC与MRR区别

Objective-C 中的内存管理主要有两种方式：手动引用计数（Manual Retain-Release，简称 MRR）和自动引用计数（Automatic Reference Counting，简称 ARC）。以下是 MRR 和 ARC 的详解以及它们之间的区别：

## MRR（Manual Retain-Release）

MRR 是 Objective-C 早期使用的内存管理方式。在 MRR 中，开发者需要手动控制对象的生命周期，通过调用对象的 `retain` 和 `release` 方法来增加或减少对象的引用计数。当引用计数降到零时，对象会被自动销毁，内存被回收。此外，`autorelease` 方法可以将对象放入自动释放池，在自动释放池被清空时，对象的引用计数会减少。MRR 要求开发者严格遵守内存管理规则，以避免内存泄漏或野指针问题 。

## ARC（Automatic Reference Counting）

ARC 是在 iOS 5 和 OS X Lion 之后引入的内存管理方式。它通过编译器在编译时自动插入 `retain`、`release` 和 `autorelease` 调用，从而简化了内存管理。开发者不再需要手动编写这些内存管理代码，减少了内存泄漏的风险。ARC 仅适用于 Objective-C 对象和 block，不适用于 C 语言数据类型或 Core Foundation 对象 。

## MRR 和 ARC 的区别

1. **内存管理方式**：MRR 需要手动管理内存，而 ARC 自动管理内存。
2. **性能**：MRR 可能因为不当的内存管理导致性能问题，ARC 通过自动内存管理减少了这些风险。
3. **代码复杂度**：MRR 需要编写更多的内存管理代码，增加了代码的复杂度；ARC 减少了代码量，简化了开发。
4. **适用性**：ARC 适用于大多数 Objective-C 对象和 block，但不支持 C 语言数据类型和 Core Foundation 对象。MRR 适用于所有类型的对象。
5. **循环引用处理**：在 MRR 中，需要手动处理循环引用问题；而在 ARC 中，虽然循环引用问题减少，但仍需开发者注意处理。

总的来说，ARC 提供了一种更简单、更安全的方式来管理 Objective-C 对象的内存，而 MRR 则提供了更多的控制，但需要严格遵守内存管理规则。在实际开发中，推荐使用 ARC，以减少内存管理错误和提高开发效率 。
