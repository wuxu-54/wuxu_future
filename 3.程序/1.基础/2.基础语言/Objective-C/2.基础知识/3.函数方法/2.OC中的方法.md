# OC中的方法

在Objective-C中，方法（Methods）是类或对象的行为和功能的一部分。方法可以被认为是与对象或类相关联的函数。以下是Objective-C中方法的一些关键概念：

1. **实例方法**：
   - 实例方法是与特定类实例相关联的方法。它们使用`-`符号定义，并在对象上调用。

   ```objc
   @interface MyClass : NSObject
   - (void)instanceMethod;
   @end

   @implementation MyClass
   - (void)instanceMethod {
       // 方法实现
   }
   @end
   ```

2. **类方法**：
   - 类方法是与类本身相关联的方法，而不是类的任何特定实例。它们使用`+`符号定义，并在类上调用。

   ```objc
   + (void)classMethod {
       // 类方法实现
   }
   ```

3. **方法签名**：
   - 方法签名包括方法的返回类型、方法名、参数的数量、类型和名称。

   ```objc
   - (NSString *)methodNameWithParam:(NSString *)param;
   ```

4. **方法调用**：

   实例方法：

      ```objc
      // Person.h
      @interface Person : NSObject
      - (void)sayHelloWithName:(NSString *)name;
      @end

      // Person.m
      @implementation Person
      - (void)sayHelloWithName:(NSString *)name {
         NSLog(@"Hello, %@", name);
      }

       - (void)sayHelloWithName2:(NSString *)name age1:(NSNumber *)age{ // 声明多个参数
         NSLog(@"Hello, %@", name);
      }
      @end

      // 调用方法
      #import "Person.h"

      int main(int argc, const char * argv[]) {
         @autoreleasepool {
            Person *person = [[Person alloc] init];
            [person sayHelloWithName:@"John"]; // 输出 "Hello, John"
            [person sayHelloWithName:@"John",age1:10]; // 调用多个参数
         }
         return 0;
      }
      ```
  
   类方法：

      ```objc
         // Person.h
      @interface Person : NSObject
      + (void)classGreeting:(NSString *)greeting;
      @end

      // Person.m
      @implementation Person
      + (void)classGreeting:(NSString *)greeting {
         NSLog(@"%@", greeting);
      }
      @end

      // 调用方法
      #import "Person.h"

      int main(int argc, const char * argv[]) {
         @autoreleasepool {
            [Person classGreeting:@"Hello, everyone!"]; // 输出 "Hello, everyone!"
         }
         return 0;
      }
      ```

   带参数的init：

      ```objc
      // Person.h
      @interface Person : NSObject
      @property (nonatomic, strong) NSString *name;
      - (instancetype)initWithName:(NSString *)name;
      @end

      // Person.m
      @implementation Person
      - (instancetype)initWithName:(NSString *)name {
         self = [super init];
         if (self) {
            _name = name;
         }
         return self;
      }
      @end

      // 调用初始化方法
      #import "Person.h"

      int main(int argc, const char * argv[]) {
         @autoreleasepool {
            Person *person = [[Person alloc] initWithName:@"John"];
            NSLog(@"Person's name is: %@", person.name); // 输出 "Person's name is: John"
         }
         return 0;
      }
      ```

5. **参数和返回值**：
   - 方法可以接收参数，并可以返回一个值。

6. **返回类型**：
   - 方法的返回类型定义了方法执行完成后将返回的数据类型。

7. **参数类型和名称**：
   - 方法的参数类型和名称在方法签名中定义。

8. **内存管理**：
   - 在Objective-C中，方法的实现需要考虑内存管理，特别是当方法返回对象时。

9. **可变参数**：
   - Objective-C支持可变参数列表，使用`va_list`等宏来处理。

10. **Block作为参数**：
    - 方法可以将Block（匿名函数）作为参数，以实现回调机制。

11. **属性和方法**：
    - 属性是类的一部分，可以有`getter`和`setter`方法。方法可以操作这些属性。

12. **继承和方法**：
    - 子类可以继承父类的方法，并根据需要重写它们。

13. **消息转发**：
    - 如果一个对象不能响应某个消息（方法调用），Objective-C提供了消息转发机制。

14. **方法的访问控制**：
    - 方法可以有访问控制修饰符（C中有，OC不直接支持，具体可看[封装](../5.面向对象/7.封装.md)），如`private`、`protected`和`public`。

15. **方法的动态性**：
    - Objective-C的方法可以动态添加或修改，利用运行时特性如`method_exchangeImplementations`。

Objective-C的方法是面向对象编程的基础，它们定义了对象的行为。通过理解方法的声明、调用和实现，你可以更有效地使用Objective-C编写程序。
