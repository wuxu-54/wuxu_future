# JSX补充

## JSX结果类型

1. JSX表达式结果的类型为`any`
2. 可以通过`JSX.Element`接口，自定义结果类型。（注意，这种方式，是黑盒，编译器无法检查元素、属性、子元素信息）

## 嵌入表达式

JSX允许你使用`{ }`标签来内嵌表达式。

```typescript
var a = <div>
    {[3, 4].map(i => <span>{i / 2}</span>)}//{} 中是表达式
</div>
```

## JSX配置工厂函数

工厂函数，用于批量生产对象。是一种设计思想。

这里主要说，JSX可以配置工厂函数，用于创建元素等操作，一种语法糖。

可以有两种方式：

1. 使用`jsxFactory`命令行选项
2. 内联的`@jsx注释指令`在每个文件上设置

    注释指令可以像下面这样使用（在TypeScript 2.8里）：

    ```typescript
    import preact = require("preact");
    /* @jsx preact.h */
    const x = <div />;
    ```

    编译后生成：

    ```typescript
    const preact = require("preact");
    const x = preact.h("div", null);
    ```

注意：

1. 工厂函数的选择同样会影响`JSX命名空间`的查找（类型检查）。
2. 如果工厂函数使用`React.createElement`定义（默认），编译器会先检查`React.JSX`，之后才检查全局的JSX。
3. 如果工厂函数定义为`h`，那么在检查全局的JSX之前先检查`h.JSX`。
