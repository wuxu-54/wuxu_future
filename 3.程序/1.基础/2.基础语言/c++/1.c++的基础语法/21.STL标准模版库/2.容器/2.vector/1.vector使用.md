# std::vector使用

`std::vector` 是 C++ 标准模板库（STL）中的一个动态数组容器，能够根据需要自动调整其大小。它在 C++ 编程中非常常用，下面将详细介绍 `std::vector` 的使用方法及其特性。

## 基本用法

### 引入头文件

要使用 `std::vector`，你需要包含 `<vector>` 头文件：

```cpp
#include <vector>
```

### 声明和初始化

你可以声明一个 `std::vector`，并通过多种方式初始化它：

```cpp
#include <vector>
#include <iostream>

int main() {
    // 声明一个 int 类型的 vector
    std::vector<int> vec;

    // 使用列表初始化
    std::vector<int> vec_init = {1, 2, 3, 4, 5};

    // 使用指定大小和默认值初始化
    std::vector<int> vec_size(10, 0); // 10 个元素，每个元素的值是 0

    // 输出初始化后的 vector
    for (int val : vec_init) {
        std::cout << val << " ";
    }
    std::cout << std::endl;

    return 0;
}
```

## 成员函数和常用操作

### 添加元素

1. **使用 `push_back` 添加元素**

    ```cpp
    std::vector<int> vec;
    vec.push_back(1);
    vec.push_back(2);
    ```

2. **使用 `emplace_back` 添加元素**（适用于构造较复杂的对象时，减少临时对象的创建）

    ```cpp
    std::vector<std::pair<int, int>> vec;
    vec.emplace_back(1, 2); // 直接在容器中构造 pair 对象
    ```

### 访问元素

1. **使用下标访问**

    ```cpp
    int first_element = vec[0];
    ```

    注意：使用下标访问时要确保索引不越界，否则会引发未定义行为。

2. **使用 `at` 访问**

    ```cpp
    int first_element = vec.at(0); // 若索引越界，会抛出 std::out_of_range 异常
    ```

### 删除元素

1. **使用 `pop_back` 删除最后一个元素**

    ```cpp
    vec.pop_back();
    ```

2. **使用 `erase` 删除指定位置的元素或一段元素**

    ```cpp
    vec.erase(vec.begin()); // 删除第一个元素
    vec.erase(vec.begin(), vec.begin() + 3); // 删除前三个元素
    ```

### 修改元素

直接通过下标或迭代器修改元素：

```cpp
vec[0] = 10;
*(vec.begin() + 1) = 20;
```

### 获取大小

1. **使用 `size` 获取当前元素个数**

    ```cpp
    std::size_t num_elements = vec.size();
    ```

2. **使用 `capacity` 获取当前分配的空间大小**

    ```cpp
    std::size_t current_capacity = vec.capacity();
    ```

3. **使用 `empty` 检查是否为空**

    ```cpp
    bool is_empty = vec.empty();
    ```

### 迭代器

`std::vector` 提供了迭代器，可以用于遍历元素：

```cpp
for (std::vector<int>::iterator it = vec.begin(); it != vec.end(); ++it) {
    std::cout << *it << " ";
}
std::cout << std::endl;

// 使用范围 for 循环
for (int val : vec) {
    std::cout << val << " ";
}
std::cout << std::endl;
```

### 清空容器

使用 `clear` 清空所有元素，但保留容量：

```cpp
vec.clear();
```

### 预留空间

使用 `reserve` 预留足够的空间以提高性能：

```cpp
vec.reserve(100); // 预留 100 个元素的空间
```

## 注意事项

1. **内存分配**：`std::vector` 在元素数量超过当前容量时会重新分配内存，通常是当前容量的两倍。频繁的动态内存分配可能会影响性能。
2. **迭代器失效**：在插入或删除元素后，指向这些元素的迭代器可能会失效。特别地，`push_back`、`insert` 等操作在重新分配内存时会使所有迭代器失效。
3. **异常安全性**：`std::vector` 的大部分操作在抛出异常时不会泄漏内存。

通过以上内容，你应该能够熟练掌握 `std::vector` 的基本用法及其常用操作。在实际编程中，合理使用 `std::vector` 可以极大地方便动态数组的管理。
