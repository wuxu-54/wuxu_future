# map 使用

在C++中，`std::map` 是一个关联容器，它存储的是键值对（key-value pairs），其中每个键（key）都是唯一的，并且与一个值（value）相关联。`std::map` 按照键的排序顺序存储元素，默认情况下，键是按照小于（`<`）运算符进行排序的，这意味着您可以使用任何可以作为键的类型，只要该类型支持 `<` 运算符或者您提供了自定义的比较函数。

`std::map` 提供了一系列成员函数来插入、删除、查找和遍历元素。以下是一些常用的成员函数和操作：

1. **插入元素**：
   - `insert`：插入一个键值对。如果键已经存在，则不会插入新元素。
   - `emplace`：与 `insert` 类似，但更高效，因为它直接在容器中构造元素，避免了不必要的复制或移动。
   - `operator[]`：通过键来访问值。如果键不存在，则插入一个具有该键和默认构造值的元素。

2. **删除元素**：
   - `erase`：删除指定位置的元素、指定键的元素或删除一个范围内的元素。
   - `clear`：删除所有元素。

3. **查找元素**：
   - `find`：查找具有指定键的元素。
   - `count`：返回具有指定键的元素的数量（对于 `std::map`，要么是0要么是1）。
   - `operator[]`：也可以用于查找值，但如果键不存在，则会插入一个新元素。
   - `at`：通过键访问值，如果键不存在则抛出 `std::out_of_range` 异常。

4. **遍历元素**：
   - 使用迭代器遍历 `std::map` 中的元素。迭代器返回的是指向 `std::pair<const Key, T>` 的指针，其中 `Key` 是键的类型，`T` 是值的类型。注意，键是不可变的（由 `const` 修饰）。

5. **大小和容量**：
   - `size`：返回容器中元素的数量。
   - `empty`：检查容器是否为空。

6. **键和值的访问**：
   - `key_comp`：返回用于比较键的比较函数对象。
   - `value_comp`：返回一个函数对象，该函数对象可以使用比较键来比较值（实际上是通过比较它们的键来比较值）。

7. **观察者**：
   - `begin`、`end`、`cbegin`、`cend`：返回指向容器开始和结束位置的迭代器。
   - `rbegin`、`rend`、`crbegin`、`crend`：返回指向容器反向开始和结束位置的迭代器。

下面是一个简单的 `std::map` 使用示例：

```cpp
#include <iostream>
#include <map>
#include <string>

int main() {
    std::map<std::string, int> myMap;

    // 插入元素
    myMap["apple"] = 5;
    myMap.insert(std::pair<std::string, int>("banana", 3));
    myMap.emplace("orange", 4);

    // 访问元素
    std::cout << "Number of apples: " << myMap["apple"] << std::endl;
    std::cout << "Number of bananas: " << myMap.at("banana") << std::endl; // 如果键不存在，at 会抛出异常

    // 查找元素
    auto it = myMap.find("orange");
    if (it != myMap.end()) {
        std::cout << "Number of oranges: " << it->second << std::endl;
    } else {
        std::cout << "Oranges not found!" << std::endl;
    }

    // 遍历元素
    for (const auto& pair : myMap) {
        std::cout << pair.first << ": " << pair.second << std::endl;
    }

    return 0;
}
```

在这个示例中，我们创建了一个 `std::map<std::string, int>`，插入了几个元素，访问了这些元素，查找了一个元素，并遍历了所有的键值对。
