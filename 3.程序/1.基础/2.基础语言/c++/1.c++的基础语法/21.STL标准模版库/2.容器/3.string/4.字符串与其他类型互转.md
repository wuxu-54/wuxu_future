# 字符串与其他类型互转

在C++中，字符串与其他类型的数据之间的转换是一个常见的需求。C++标准库提供了一些工具和方法来实现这些转换。以下是一些常见的转换方式：

## 字符串到数值类型的转换

C++标准库中的`<string>`头文件和`<cstdlib>`（或C++11中的`<cstdint>`）头文件提供了一些函数，可以将字符串转换为数值类型（如`int`、`float`、`double`等）。

- **`std::stoi`**：将字符串转换为`int`类型。
- **`std::stol`**：将字符串转换为`long`类型。
- **`std::stoll`**：将字符串转换为`long long`类型。
- **`std::stoul`**：将字符串转换为`unsigned long`类型。
- **`std::stoull`**：将字符串转换为`unsigned long long`类型。
- **`std::stof`**：将字符串转换为`float`类型。
- **`std::stod`**：将字符串转换为`double`类型。
- **`std::stold`**：将字符串转换为`long double`类型。

这些函数通常会抛出`std::invalid_argument`异常（如果转换失败或字符串格式不正确）或`std::out_of_range`异常（如果转换后的值超出了目标类型的范围）。

## 数值类型到字符串的转换

- **`std::to_string`**：这是一个模板函数，可以将数值类型（如`int`、`float`、`double`等）转换为`std::string`类型。

```cpp
int num = 42;
std::string str = std::to_string(num);
```

- **`std::ostringstream`**：这是一个输出字符串流，可以将数值类型或其他可输出类型插入到流中，然后将流的内容转换为字符串。

```cpp
#include <sstream>
#include <string>

int num = 42;
std::ostringstream oss;
oss << num;
std::string str = oss.str();
```

## 字符串到布尔类型的转换

C++标准库没有直接提供将字符串转换为布尔类型的函数，但可以通过比较字符串内容来实现。

```cpp
std::string str = "true";
bool value = (str == "true" || str == "1"); // 简单的转换逻辑
```

注意，这种转换逻辑取决于你的应用程序如何定义字符串到布尔值的映射。

## 布尔类型到字符串的转换

同样地，C++标准库也没有直接提供将布尔类型转换为字符串的函数，但可以使用`std::to_string`（对于C++11及以上版本）或条件运算符来实现。

```cpp
bool value = true;
std::string str = value ? "true" : "false"; // 使用条件运算符
// 或者对于C++11及以上版本：
// std::string str = std::to_string(value); // 但这会将true转换为"1"，false转换为"0"
// 如果需要"true"/"false"字符串，则上面的条件运算符方法更合适。
```

## 注意事项

- 在进行字符串到数值类型的转换时，始终要检查可能的异常或错误情况。
- 当使用`std::ostringstream`进行转换时，确保在完成后调用`.str()`方法来获取转换后的字符串。
- 布尔类型到字符串的转换逻辑可能因应用程序而异，因此请根据你的需求来定义转换规则。
