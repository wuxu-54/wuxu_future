# æ•°æ®ç±»å‹

Rust æ˜¯é™æ€ç±»å‹è¯­è¨€ï¼Œåœ¨å˜é‡å£°æ˜æ—¶å¯ä»¥æ˜¾å¼æŒ‡å®šç±»å‹ï¼Œä½†é€šå¸¸å¯ä»¥ä¾èµ–ç±»å‹æ¨æ–­ã€‚

- åŸºæœ¬ç±»å‹: i32 (32ä½æœ‰ç¬¦å·æ•´æ•°), u32 (32ä½æ— ç¬¦å·æ•´æ•°), f64 (64ä½æµ®ç‚¹æ•°), bool (å¸ƒå°”ç±»å‹), char (å­—ç¬¦)

```rust
//å®ä¾‹
let x: i32 = 42;
let y: f64 = 3.14;
let is_true: bool = true;
let letter: char = 'A';
```

- å¤åˆç±»å‹ï¼šå…ƒç»„ã€æ•°ç»„ã€åŠ¨æ€æ•°ç»„
- å­—ç¬¦ä¸²ç±»å‹
- è‡ªå®šä¹‰ç±»å‹
- å¼•ç”¨ä¸æŒ‡é’ˆç±»å‹
- ç‰¹æ®Šç±»å‹
- åŠ¨æ€å¤§å°ç±»å‹ (DST)

ä»¥ä¸‹æ˜¯ Rust æ•°æ®ç±»å‹çš„è¯¦ç»†åˆ†ç±»å’Œè¯´æ˜ï¼ŒåŒ…å«åŸºç¡€ç±»å‹ã€å¤åˆç±»å‹ã€è‡ªå®šä¹‰ç±»å‹åŠé«˜çº§ç‰¹æ€§çš„å®Œæ•´è§£æï¼š

---

## ä¸€ã€**åŸºç¡€ç±»å‹ (Scalar Types)**

### 1. **æ•´æ•°ç±»å‹**

| ç±»å‹       | æœ‰ç¬¦å·èŒƒå›´                | æ— ç¬¦å·èŒƒå›´       | ç¤ºä¾‹         |
|------------|---------------------------|------------------|--------------|
| `i8`       | -128 ~ 127                | `u8`: 0 ~ 255    | `42i8`       |
| `i16`      | -32768 ~ 32767            | `u16`: 0 ~ 65535 | `-100i16`    |
| `i32`      | -2^31 ~ 2^31-1            | `u32`: 0 ~ 2^32-1| `0x1a3u32`   |
| `i64`      | -2^63 ~ 2^63-1            | `u64`: 0 ~ 2^64-1| `1_000_000`  |
| `i128`     | -2^127 ~ 2^127-1          | `u128`: 0 ~ 2^128-1 | `999u128`  |
| `isize`    | ç›®æ ‡å¹³å°æŒ‡é’ˆå¤§å°çš„æœ‰ç¬¦å·æ•´æ•° | `usize`: æ— ç¬¦å·   | `usize::MAX` |

**æ³¨æ„**ï¼š

- é»˜è®¤æ¨æ–­ç±»å‹ä¸º `i32`ã€‚
- `isize`/`usize` ç”¨äºé›†åˆç´¢å¼•ï¼ˆå¦‚æ•°ç»„é•¿åº¦ï¼‰ã€‚

### 2. **æµ®ç‚¹ç±»å‹**

| ç±»å‹   | ç²¾åº¦   | èŒƒå›´                | ç¤ºä¾‹          |
|--------|--------|---------------------|---------------|
| `f32`  | å•ç²¾åº¦ | ~1.2e-38 ~ ~3.4e38  | `3.14f32`     |
| `f64`  | åŒç²¾åº¦ | ~2.2e-308 ~ ~1.8e308| `2.71828`     |

**æ³¨æ„**ï¼š

- é»˜è®¤æ¨æ–­ç±»å‹ä¸º `f64`ï¼ˆç²¾åº¦æ›´é«˜ï¼‰ã€‚
- éµå¾ª IEEE-754 æ ‡å‡†ã€‚

### 3. **å¸ƒå°”ç±»å‹**

```rust
let is_true: bool = true;
let is_false = false;
```

- ä»…æœ‰ä¸¤ä¸ªå€¼ï¼š`true` å’Œ `false`ã€‚
- ç”¨äºæ¡ä»¶åˆ¤æ–­ï¼ˆå¦‚ `if`ã€`while`ï¼‰ã€‚

### 4. **å­—ç¬¦ç±»å‹**

```rust
let c = 'A';        // Unicode å­—ç¬¦ï¼ˆ4å­—èŠ‚ï¼‰
let emoji = 'ğŸ˜€';    // æ”¯æŒä»»æ„ Unicode
```

- å•å¼•å·å®šä¹‰ï¼Œå  **4** å­—èŠ‚ï¼ˆUTF-32ï¼‰ã€‚    è¿™é‡Œä¸cä¸åŒï¼Œç«Ÿç„¶å 4ä¸ªå­—èŠ‚
- ä¸å­—ç¬¦ä¸²åˆ‡ç‰‡ `&str` ä¸åŒã€‚

---

## äºŒã€**å¤åˆç±»å‹ (Compound Types)**

### 1. **å…ƒç»„ (Tuple)**

```rust
let tuple: (i32, f64, char) = (500, 6.4, 'Z');
let (x, y, z) = tuple;      // è§£æ„
let first = tuple.0;        // ç´¢å¼•è®¿é—®
```

- å›ºå®šé•¿åº¦ï¼Œå¯åŒ…å«ä¸åŒç±»å‹ã€‚
- ç”¨äºä¸´æ—¶ç»„åˆæ•°æ®ã€‚

### 2. **æ•°ç»„ (Array)**

```rust
let arr = [1, 2, 3, 4, 5];      // ç±»å‹æ¨æ–­ä¸º [i32; 5]
let arr2: [i32; 3] = [10; 3];   // [10, 10, 10]
let first = arr[0];             // è®¿é—®å…ƒç´ 
```

- **å›ºå®šé•¿åº¦**ï¼Œå…ƒç´ ç±»å‹ç›¸åŒã€‚
- æ•°æ®å­˜å‚¨åœ¨æ ˆä¸Šã€‚
- è¶Šç•Œè®¿é—®ä¼š panicã€‚

### 3. **åŠ¨æ€æ•°ç»„ (Vector)**

```rust
let mut vec = vec![1, 2, 3];    // ä½¿ç”¨å®åˆ›å»º
vec.push(4);                     // æ·»åŠ å…ƒç´ 
let first = vec[0];              // è®¿é—®å…ƒç´ 
```

- å †åˆ†é…çš„åŠ¨æ€æ•°ç»„ï¼ˆ`Vec<T>`ï¼‰ã€‚
- é•¿åº¦å¯å˜ï¼Œå¯åŠ¨æ€æ‰©å®¹ã€‚

---

## ä¸‰ã€**å­—ç¬¦ä¸²ç±»å‹**

### 1. **å­—ç¬¦ä¸²åˆ‡ç‰‡ (`&str`)**

```rust
let s: &str = "Hello, Rust!";   // ä¸å¯å˜ï¼Œç¼–è¯‘æ—¶å·²çŸ¥
let sub = &s[0..5];             // åˆ‡ç‰‡ "Hello"
```

- æŒ‡å‘ UTF-8 ç¼–ç å­—ç¬¦ä¸²çš„ä¸å¯å˜å¼•ç”¨ã€‚
- é€šå¸¸ç”¨äºå‡½æ•°å‚æ•°ä¼ é€’ã€‚

### 2. **å­—ç¬¦ä¸²å¯¹è±¡ (`String`)**

```rust
let mut s = String::from("Hello");
s.push_str(", Rust!");           // ä¿®æ”¹å­—ç¬¦ä¸²
let s2 = s.clone();              // æ·±æ‹·è´
```

- å †åˆ†é…çš„å¯å˜å­—ç¬¦ä¸²ã€‚
- æ”¯æŒåŠ¨æ€ä¿®æ”¹ï¼ˆè¿½åŠ ã€åˆ é™¤ç­‰ï¼‰ã€‚

---

## å››ã€**è‡ªå®šä¹‰ç±»å‹**

### 1. **ç»“æ„ä½“ (`struct`)**

```rust
struct Point {
    x: i32,
    y: i32,
}

let p = Point { x: 0, y: 10 };
println!("({}, {})", p.x, p.y);
```

### 2. **æšä¸¾ (`enum`)**

```rust
enum Message {
    Quit,
    Move { x: i32, y: i32 },
    Write(String),
}

let msg = Message::Write(String::from("Hello"));
```

### 3. **è”åˆä½“ (`union`)** ï¼ˆéœ€ `unsafe` æ“ä½œï¼‰

```rust
union MyUnion {
    i: i32,
    f: f32,
}

let u = MyUnion { i: 42 };
unsafe { println!("{}", u.i) };
```

---

## äº”ã€**å¼•ç”¨ä¸æŒ‡é’ˆç±»å‹**

### 1. **å¼•ç”¨ (`&T` / `&mut T`)**

```rust
let x = 5;
let r = &x;                     // ä¸å¯å˜å¼•ç”¨
let mut y = 10;
let rm = &mut y;                // å¯å˜å¼•ç”¨
```

### 2. **è£¸æŒ‡é’ˆ (`*const T` / `*mut T`)**

```rust
let raw_ptr: *const i32 = &x as *const i32; // ä¸å®‰å…¨çš„è£¸æŒ‡é’ˆ
```

### 3. **æ™ºèƒ½æŒ‡é’ˆ**

- **`Box<T>`**ï¼šå †åˆ†é…æ•°æ®ï¼Œå”¯ä¸€æ‰€æœ‰æƒã€‚

  ```rust
  let b = Box::new(5);         // å †ä¸Šå­˜å‚¨æ•´æ•°
  ```

- **`Rc<T>`**ï¼šå¼•ç”¨è®¡æ•°å…±äº«æ‰€æœ‰æƒã€‚

  ```rust
  let rc = Rc::new(42);        // å¤šä¸å¯å˜å¼•ç”¨å…±äº«
  ```

- **`Arc<T>`**ï¼šçº¿ç¨‹å®‰å…¨çš„å¼•ç”¨è®¡æ•°ã€‚

  ```rust
  let arc = Arc::new(42);      // è·¨çº¿ç¨‹å…±äº«
  ```

---

## å…­ã€**ç‰¹æ®Šç±»å‹**

### 1. **Never ç±»å‹ (`!`)**

```rust
fn forever() -> ! {
    loop {} // æ°¸ä¸è¿”å›
}
```

- è¡¨ç¤ºå‡½æ•°æ°¸è¿œä¸ä¼šè¿”å›ï¼ˆå¦‚ panic æˆ–æ— é™å¾ªç¯ï¼‰ã€‚

### 2. **ç±»å‹åˆ«å (`type`)**

```rust
type Meters = i32;
let distance: Meters = 100;
```

---

## ä¸ƒã€**ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨**

```rust
fn longest<'a>(s1: &'a str, s2: &'a str) -> &'a str {
    if s1.len() > s2.len() { s1 } else { s2 }
}
```

- ç”¨äºæ ‡æ³¨å¼•ç”¨çš„æœ‰æ•ˆä½œç”¨åŸŸã€‚

---

## å…«ã€**åŠ¨æ€å¤§å°ç±»å‹ (DST)**

- **`str`**ï¼šæœªç¡®å®šå¤§å°çš„å­—ç¬¦ä¸²åˆ‡ç‰‡ã€‚
- **`[T]`**ï¼šæœªç¡®å®šå¤§å°çš„æ•°ç»„åˆ‡ç‰‡ã€‚
- **`dyn Trait`**ï¼šåŠ¨æ€åˆ†å‘çš„ç‰¹å¾å¯¹è±¡ã€‚

  ```rust
  let trait_obj: &dyn Debug = &42;
  ```

---

## ä¹ã€**ç±»å‹è½¬æ¢**

### 1. **æ˜¾å¼è½¬æ¢ (`as`)**

```rust
let x = 42i32 as u64;       // æ•´æ•°ç±»å‹è½¬æ¢
```

### 2. **`From`/`Into` Trait**

```rust
let s = String::from("hello");  // å®ç° From<&str>
let num = i32::from_str("42");  // è§£æå­—ç¬¦ä¸²
```

---

## åã€**ç¤ºä¾‹ä»£ç **

```rust
// ç»“æ„ä½“ä¸æšä¸¾ç»“åˆ
struct Rectangle {
    width: u32,
    height: u32,
}

impl Rectangle {
    fn area(&self) -> u32 {
        self.width * self.height
    }
}

enum Shape {
    Circle(f64),
    Rect(Rectangle),
}

fn main() {
    let rect = Rectangle { width: 30, height: 50 };
    let shape = Shape::Rect(rect);
    match shape {
        Shape::Circle(r) => println!("Area: {}", 3.14 * r * r),
        Shape::Rect(r) => println!("Area: {}", r.area()),
    }
}
```

---

## æ€»ç»“

1. **ä¸¥æ ¼ç±»å‹ç³»ç»Ÿ**ï¼šRust è¦æ±‚æ˜¾å¼å¤„ç†ç±»å‹è½¬æ¢å’Œç”Ÿå‘½å‘¨æœŸã€‚
2. **æ‰€æœ‰æƒä¸å€Ÿç”¨**ï¼šé€šè¿‡ç±»å‹ç³»ç»Ÿç®¡ç†å†…å­˜å®‰å…¨ã€‚
3. **çµæ´»ç»„åˆ**ï¼šç»“æ„ä½“å’Œæšä¸¾å…è®¸åˆ›å»ºå¤æ‚æ•°æ®ç»“æ„ã€‚
4. **é«˜æ•ˆä¸å®‰å…¨**ï¼šæ™ºèƒ½æŒ‡é’ˆå’Œ DST ç±»å‹å¹³è¡¡æ€§èƒ½ä¸çµæ´»æ€§ã€‚

å»ºè®®é€šè¿‡å®é™…é¡¹ç›®ç»ƒä¹ æŒæ¡ç±»å‹ç³»ç»Ÿçš„ç»†èŠ‚ï¼
