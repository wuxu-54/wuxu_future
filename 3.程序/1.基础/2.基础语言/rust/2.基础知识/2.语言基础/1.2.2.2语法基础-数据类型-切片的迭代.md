# 切片迭代

在 Rust 中，迭代切片元素有多种方式，下面为你详细介绍这些方法及其适用场景。

## 1. 使用 `for` 循环直接迭代

这是最常见且简单的方式，Rust 的 `for` 循环可以直接对切片进行迭代，迭代器会返回切片中每个元素的引用。

```rust
fn main() {
    let numbers = [1, 2, 3, 4, 5];
    let slice = &numbers[1..4];

    for num in slice {
        println!("Number: {}", num);
    }
}
```

在上述代码中，`for` 循环会遍历 `slice` 中的每个元素，`num` 是元素的引用。如果需要操作元素的值，可能需要对其进行解引用，例如 `*num`。

## 2. 使用 `iter()` 方法

`iter()` 方法会返回一个不可变迭代器，用于遍历切片中的元素，返回的是元素的不可变引用。

```rust
fn main() {
    let numbers = [1, 2, 3, 4, 5];
    let slice = &numbers[1..4];

    let iterator = slice.iter();
    for num in iterator {
        println!("Number: {}", num);
    }
}
```

这里 `iter()` 方法返回的迭代器可以单独保存和操作，增加了代码的灵活性。

## 3. 使用 `iter_mut()` 方法（可变切片）

如果切片是可变的，可以使用 `iter_mut()` 方法返回一个可变迭代器，用于修改切片中的元素。

```rust
fn main() {
    let mut numbers = [1, 2, 3, 4, 5];
    let slice = &mut numbers[1..4];

    for num in slice.iter_mut() {
        *num *= 2;
    }

    println!("Modified slice: {:?}", slice);
}
```

在这个例子中，`iter_mut()` 方法返回的迭代器允许对切片中的元素进行修改，通过解引用 `*num` 可以直接操作元素的值。

## 4. 使用 `enumerate()` 方法获取索引和元素

`enumerate()` 方法可以在迭代时同时获取元素的索引和值，它会返回一个包含索引和元素引用的元组。

```rust
fn main() {
    let numbers = [1, 2, 3, 4, 5];
    let slice = &numbers[1..4];

    for (index, num) in slice.iter().enumerate() {
        println!("Index: {}, Number: {}", index, num);
    }
}
```

这里 `enumerate()` 方法将 `iter()` 返回的迭代器进行包装，使得每次迭代可以同时获取元素的索引和值。

## 5. 使用 `into_iter()` 方法（转移所有权）

`into_iter()` 方法会消耗切片并转移元素的所有权，返回一个迭代器，迭代器会返回元素本身而不是引用。

```rust
fn main() {
    let numbers = vec![1, 2, 3, 4, 5];
    let slice = &numbers[1..4];

    for num in slice.into_iter() {
        println!("Number: {}", num);
    }
    // 此时 slice 已经被消耗，不能再使用
}
```

需要注意的是，使用 `into_iter()` 后，切片会被消耗，不能再继续使用。

综上所述，根据不同的需求，可以选择合适的方法来迭代切片元素，实现对元素的读取、修改等操作。
