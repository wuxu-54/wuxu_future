# 头文件保护

`#ifndef FILTER_H` 和 `#define FILTER_H` 是 C/C++ 中的**条件编译指令**，通常与 `#endif` 配合使用，形成**头文件保护（Header Guard）** 机制。

其核心作用是：**防止头文件被重复包含（重复编译），避免因重复定义导致的编译错误**。

## 具体原理：

1. **`#ifndef FILTER_H`**  
   检查宏 `FILTER_H` 是否**未被定义**。如果未定义，则执行后续代码；如果已定义，则跳过到 `#endif` 处。

2. **`#define FILTER_H`**  
   当 `#ifndef` 条件成立时，定义宏 `FILTER_H`（宏名通常与头文件名对应，全大写，`.` 替换为 `_`）。

3. **`#endif`**  
   标记条件编译的结束，与 `#ifndef` 配对。

## 为什么需要头文件保护？

在大型项目中，头文件可能被多个源文件或其他头文件间接包含。例如：

- `A.h` 包含 `Filter.h`
- `B.h` 包含 `Filter.h`
- `main.cpp` 同时包含 `A.h` 和 `B.h`

如果 `Filter.h` 没有头文件保护，编译 `main.cpp` 时 `Filter.h` 会被包含两次，导致其中的类、函数、变量等被重复定义，触发编译错误（如 `redefinition of 'Filter'`）。

## 示例完整结构：

```cpp
// Filter.h
#ifndef FILTER_H  // 检查宏是否未定义
#define FILTER_H  // 定义宏，标记已包含

// 头文件内容（类、函数声明等）
class Filter {
    // ...
};

#endif  // 结束条件编译，与 #ifndef FILTER_H 配对
```

## 注意事项：

- 宏名需**唯一**，通常使用头文件名的大写形式（如 `Filter.h` → `FILTER_H`），避免与其他头文件冲突。
- 现代编译器也支持 `#pragma once` 作为头文件保护（更简洁），但 `#ifndef` 方式兼容性更好（支持所有编译器）。
- 头文件保护仅作用于**编译阶段**，不影响程序运行逻辑。

总之，这是 C/C++ 开发中编写头文件的**标准规范**，几乎所有头文件都应该添加这种保护机制。
